function setCookie(name,value,options){options=options||{};var expires=options.expires;if("number"==typeof expires&&expires){var d=new Date;d.setTime(d.getTime()+1e3*expires),expires=options.expires=d}expires&&expires.toUTCString&&(options.expires=expires.toUTCString()),value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];propValue!==!0&&(updatedCookie+="="+propValue)}document.cookie=updatedCookie}function adaptive(){var header_top=$(".header_top"),mainsidebar=$("#mainsidebar"),mainnewscolumn=$("#mainnewscolumn"),current_width=getCurrentWidth();if(header_top.after('<a class="version_switcher" id="go_to_full">\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043f\u043e\u043b\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430</a>'),header_top.find(".wrapper").append('<a class="hamburger"><span class="line" /><span class="line" /><span class="line" /></a>'),header_top.find(".mmsearch").insertBefore(header_top.find(".mainmenu")),header_top.on("touchstart",".hamburger",function(){$(this).toggleClass("m-active"),header_top.find(".mmsearch, .mainmenu").toggle()}),$(".mainmenu .menubar").prepend($(".secondmenu .menubar").html()),mainnewscolumn.length?mainnewscolumn.after('<div class="sidebar"><div id="adv_0"></div></div>'):$(".main").before('<div class="sidebar"><div id="adv_0"></div></div>'),adv_insert("adv_0"),mainsidebar.insertAfter("#onair").show(),$(".supermaincarousel").addClass("owl-carousel owl-theme").owlCarousel({margin:0,touchDrag:!0,autoHeight:!0,responsive:{0:{items:1},480:{items:2}}}),$(".previewcarousel").find(".carousel").removeClass("carousel").addClass("owl-carousel owl-theme").owlCarousel({touchDrag:!0,autoHeight:!0,margin:20,responsive:{0:{items:1},480:{items:2},740:{items:3}}}),$("#onair").on("click","h2",function(){location.href="/schedule/"}),$("iframe[src*='videos']").on("load",function(){var iframe=$(this);iframe.css({width:current_width-40,height:current_width-40}),setTimeout(function(){var iframe_content=iframe.contents();iframe_content.find("[id*=otv_play], .content_video-dimensions").css({width:current_width-40,height:current_width-40}),iframe_content.find("video").css({width:current_width-40,top:0}),iframe_content.find("body").css({margin:0}),360>current_width&&iframe_content.find(".vjs-remaining-time").addClass("vjs-hidden")},5e3)}),"/"===window.location.pathname){var pos,i=1;for(pos=480>=current_width?"2n":720>=current_width?"4n":"6n",$(".mainpreview").find(".preview:nth-child("+pos+")").after(function(){return i>10?void 0:'<div id="adv_'+i++ +'" class="adv_banner"></div>'});i>1;)adv_insert("adv_"+--i)}}function passwordSwitcher(){$(".switch-password").off("click.switchPass").on("click.switchPass",function(){var el=$(this),inpPass=$(this).parent().find("input");el.hasClass("visible")?(el.removeClass("visible"),inpPass.attr("type","text")):(el.addClass("visible"),inpPass.attr("type","password"))})}function setSlider($scrollpane){var handleImage=!0;$scrollpane.css("overflow","hidden"),0==$scrollpane.find(".scroll-content").length&&$scrollpane.children().wrapAll('<div class="scroll-content"> /');var difference=$scrollpane.find(".scroll-content").height()-$scrollpane.height();if($scrollpane.data("difference",difference),0>=difference&&$scrollpane.find(".slider-wrap").length>0&&($scrollpane.find(".slider-wrap").remove(),$scrollpane.find(".scroll-content").css({top:0})),difference>0){var proportion=difference/$scrollpane.find(".scroll-content").height(),handleHeight=Math.round((1-proportion)*$scrollpane.height());handleHeight-=handleHeight%2;var contentposition=$scrollpane.find(".scroll-content").position(),sliderInitial=100*(1-Math.abs(contentposition.top)/difference);0==$scrollpane.find(".slider-wrap").length&&($scrollpane.append('<div class="slider-wrap"><div class="slider-vertical"></div></div>'),sliderInitial=100),$scrollpane.find(".slider-wrap").height($scrollpane.height()),$scrollpane.find(".slider-vertical").slider({orientation:"vertical",min:0,max:100,range:"min",value:sliderInitial,slide:function(event,ui){var topValue=-((100-ui.value)*difference/100);$scrollpane.find(".scroll-content").css({top:topValue}),$("ui-slider-range").height(ui.value+"%")},change:function(event,ui){var topValue=-((100-ui.value)*($scrollpane.find(".scroll-content").height()-$scrollpane.height())/100);$scrollpane.find(".scroll-content").css({top:topValue}),$("ui-slider-range").height(ui.value+"%")}}),$scrollpane.find(".ui-slider-handle").css({height:handleHeight,"margin-bottom":-.5*handleHeight});var origSliderHeight=$scrollpane.height(),sliderHeight=origSliderHeight-handleHeight,sliderMargin=.5*(origSliderHeight-sliderHeight);$scrollpane.find(".ui-slider").css({height:sliderHeight,"margin-top":sliderMargin}),$scrollpane.find(".ui-slider-range").css({bottom:-sliderMargin}),handleImage&&($(".ui-slider-handle").append('<span class="scrollbar-top" />'),$(".ui-slider-handle").append('<span class="scrollbar-bottom" />'),$(".ui-slider-handle").append('<span class="scrollbar-grip" />'))}$(".ui-slider").click(function(event){event.stopPropagation()}),$(".slider-wrap").click(function(event){var offsetTop=$(this).offset().top,clickValue=100*(event.pageY-offsetTop)/$(this).height();$(this).find(".slider-vertical").slider("value",100-clickValue)}),$.fn.mousewheel&&($scrollpane.unmousewheel(),$scrollpane.mousewheel(function(event,delta){var speed=Math.round(5e3/$scrollpane.data("difference"));1>speed&&(speed=1),speed>100&&(speed=100);var sliderVal=$(this).find(".slider-vertical").slider("value");sliderVal+=delta*speed,$(this).find(".slider-vertical").slider("value",sliderVal),event.preventDefault()}))}function isNoAnotherPage(A){var a=$(A),url=a.attr("href");return url&&(""==url||"#"==url.substring(0,1)||"javascript:"==url.substring(0,11)||a.attr("target")||"external"==a.attr("rel")||"ajax"==a.attr("rel"))?!1:!0}function bodyclassName(WND,BODY,CONT){echoears||(WND.width()<1300?(_columns=4,BODY.removeClass("widescreen")):(_columns=5,BODY.addClass("widescreen"))),CONT.length>0&&CONT.height()<$("#mainsidebar").height()?(_columns--,BODY.addClass("smallheight")):BODY.removeClass("smallheight")}function attacheWheelEvents(elem,onWheel){elem.addEventListener?"onwheel"in document?elem.addEventListener("wheel",onWheel,!1):"onmousewheel"in document?elem.addEventListener("mousewheel",onWheel,!1):elem.addEventListener("MozMousePixelScroll",onWheel,!1):elem.attachEvent("onmousewheel",onWheel)}function pageUp(){var T,uplink=$(".up_link");touchdevice||$(window).scroll(function(){window.clearTimeout(T),T=window.setTimeout(function(){$(document).scrollTop()>$(window).height()?uplink.slideDown(200):uplink.slideUp(100)},100)})}function popularblFunc(){var T,popularbl=$(".popular");if(0!==popularbl.length&&!touchdevice){null!=localStorage.getItem("lock")&&"2"==localStorage.getItem("lock")&&($(".up_link").css("bottom",0),$(".popular").removeClass("open")),popularbl.find(".door").on("click",function(){return"2"==localStorage.getItem("lock")?($(".up_link").css("bottom",80),popularbl.addClass("open"),localStorage.setItem("lock","1")):($(".up_link").css("bottom",0),popularbl.removeClass("open"),localStorage.setItem("lock","2")),!1});var hH=$(".header_body").height()+$(".header_body").offset().top,otop=$(".footer .links_block").offset().top;$(window).scroll(function(){window.clearTimeout(T),T=window.setTimeout(function(){var hw=$(document).scrollTop()+$(window).height()-537;$(document).scrollTop()>hH&&otop>hw?popularbl.addClass("fixedpopul"):popularbl.removeClass("fixedpopul")},100)})}}!function($,undefined){var alreadyInitialized=function(){var events=$(document).data("events");return events&&events.click&&$.grep(events.click,function(e){return"rails"===e.namespace}).length};alreadyInitialized()&&$.error("jquery-ujs has already been loaded!");var rails;$.rails=rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(xhr){var token=$('meta[name="csrf-token"]').attr("content");token&&xhr.setRequestHeader("X-CSRF-Token",token)},fire:function(obj,name,data){var event=$.Event(name);return obj.trigger(event,data),event.result!==!1},confirm:function(message){return confirm(message)},ajax:function(options){return $.ajax(options)},href:function(element){return element.attr("href")},handleRemote:function(element){var method,url,data,elCrossDomain,crossDomain,withCredentials,dataType,options;if(rails.fire(element,"ajax:before")){if(elCrossDomain=element.data("cross-domain"),crossDomain=elCrossDomain===undefined?null:elCrossDomain,withCredentials=element.data("with-credentials")||null,dataType=element.data("type")||$.ajaxSettings&&$.ajaxSettings.dataType,element.is("form")){method=element.attr("method"),url=element.attr("action"),data=element.serializeArray();var button=element.data("ujs:submit-button");button&&(data.push(button),element.data("ujs:submit-button",null))}else element.is(rails.inputChangeSelector)?(method=element.data("method"),url=element.data("url"),data=element.serialize(),element.data("params")&&(data=data+"&"+element.data("params"))):(method=element.data("method"),url=rails.href(element),data=element.data("params")||null);options={type:method||"GET",data:data,dataType:dataType,beforeSend:function(xhr,settings){return settings.dataType===undefined&&xhr.setRequestHeader("accept","*/*;q=0.5, "+settings.accepts.script),rails.fire(element,"ajax:beforeSend",[xhr,settings])},success:function(data,status,xhr){element.trigger("ajax:success",[data,status,xhr])},complete:function(xhr,status){element.trigger("ajax:complete",[xhr,status])},error:function(xhr,status,error){element.trigger("ajax:error",[xhr,status,error])},xhrFields:{withCredentials:withCredentials},crossDomain:crossDomain},url&&(options.url=url);var jqxhr=rails.ajax(options);return element.trigger("ajax:send",jqxhr),jqxhr}return!1},handleMethod:function(link){var href=rails.href(link),method=link.data("method"),target=link.attr("target"),csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content"),form=$('<form method="post" action="'+href+'"></form>'),metadata_input='<input name="_method" value="'+method+'" type="hidden" />';csrf_param!==undefined&&csrf_token!==undefined&&(metadata_input+='<input name="'+csrf_param+'" value="'+csrf_token+'" type="hidden" />'),target&&form.attr("target",target),form.hide().append(metadata_input).appendTo("body"),form.submit()},disableFormElements:function(form){form.find(rails.disableSelector).each(function(){var element=$(this),method=element.is("button")?"html":"val";element.data("ujs:enable-with",element[method]()),element[method](element.data("disable-with")),element.prop("disabled",!0)})},enableFormElements:function(form){form.find(rails.enableSelector).each(function(){var element=$(this),method=element.is("button")?"html":"val";element.data("ujs:enable-with")&&element[method](element.data("ujs:enable-with")),element.prop("disabled",!1)})},allowAction:function(element){var callback,message=element.data("confirm"),answer=!1;return message?(rails.fire(element,"confirm")&&(answer=rails.confirm(message),callback=rails.fire(element,"confirm:complete",[answer])),answer&&callback):!0},blankInputs:function(form,specifiedSelector,nonBlank){var input,valueToCheck,inputs=$(),selector=specifiedSelector||"input,textarea";return form.find(selector).each(function(){input=$(this),valueToCheck=input.is(":checkbox,:radio")?input.is(":checked"):input.val(),valueToCheck==!!nonBlank&&(inputs=inputs.add(input))}),inputs.length?inputs:!1},nonBlankInputs:function(form,specifiedSelector){return rails.blankInputs(form,specifiedSelector,!0)},stopEverything:function(e){return $(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(form,event){var events=form.data("events"),continuePropagation=!0;return events!==undefined&&events.submit!==undefined&&$.each(events.submit,function(i,obj){return"function"==typeof obj.handler?continuePropagation=obj.handler(event):void 0}),continuePropagation},disableElement:function(element){element.data("ujs:enable-with",element.html()),element.html(element.data("disable-with")),element.bind("click.railsDisable",function(e){return rails.stopEverything(e)})},enableElement:function(element){element.data("ujs:enable-with")!==undefined&&(element.html(element.data("ujs:enable-with")),element.data("ujs:enable-with",!1)),element.unbind("click.railsDisable")}},rails.fire($(document),"rails:attachBindings")&&($.ajaxPrefilter(function(options,originalOptions,xhr){options.crossDomain||rails.CSRFProtection(xhr)}),$(document).delegate(rails.linkDisableSelector,"ajax:complete",function(){rails.enableElement($(this))}),$(document).delegate(rails.linkClickSelector,"click.rails",function(e){var link=$(this),method=link.data("method"),data=link.data("params");return rails.allowAction(link)?(link.is(rails.linkDisableSelector)&&rails.disableElement(link),link.data("remote")!==undefined?!e.metaKey&&!e.ctrlKey||method&&"GET"!==method||data?(rails.handleRemote(link)===!1&&rails.enableElement(link),!1):!0:link.data("method")?(rails.handleMethod(link),!1):void 0):rails.stopEverything(e)}),$(document).delegate(rails.inputChangeSelector,"change.rails",function(e){var link=$(this);return rails.allowAction(link)?(rails.handleRemote(link),!1):rails.stopEverything(e)}),$(document).delegate(rails.formSubmitSelector,"submit.rails",function(e){var form=$(this),remote=form.data("remote")!==undefined,blankRequiredInputs=rails.blankInputs(form,rails.requiredInputSelector),nonBlankFileInputs=rails.nonBlankInputs(form,rails.fileInputSelector);return rails.allowAction(form)?blankRequiredInputs&&form.attr("novalidate")==undefined&&rails.fire(form,"ajax:aborted:required",[blankRequiredInputs])?rails.stopEverything(e):remote?nonBlankFileInputs?(setTimeout(function(){rails.disableFormElements(form)},13),rails.fire(form,"ajax:aborted:file",[nonBlankFileInputs])):!$.support.submitBubbles&&$().jquery<"1.7"&&rails.callFormSubmitBindings(form,e)===!1?rails.stopEverything(e):(rails.handleRemote(form),!1):void setTimeout(function(){rails.disableFormElements(form)},13):rails.stopEverything(e)}),$(document).delegate(rails.formInputClickSelector,"click.rails",function(event){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(event);var name=button.attr("name"),data=name?{name:name,value:button.val()}:null;button.closest("form").data("ujs:submit-button",data)}),$(document).delegate(rails.formSubmitSelector,"ajax:beforeSend.rails",function(event){this==event.target&&rails.disableFormElements($(this))}),$(document).delegate(rails.formSubmitSelector,"ajax:complete.rails",function(event){this==event.target&&rails.enableFormElements($(this))}),$(function(){csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content"),$('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/**
     * Owl Carousel v2.2.1
     * Copyright 2013-2017 David Deutsch
     * Licensed under  ()
     */
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g--;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var b,c,e;b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e&&this.preloadAutoWidthImages(b)}this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),c=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,e=30,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&b>h-e&&h+e>b?d=a:"right"===c&&b>h-f-e&&h-f+e>b?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),-1===d},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||1>c?a=d:(0>a||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){for(b=this._items.length,c=this._items[--b].width(),d=this.$element.width();b--&&(c+=this._items[b].width()+this.settings.margin,!(c>d)););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(0>e),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),a=c+e,d=((a-h)%g+g)%g+h,d!==a&&i>=d-e&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.leave("animating"),void this.trigger("translated"))},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():a(b).width()?d=a(b).width():c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),this.settings.responsive!==!1&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]=this._states.tags[b.name]?this._states.tags[b.name].concat(b.tags):b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[],f=0;a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}}))},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var e=function(b){this._core=b,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()
},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype.play=function(){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},e.prototype._getNextTimeout=function(d,e){return this._timeout&&b.clearTimeout(this._timeout),b.setTimeout(a.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(e||this._core.settings.autoplaySpeed)},this),d||this._core.settings.autoplayTimeout)},e.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},e.prototype.stop=function(){this._core.is("rotating")&&(b.clearTimeout(this._timeout),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<div>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;e>a;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):0>b&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){return g[b]!==d?(e=!c||b,!1):void 0}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document);var addthis_config={services_compact:"email,link,telegram,google_plusone_share,more"};$(function(){window.isOperaMini||(getCurrentWidth()<=getMaxWidth()&&(window.is_adaptive?adaptive():($("footer .copy").before('<a class="version_switcher" id="go_to_adaptive">\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430</a>'),getCookie("not_adaptive_header")||$(".header").before('<div class="version_switcher_header">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e? <a data-res="1" href="#">\u0414\u0430</a> <a data-res="0" href="#">\u041d\u0435\u0442</a> </div>'))),$("body").on("click",".version_switcher_header a",function(e){e.preventDefault(),setCookie("not_adaptive_header","1",{expires:86400}),0===$(this).data("res")?$(".version_switcher_header").remove():$("#go_to_adaptive").trigger("click")}),$("body").on("click","#go_to_adaptive",function(e){e.preventDefault(),setCookie("not_adaptive","0"),window.ga&&ga instanceof Function&&ga("send","event","switch","to_responsive"),location.reload()}).on("click","#go_to_full",function(e){e.preventDefault(),setCookie("not_adaptive","1"),setCookie("not_adaptive_header","1",{expires:3600}),window.ga&&ga instanceof Function&&ga("send","event","switch","to_desktop"),location.reload()}))}),$(function(){$(".adv_inside, .video_adv_1").on("DOMSubtreeModified",function(){var wrapper=$(this),children=wrapper.children("div"),float="left";wrapper.width()>480&&(float="none"),wrapper.add(children).css("float",float)})}),function(){function extend(a,b){var n;a||(a={});for(n in b)a[n]=b[n];return a}function merge(){var i,len,args=arguments,ret={},doCopy=function(copy,original){var value,key;"object"!=typeof copy&&(copy={});for(key in original)original.hasOwnProperty(key)&&(value=original[key],copy[key]=value&&"object"==typeof value&&"[object Array]"!==Object.prototype.toString.call(value)&&"number"!=typeof value.nodeType?doCopy(copy[key]||{},value):original[key]);return copy};for(args[0]===!0&&(ret=args[1],args=Array.prototype.slice.call(args,2)),len=args.length,i=0;len>i;i++)ret=doCopy(ret,args[i]);return ret}function hash(){for(var i=0,args=arguments,length=args.length,obj={};length>i;i++)obj[args[i++]]=args[i];return obj}function pInt(s,mag){return parseInt(s,mag||10)}function isString(s){return"string"==typeof s}function isObject(obj){return"object"==typeof obj}function isArray(obj){return"[object Array]"===Object.prototype.toString.call(obj)}function isNumber(n){return"number"==typeof n}function log2lin(num){return math.log(num)/math.LN10}function lin2log(num){return math.pow(10,num)}function erase(arr,item){for(var i=arr.length;i--;)if(arr[i]===item){arr.splice(i,1);break}}function defined(obj){return obj!==UNDEFINED&&null!==obj}function attr(elem,prop,value){var key,ret,setAttribute="setAttribute";if(isString(prop))defined(value)?elem[setAttribute](prop,value):elem&&elem.getAttribute&&(ret=elem.getAttribute(prop));else if(defined(prop)&&isObject(prop))for(key in prop)elem[setAttribute](key,prop[key]);return ret}function splat(obj){return isArray(obj)?obj:[obj]}function pick(){var i,arg,args=arguments,length=args.length;for(i=0;length>i;i++)if(arg=args[i],"undefined"!=typeof arg&&null!==arg)return arg}function css(el,styles){isIE&&styles&&styles.opacity!==UNDEFINED&&(styles.filter="alpha(opacity="+100*styles.opacity+")"),extend(el.style,styles)}function createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);return attribs&&extend(el,attribs),nopad&&css(el,{padding:0,border:NONE,margin:0}),styles&&css(el,styles),parent&&parent.appendChild(el),el}function extendClass(parent,members){var object=function(){};return object.prototype=new parent,extend(object.prototype,members),object}function numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=+number||0,c=-1===decimals?(n.toString().split(".")[1]||"").length:isNaN(decimals=mathAbs(decimals))?2:decimals,d=void 0===decPoint?lang.decimalPoint:decPoint,t=void 0===thousandsSep?lang.thousandsSep:thousandsSep,s=0>n?"-":"",i=String(pInt(n=mathAbs(n).toFixed(c))),j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+mathAbs(n-i).toFixed(c).slice(2):"")}function pad(number,length){return new Array((length||2)+1-String(number).length).join(0)+number}function wrap(obj,method,func){var proceed=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);return args.unshift(proceed),func.apply(this,args)}}function formatSingle(format,val){var decimals,floatRegex=/f$/,decRegex=/\.([0-9])/,lang=defaultOptions.lang;return floatRegex.test(format)?(decimals=format.match(decRegex),decimals=decimals?decimals[1]:-1,val=numberFormat(val,decimals,lang.decimalPoint,format.indexOf(",")>-1?lang.thousandsSep:"")):val=dateFormat(format,val),val}function format(str,ctx){for(var segment,valueAndFormat,path,i,len,val,index,splitter="{",isInside=!1,ret=[];-1!==(index=str.indexOf(splitter));){if(segment=str.slice(0,index),isInside){for(valueAndFormat=segment.split(":"),path=valueAndFormat.shift().split("."),len=path.length,val=ctx,i=0;len>i;i++)val=val[path[i]];valueAndFormat.length&&(val=formatSingle(valueAndFormat.join(":"),val)),ret.push(val)}else ret.push(segment);str=str.slice(index+1),isInside=!isInside,splitter=isInside?"}":"{"}return ret.push(str),ret.join("")}function getMagnitude(num){return math.pow(10,mathFloor(math.log(num)/math.LN10))}function normalizeTickInterval(interval,multiples,magnitude,options){var normalized,i;for(magnitude=pick(magnitude,1),normalized=interval/magnitude,multiples||(multiples=[1,2,2.5,5,10],options&&options.allowDecimals===!1&&(1===magnitude?multiples=[1,2,5,10]:.1>=magnitude&&(multiples=[1/magnitude]))),i=0;i<multiples.length&&(interval=multiples[i],!(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2));i++);return interval*=magnitude}function ChartCounters(){this.color=0,this.symbol=0}function stableSort(arr,sortFunction){var sortValue,i,length=arr.length;for(i=0;length>i;i++)arr[i].ss_i=i;for(arr.sort(function(a,b){return sortValue=sortFunction(a,b),0===sortValue?a.ss_i-b.ss_i:sortValue}),i=0;length>i;i++)delete arr[i].ss_i}function arrayMin(data){for(var i=data.length,min=data[0];i--;)data[i]<min&&(min=data[i]);return min}function arrayMax(data){for(var i=data.length,max=data[0];i--;)data[i]>max&&(max=data[i]);return max}function destroyObjectProperties(obj,except){var n;for(n in obj)obj[n]&&obj[n]!==except&&obj[n].destroy&&obj[n].destroy(),delete obj[n]}function discardElement(element){garbageBin||(garbageBin=createElement(DIV)),element&&garbageBin.appendChild(element),garbageBin.innerHTML=""}function error(code,stop){var msg="Highcharts error #"+code+": www.highcharts.com/errors/"+code;if(stop)throw msg;win.console&&console.log(msg)}function correctFloat(num){return parseFloat(num.toPrecision(14))}function setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation)}function setTimeMethods(){var useUTC=defaultOptions.global.useUTC,GET=useUTC?"getUTC":"get",SET=useUTC?"setUTC":"set";timezoneOffset=6e4*(useUTC&&defaultOptions.global.timezoneOffset||0),makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime()},getMinutes=GET+"Minutes",getHours=GET+"Hours",getDay=GET+"Day",getDate=GET+"Date",getMonth=GET+"Month",getFullYear=GET+"FullYear",setMinutes=SET+"Minutes",setHours=SET+"Hours",setDate=SET+"Date",setMonth=SET+"Month",setFullYear=SET+"FullYear"}function setOptions(options){return defaultOptions=merge(!0,defaultOptions,options),setTimeMethods(),defaultOptions}function getOptions(){return defaultOptions}function SVGElement(){}function Tick(axis,pos,type,noLabel){this.axis=axis,this.pos=pos,this.type=type||"",this.isNew=!0,type||noLabel||this.addLabel()}function Axis(){this.init.apply(this,arguments)}function StackItem(axis,options,isNegative,x,stackOption,stacking){var inverted=axis.chart.inverted;this.axis=axis,this.isNegative=isNegative,this.options=options,this.x=x,this.total=null,this.points={},this.stack=stackOption,this.percent="percent"===stacking,this.alignOptions={align:options.align||(inverted?isNegative?"left":"right":"center"),verticalAlign:options.verticalAlign||(inverted?"middle":isNegative?"bottom":"top"),y:pick(options.y,inverted?4:isNegative?14:-6),x:pick(options.x,inverted?isNegative?-6:6:0)},this.textAlign=options.textAlign||(inverted?isNegative?"right":"left":"center")}function Tooltip(){this.init.apply(this,arguments)}function Chart(){this.init.apply(this,arguments)}var UNDEFINED,Renderer,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,timeUnits,AxisPlotLineOrBandExtension,makeTime,timezoneOffset,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=2*mathPI/360,userAgent=navigator.userAgent,isOpera=win.opera,isIE=/msie/i.test(userAgent)&&!isOpera,docMode8=8===doc.documentMode,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),isTouchDevice=/(Mobile|Android|Windows Phone)/.test(userAgent),SVG_NS="http://www.w3.org/2000/svg",hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,"svg").createSVGRect,hasBidiBug=isFirefox&&parseInt(userAgent.split("Firefox/")[1],10)<4,useCanVG=!hasSVG&&!isIE&&!!doc.createElement("canvas").getContext,hasTouch=doc.documentElement.ontouchstart!==UNDEFINED,symbolSizes={},idCounter=0,noop=function(){},charts=[],PRODUCT="Highcharts",VERSION="3.0.9",DIV="div",ABSOLUTE="absolute",RELATIVE="relative",HIDDEN="hidden",PREFIX="highcharts-",VISIBLE="visible",PX="px",NONE="none",M="M",L="L",numRegex=/^[0-9]+$/,TRACKER_FILL="rgba(192,192,192,"+(hasSVG?1e-4:.002)+")",NORMAL_STATE="",HOVER_STATE="hover",SELECT_STATE="select",MILLISECOND="millisecond",SECOND="second",MINUTE="minute",HOUR="hour",DAY="day",WEEK="week",MONTH="month",YEAR="year",STROKE_WIDTH="stroke-width",seriesTypes={};win.Highcharts=win.Highcharts?error(16,!0):{},dateFormat=function(format,timestamp,capitalize){if(!defined(timestamp)||isNaN(timestamp))return"Invalid date";format=pick(format,"%Y-%m-%d %H:%M:%S");var key,date=new Date(timestamp-timezoneOffset),hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,replacements=extend({a:langWeekdays[day].substr(0,3),A:langWeekdays[day],d:pad(dayOfMonth),e:dayOfMonth,b:lang.shortMonths[month],B:lang.months[month],m:pad(month+1),y:fullYear.toString().substr(2,2),Y:fullYear,H:pad(hours),I:pad(hours%12||12),l:hours%12||12,M:pad(date[getMinutes]()),p:12>hours?"AM":"PM",P:12>hours?"am":"pm",S:pad(date.getSeconds()),L:pad(mathRound(timestamp%1e3),3)},Highcharts.dateFormats);for(key in replacements)for(;-1!==format.indexOf("%"+key);)format=format.replace("%"+key,"function"==typeof replacements[key]?replacements[key](timestamp):replacements[key]);return capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format},ChartCounters.prototype={wrapColor:function(length){this.color>=length&&(this.color=0)},wrapSymbol:function(length){this.symbol>=length&&(this.symbol=0)}},timeUnits=hash(MILLISECOND,1,SECOND,1e3,MINUTE,6e4,HOUR,36e5,DAY,864e5,WEEK,6048e5,MONTH,26784e5,YEAR,31556952e3),pathAnim={init:function(elem,fromD,toD){fromD=fromD||"";var endLength,slice,i,startBaseLine,endBaseLine,shift=elem.shift,bezier=fromD.indexOf("C")>-1,numParams=bezier?7:3,start=fromD.split(" "),end=[].concat(toD),sixify=function(arr){for(i=arr.length;i--;)arr[i]===M&&arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2])};if(bezier&&(sixify(start),sixify(end)),elem.isArea&&(startBaseLine=start.splice(start.length-6,6),endBaseLine=end.splice(end.length-6,6)),shift<=end.length/numParams&&start.length===end.length)for(;shift--;)end=[].concat(end).splice(0,numParams).concat(end);if(elem.shift=0,start.length)for(endLength=end.length;start.length<endLength;)slice=[].concat(start).splice(start.length-numParams,numParams),bezier&&(slice[numParams-6]=slice[numParams-2],slice[numParams-5]=slice[numParams-1]),start=start.concat(slice);return startBaseLine&&(start=start.concat(startBaseLine),end=end.concat(endBaseLine)),[start,end]},step:function(start,end,pos,complete){var startVal,ret=[],i=start.length;if(1===pos)ret=complete;else if(i===end.length&&1>pos)for(;i--;)startVal=parseFloat(start[i]),ret[i]=isNaN(startVal)?start[i]:pos*parseFloat(end[i]-startVal)+startVal;else ret=end;return ret}},function($){win.HighchartsAdapter=win.HighchartsAdapter||$&&{init:function(pathAnim){var dSetter,Fx=$.fx,Step=Fx.step,Tween=$.Tween,propHooks=Tween&&Tween.propHooks,opacityHook=$.cssHooks.opacity;$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b}}),$.each(["cur","_default","width","height","opacity"],function(i,fn){var base,obj=Step;"cur"===fn?obj=Fx.prototype:"_default"===fn&&Tween&&(obj=propHooks[fn],fn="set"),base=obj[fn],base&&(obj[fn]=function(fx){var elem;return fx=i?fx:this,"align"!==fx.prop?(elem=fx.elem,elem.attr?elem.attr(fx.prop,"cur"===fn?UNDEFINED:fx.now):base.apply(this,arguments)):void 0})}),wrap(opacityHook,"get",function(proceed,elem,computed){return elem.attr?elem.opacity||0:proceed.call(this,elem,computed)}),dSetter=function(fx){var ends,elem=fx.elem;fx.started||(ends=pathAnim.init(elem,elem.d,elem.toD),fx.start=ends[0],fx.end=ends[1],fx.started=!0),elem.attr("d",pathAnim.step(fx.start,fx.end,fx.pos,elem.toD))},Tween?propHooks.d={set:dSetter}:Step.d=dSetter,this.each=Array.prototype.forEach?function(arr,fn){return Array.prototype.forEach.call(arr,fn)}:function(arr,fn){for(var i=0,len=arr.length;len>i;i++)if(fn.call(arr[i],arr[i],i,arr)===!1)return i},$.fn.highcharts=function(){var options,ret,chart,constr="Chart",args=arguments;return isString(args[0])&&(constr=args[0],args=Array.prototype.slice.call(args,1)),options=args[0],options!==UNDEFINED&&(options.chart=options.chart||{},options.chart.renderTo=this[0],chart=new Highcharts[constr](options,args[1]),ret=this),options===UNDEFINED&&(ret=charts[attr(this[0],"data-highcharts-chart")]),ret}},getScript:$.getScript,inArray:$.inArray,adapterRun:function(elem,method){return $(elem)[method]()},grep:$.grep,map:function(arr,fn){for(var results=[],i=0,len=arr.length;len>i;i++)results[i]=fn.call(arr[i],arr[i],i,arr);return results},offset:function(el){return $(el).offset()},addEvent:function(el,event,fn){$(el).bind(event,fn)},removeEvent:function(el,eventType,handler){var func=doc.removeEventListener?"removeEventListener":"detachEvent";doc[func]&&el&&!el[func]&&(el[func]=function(){}),$(el).unbind(eventType,handler)},fireEvent:function(el,type,eventArguments,defaultFunction){var defaultPrevented,event=$.Event(type),detachedType="detached"+type;!isIE&&eventArguments&&(delete eventArguments.layerX,delete eventArguments.layerY),extend(event,eventArguments),el[type]&&(el[detachedType]=el[type],el[type]=null),$.each(["preventDefault","stopPropagation"],function(i,fn){var base=event[fn];event[fn]=function(){try{base.call(event)}catch(e){"preventDefault"===fn&&(defaultPrevented=!0)}}}),$(el).trigger(event),el[detachedType]&&(el[type]=el[detachedType],el[detachedType]=null),!defaultFunction||event.isDefaultPrevented()||defaultPrevented||defaultFunction(event)},washMouseEvent:function(e){var ret=e.originalEvent||e;return ret.pageX===UNDEFINED&&(ret.pageX=e.pageX,ret.pageY=e.pageY),ret},animate:function(el,params,options){var $el=$(el);el.style||(el.style={}),params.d&&(el.toD=params.d,params.d=1),$el.stop(),params.opacity!==UNDEFINED&&el.attr&&(params.opacity+="px"),$el.animate(params,options)},stop:function(el){$(el).stop()}}}(win.jQuery);var globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{};globalAdapter&&globalAdapter.init.call(globalAdapter,pathAnim);var adapterRun=adapter.adapterRun,getScript=adapter.getScript,inArray=adapter.inArray,each=adapter.each,grep=adapter.grep,offset=adapter.offset,map=adapter.map,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,washMouseEvent=adapter.washMouseEvent,animate=adapter.animate,stop=adapter.stop,defaultLabelOptions={enabled:!0,x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px"}};defaultOptions={colors:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.9/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.9/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":numberFormat(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:ABSOLUTE,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:ABSOLUTE,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:RELATIVE,top:"1em"},style:{position:ABSOLUTE,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:hasSVG,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:isTouchDevice?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;setTimeMethods();var rgbaRegEx=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,hexRegEx=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,rgbRegEx=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Color=function(input){function init(input){input&&input.stops?stops=map(input.stops,function(stop){return Color(stop[1])}):(result=rgbaRegEx.exec(input),result?rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)]:(result=hexRegEx.exec(input),result?rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1]:(result=rgbRegEx.exec(input),result&&(rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),1]))))}function get(format){var ret;return stops?(ret=merge(input),ret.stops=[].concat(ret.stops),each(stops,function(stop,i){ret.stops[i]=[ret.stops[i][0],stop.get(format)]})):ret=rgba&&!isNaN(rgba[0])?"rgb"===format?"rgb("+rgba[0]+","+rgba[1]+","+rgba[2]+")":"a"===format?rgba[3]:"rgba("+rgba.join(",")+")":input,ret}function brighten(alpha){if(stops)each(stops,function(stop){stop.brighten(alpha)});else if(isNumber(alpha)&&0!==alpha){var i;for(i=0;3>i;i++)rgba[i]+=pInt(255*alpha),rgba[i]<0&&(rgba[i]=0),rgba[i]>255&&(rgba[i]=255)}return this}function setOpacity(alpha){return rgba[3]=alpha,this}var result,stops,rgba=[];return init(input),{get:get,brighten:brighten,rgba:rgba,setOpacity:setOpacity}};SVGElement.prototype={init:function(renderer,nodeName){var wrapper=this;wrapper.element="span"===nodeName?createElement(nodeName):doc.createElementNS(SVG_NS,nodeName),wrapper.renderer=renderer,wrapper.attrSetters={}},opacity:1,animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,!0);stop(this),animOptions?(animOptions=merge(animOptions),complete&&(animOptions.complete=complete),animate(this,params,animOptions)):(this.attr(params),complete&&complete())},attr:function(hash,val){var key,value,result,i,child,skipAttr,titleNode,hasSetSymbolSize,doTransform,wrapper=this,element=wrapper.element,nodeName=element.nodeName.toLowerCase(),renderer=wrapper.renderer,attrSetters=wrapper.attrSetters,shadows=wrapper.shadows,ret=wrapper;if(isString(hash)&&defined(val)&&(key=hash,hash={},hash[key]=val),isString(hash))key=hash,"circle"===nodeName?key={x:"cx",y:"cy"}[key]||key:"strokeWidth"===key&&(key="stroke-width"),ret=attr(element,key)||wrapper[key]||0,"d"!==key&&"visibility"!==key&&"fill"!==key&&(ret=parseFloat(ret));else{for(key in hash)if(skipAttr=!1,value=hash[key],result=attrSetters[key]&&attrSetters[key].call(wrapper,value,key),result!==!1){if(result!==UNDEFINED&&(value=result),"d"===key)value&&value.join&&(value=value.join(" ")),/(NaN| {2}|^$)/.test(value)&&(value="M 0 0");else if("x"===key&&"text"===nodeName)for(i=0;i<element.childNodes.length;i++)child=element.childNodes[i],attr(child,"x")===attr(element,"x")&&attr(child,"x",value);else if(!wrapper.rotation||"x"!==key&&"y"!==key)if("fill"===key)value=renderer.color(value,element,key);
else if("circle"!==nodeName||"x"!==key&&"y"!==key)if("rect"===nodeName&&"r"===key)attr(element,{rx:value,ry:value}),skipAttr=!0;else if("translateX"===key||"translateY"===key||"rotation"===key||"verticalAlign"===key||"scaleX"===key||"scaleY"===key)doTransform=!0,skipAttr=!0;else if("stroke"===key)value=renderer.color(value,element,key);else if("dashstyle"===key){if(key="stroke-dasharray",value=value&&value.toLowerCase(),"solid"===value)value=NONE;else if(value){for(value=value.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),i=value.length;i--;)value[i]=pInt(value[i])*pick(hash["stroke-width"],wrapper["stroke-width"]);value=value.join(",")}}else"width"===key?value=pInt(value):"align"===key?(key="text-anchor",value={left:"start",center:"middle",right:"end"}[value]):"title"===key&&(titleNode=element.getElementsByTagName("title")[0],titleNode||(titleNode=doc.createElementNS(SVG_NS,"title"),element.appendChild(titleNode)),titleNode.textContent=value);else key={x:"cx",y:"cy"}[key]||key;else doTransform=!0;if("strokeWidth"===key&&(key="stroke-width"),("stroke-width"===key||"stroke"===key)&&(wrapper[key]=value,wrapper.stroke&&wrapper["stroke-width"]?(attr(element,"stroke",wrapper.stroke),attr(element,"stroke-width",wrapper["stroke-width"]),wrapper.hasStroke=!0):"stroke-width"===key&&0===value&&wrapper.hasStroke&&(element.removeAttribute("stroke"),wrapper.hasStroke=!1),skipAttr=!0),wrapper.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(key)&&(hasSetSymbolSize||(wrapper.symbolAttr(hash),hasSetSymbolSize=!0),skipAttr=!0),shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(key))for(i=shadows.length;i--;)attr(shadows[i],key,"height"===key?mathMax(value-(shadows[i].cutHeight||0),0):value);("width"===key||"height"===key)&&"rect"===nodeName&&0>value&&(value=0),wrapper[key]=value,"text"===key?(value!==wrapper.textStr&&delete wrapper.bBox,wrapper.textStr=value,wrapper.added&&renderer.buildText(wrapper)):skipAttr||attr(element,key,value)}doTransform&&wrapper.updateTransform()}return ret},addClass:function(className){var element=this.element,currentClassName=attr(element,"class")||"";return-1===currentClassName.indexOf(className)&&attr(element,"class",currentClassName+" "+className),this},symbolAttr:function(hash){var wrapper=this;each(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(key){wrapper[key]=pick(hash[key],wrapper[key])}),wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.width,wrapper.height,wrapper)})},clip:function(clipRect){return this.attr("clip-path",clipRect?"url("+this.renderer.url+"#"+clipRect.id+")":NONE)},crisp:function(strokeWidth,x,y,width,height){var key,normalizer,wrapper=this,attribs={},values={};strokeWidth=strokeWidth||wrapper.strokeWidth||wrapper.attr&&wrapper.attr("stroke-width")||0,normalizer=mathRound(strokeWidth)%2/2,values.x=mathFloor(x||wrapper.x||0)+normalizer,values.y=mathFloor(y||wrapper.y||0)+normalizer,values.width=mathFloor((width||wrapper.width||0)-2*normalizer),values.height=mathFloor((height||wrapper.height||0)-2*normalizer),values.strokeWidth=strokeWidth;for(key in values)wrapper[key]!==values[key]&&(wrapper[key]=attribs[key]=values[key]);return attribs},css:function(styles){var n,elemWrapper=this,elem=elemWrapper.element,textWidth=elemWrapper.textWidth=styles&&styles.width&&"text"===elem.nodeName.toLowerCase()&&pInt(styles.width),serializedCss="",hyphenate=function(a,b){return"-"+b.toLowerCase()};if(styles&&styles.color&&(styles.fill=styles.color),styles=extend(elemWrapper.styles,styles),elemWrapper.styles=styles,textWidth&&delete styles.width,isIE&&!hasSVG)css(elemWrapper.element,styles);else{for(n in styles)serializedCss+=n.replace(/([A-Z])/g,hyphenate)+":"+styles[n]+";";attr(elem,"style",serializedCss)}return textWidth&&elemWrapper.added&&elemWrapper.renderer.buildText(elemWrapper),elemWrapper},on:function(eventType,handler){var svgElement=this,element=svgElement.element;return hasTouch&&"click"===eventType?(element.ontouchstart=function(e){svgElement.touchEventFired=Date.now(),e.preventDefault(),handler.call(element,e)},element.onclick=function(e){(-1===userAgent.indexOf("Android")||Date.now()-(svgElement.touchEventFired||0)>1100)&&handler.call(element,e)}):element["on"+eventType]=handler,this},setRadialReference:function(coordinates){return this.element.radialReference=coordinates,this},translate:function(x,y){return this.attr({translateX:x,translateY:y})},invert:function(){var wrapper=this;return wrapper.inverted=!0,wrapper.updateTransform(),wrapper},updateTransform:function(){var transform,wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,scaleX=wrapper.scaleX,scaleY=wrapper.scaleY,inverted=wrapper.inverted,rotation=wrapper.rotation;inverted&&(translateX+=wrapper.attr("width"),translateY+=wrapper.attr("height")),transform=["translate("+translateX+","+translateY+")"],inverted?transform.push("rotate(90) scale(-1,1)"):rotation&&transform.push("rotate("+rotation+" "+(wrapper.x||0)+" "+(wrapper.y||0)+")"),(defined(scaleX)||defined(scaleY))&&transform.push("scale("+pick(scaleX,1)+" "+pick(scaleY,1)+")"),transform.length&&attr(wrapper.element,"transform",transform.join(" "))},toFront:function(){var element=this.element;return element.parentNode.appendChild(element),this},align:function(alignOptions,alignByTranslate,box){var align,vAlign,x,y,alignTo,attribs={},renderer=this.renderer,alignedObjects=renderer.alignedObjects;return alignOptions?(this.alignOptions=alignOptions,this.alignByTranslate=alignByTranslate,(!box||isString(box))&&(this.alignTo=alignTo=box||"renderer",erase(alignedObjects,this),alignedObjects.push(this),box=null)):(alignOptions=this.alignOptions,alignByTranslate=this.alignByTranslate,alignTo=this.alignTo),box=pick(box,renderer[alignTo],renderer),align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),("right"===align||"center"===align)&&(x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align]),attribs[alignByTranslate?"translateX":"x"]=mathRound(x),("bottom"===vAlign||"middle"===vAlign)&&(y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1)),attribs[alignByTranslate?"translateY":"y"]=mathRound(y),this[this.placed?"animate":"attr"](attribs),this.placed=!0,this.alignAttr=attribs,this},getBBox:function(){var width,height,numKey,wrapper=this,bBox=wrapper.bBox,renderer=wrapper.renderer,rotation=wrapper.rotation,element=wrapper.element,styles=wrapper.styles,rad=rotation*deg2rad,textStr=wrapper.textStr;if((""===textStr||numRegex.test(textStr))&&(numKey=textStr.length+"|"+styles.fontSize+"|"+styles.fontFamily,bBox=renderer.cache[numKey]),!bBox){if(element.namespaceURI===SVG_NS||renderer.forExport){try{bBox=element.getBBox?extend({},element.getBBox()):{width:element.offsetWidth,height:element.offsetHeight}}catch(e){}(!bBox||bBox.width<0)&&(bBox={width:0,height:0})}else bBox=wrapper.htmlGetBBox();renderer.isSVG&&(width=bBox.width,height=bBox.height,isIE&&styles&&"11px"===styles.fontSize&&"16.9"===height.toPrecision(3)&&(bBox.height=height=14),rotation&&(bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad)),bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad)))),wrapper.bBox=bBox,numKey&&(renderer.cache[numKey]=bBox)}return bBox},show:function(){return this.attr({visibility:VISIBLE})},hide:function(){return this.attr({visibility:HIDDEN})},fadeOut:function(duration){var elemWrapper=this;elemWrapper.animate({opacity:0},{duration:duration||150,complete:function(){elemWrapper.hide()}})},add:function(parent){var otherElement,otherZIndex,i,inserted,renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes=parentNode.childNodes,element=this.element,zIndex=attr(element,"zIndex");if(parent&&(this.parentGroup=parent),this.parentInverted=parent&&parent.inverted,void 0!==this.textStr&&renderer.buildText(this),zIndex&&(parentWrapper.handleZ=!0,zIndex=pInt(zIndex)),parentWrapper.handleZ)for(i=0;i<childNodes.length;i++)if(otherElement=childNodes[i],otherZIndex=attr(otherElement,"zIndex"),otherElement!==element&&(pInt(otherZIndex)>zIndex||!defined(zIndex)&&defined(otherZIndex))){parentNode.insertBefore(element,otherElement),inserted=!0;break}return inserted||parentNode.appendChild(element),this.added=!0,fireEvent(this,"add"),this},safeRemoveChild:function(element){var parentNode=element.parentNode;parentNode&&parentNode.removeChild(element)},destroy:function(){var grandParent,key,i,wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,parentToClean=wrapper.renderer.isSVG&&"SPAN"===element.nodeName&&wrapper.parentGroup;if(element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=element.point=null,stop(wrapper),wrapper.clipPath&&(wrapper.clipPath=wrapper.clipPath.destroy()),wrapper.stops){for(i=0;i<wrapper.stops.length;i++)wrapper.stops[i]=wrapper.stops[i].destroy();wrapper.stops=null}for(wrapper.safeRemoveChild(element),shadows&&each(shadows,function(shadow){wrapper.safeRemoveChild(shadow)});parentToClean&&0===parentToClean.div.childNodes.length;)grandParent=parentToClean.parentGroup,wrapper.safeRemoveChild(parentToClean.div),delete parentToClean.div,parentToClean=grandParent;wrapper.alignTo&&erase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper)delete wrapper[key];return null},shadow:function(shadowOptions,group,cutOff){var i,shadow,strokeWidth,shadowWidth,shadowElementOpacity,transform,shadows=[],element=this.element;if(shadowOptions){for(shadowWidth=pick(shadowOptions.width,3),shadowElementOpacity=(shadowOptions.opacity||.15)/shadowWidth,transform=this.parentInverted?"(-1,-1)":"("+pick(shadowOptions.offsetX,1)+", "+pick(shadowOptions.offsetY,1)+")",i=1;shadowWidth>=i;i++)shadow=element.cloneNode(0),strokeWidth=2*shadowWidth+1-2*i,attr(shadow,{isShadow:"true",stroke:shadowOptions.color||"black","stroke-opacity":shadowElementOpacity*i,"stroke-width":strokeWidth,transform:"translate"+transform,fill:NONE}),cutOff&&(attr(shadow,"height",mathMax(attr(shadow,"height")-strokeWidth,0)),shadow.cutHeight=strokeWidth),group?group.element.appendChild(shadow):element.parentNode.insertBefore(shadow,element),shadows.push(shadow);this.shadows=shadows}return this}};var SVGRenderer=function(){this.init.apply(this,arguments)};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,forExport){var boxWrapper,element,desc,renderer=this,loc=location;boxWrapper=renderer.createElement("svg").attr({version:"1.1"}),element=boxWrapper.element,container.appendChild(element),-1===container.innerHTML.indexOf("xmlns")&&attr(element,"xmlns",SVG_NS),renderer.isSVG=!0,renderer.box=element,renderer.boxWrapper=boxWrapper,renderer.alignedObjects=[],renderer.url=(isFirefox||isWebKit)&&doc.getElementsByTagName("base").length?loc.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",desc=this.createElement("desc").add(),desc.element.appendChild(doc.createTextNode("Created with "+PRODUCT+" "+VERSION)),renderer.defs=this.createElement("defs").add(),renderer.forExport=forExport,renderer.gradients={},renderer.cache={},renderer.setSize(width,height,!1);var subPixelFix,rect;isFirefox&&container.getBoundingClientRect&&(renderer.subPixelFix=subPixelFix=function(){css(container,{left:0,top:0}),rect=container.getBoundingClientRect(),css(container,{left:mathCeil(rect.left)-rect.left+PX,top:mathCeil(rect.top)-rect.top+PX})},subPixelFix(),addEvent(win,"resize",subPixelFix))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var renderer=this,rendererDefs=renderer.defs;return renderer.box=null,renderer.boxWrapper=renderer.boxWrapper.destroy(),destroyObjectProperties(renderer.gradients||{}),renderer.gradients=null,rendererDefs&&(renderer.defs=rendererDefs.destroy()),renderer.subPixelFix&&removeEvent(win,"resize",renderer.subPixelFix),renderer.alignedObjects=null,null},createElement:function(nodeName){var wrapper=new this.Element;return wrapper.init(this,nodeName),wrapper},draw:function(){},buildText:function(wrapper){for(var textNode=wrapper.element,renderer=this,forExport=renderer.forExport,lines=pick(wrapper.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),childNodes=textNode.childNodes,styleRegex=/style="([^"]+)"/,hrefRegex=/href="(http[^"]+)"/,parentX=attr(textNode,"x"),textStyles=wrapper.styles,width=wrapper.textWidth,textLineHeight=textStyles&&textStyles.lineHeight,i=childNodes.length,getLineHeight=function(tspan){return textLineHeight?pInt(textLineHeight):renderer.fontMetrics(/px$/.test(tspan&&tspan.style.fontSize)?tspan.style.fontSize:textStyles.fontSize||11).h};i--;)textNode.removeChild(childNodes[i]);width&&!wrapper.added&&this.box.appendChild(textNode),""===lines[lines.length-1]&&lines.pop(),each(lines,function(line,lineNo){var spans,spanNo=0;line=line.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),spans=line.split("|||"),each(spans,function(span){if(""!==span||1===spans.length){var spanStyle,attributes={},tspan=doc.createElementNS(SVG_NS,"tspan");if(styleRegex.test(span)&&(spanStyle=span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),attr(tspan,"style",spanStyle)),hrefRegex.test(span)&&!forExport&&(attr(tspan,"onclick",'location.href="'+span.match(hrefRegex)[1]+'"'),css(tspan,{cursor:"pointer"})),span=(span.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==span&&(tspan.appendChild(doc.createTextNode(span)),spanNo?attributes.dx=0:attributes.x=parentX,attr(tspan,attributes),!spanNo&&lineNo&&(!hasSVG&&forExport&&css(tspan,{display:"block"}),attr(tspan,"dy",getLineHeight(tspan),isWebKit&&tspan.offsetHeight)),textNode.appendChild(tspan),spanNo++,width))for(var tooLong,actualWidth,bBox,words=span.replace(/([^\^])-/g,"$1- ").split(" "),hasWhiteSpace=words.length>1&&"nowrap"!==textStyles.whiteSpace,clipHeight=wrapper._clipHeight,rest=[],dy=getLineHeight(),softLineNo=1;hasWhiteSpace&&(words.length||rest.length);)delete wrapper.bBox,bBox=wrapper.getBBox(),actualWidth=bBox.width,!hasSVG&&renderer.forExport&&(actualWidth=renderer.measureSpanWidth(tspan.firstChild.data,wrapper.styles)),tooLong=actualWidth>width,tooLong&&1!==words.length?(tspan.removeChild(tspan.firstChild),rest.unshift(words.pop())):(words=rest,rest=[],words.length&&(softLineNo++,clipHeight&&softLineNo*dy>clipHeight?(words=["..."],wrapper.attr("title",wrapper.textStr)):(tspan=doc.createElementNS(SVG_NS,"tspan"),attr(tspan,{dy:dy,x:parentX}),spanStyle&&attr(tspan,"style",spanStyle),textNode.appendChild(tspan),actualWidth>width&&(width=actualWidth)))),words.length&&tspan.appendChild(doc.createTextNode(words.join(" ").replace(/- /g,"-")))}})})},button:function(text,x,y,callback,normalState,hoverState,pressedState,disabledState,shape){var stateOptions,stateStyle,normalStyle,hoverStyle,pressedStyle,disabledStyle,label=this.label(text,x,y,shape,null,null,null,null,"button"),curState=0,STYLE="style",verticalGradient={x1:0,y1:0,x2:0,y2:1};return normalState=merge({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:verticalGradient,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},normalState),normalStyle=normalState[STYLE],delete normalState[STYLE],hoverState=merge(normalState,{stroke:"#68A",fill:{linearGradient:verticalGradient,stops:[[0,"#FFF"],[1,"#ACF"]]}},hoverState),hoverStyle=hoverState[STYLE],delete hoverState[STYLE],pressedState=merge(normalState,{stroke:"#68A",fill:{linearGradient:verticalGradient,stops:[[0,"#9BD"],[1,"#CDF"]]}},pressedState),pressedStyle=pressedState[STYLE],delete pressedState[STYLE],disabledState=merge(normalState,{style:{color:"#CCC"}},disabledState),disabledStyle=disabledState[STYLE],delete disabledState[STYLE],addEvent(label.element,isIE?"mouseover":"mouseenter",function(){3!==curState&&label.attr(hoverState).css(hoverStyle)}),addEvent(label.element,isIE?"mouseout":"mouseleave",function(){3!==curState&&(stateOptions=[normalState,hoverState,pressedState][curState],stateStyle=[normalStyle,hoverStyle,pressedStyle][curState],label.attr(stateOptions).css(stateStyle))}),label.setState=function(state){label.state=curState=state,state?2===state?label.attr(pressedState).css(pressedStyle):3===state&&label.attr(disabledState).css(disabledStyle):label.attr(normalState).css(normalStyle)},label.on("click",function(){3!==curState&&callback.call(label)}).attr(normalState).css(extend({cursor:"default"},normalStyle))},crispLine:function(points,width){return points[1]===points[4]&&(points[1]=points[4]=mathRound(points[1])-width%2/2),points[2]===points[5]&&(points[2]=points[5]=mathRound(points[2])+width%2/2),points},path:function(path){var attr={fill:NONE};return isArray(path)?attr.d=path:isObject(path)&&extend(attr,path),this.createElement("path").attr(attr)},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r};return this.createElement("circle").attr(attr)},arc:function(x,y,r,innerR,start,end){var arc;return isObject(x)&&(y=x.y,r=x.r,innerR=x.innerR,start=x.start,end=x.end,x=x.x),arc=this.symbol("arc",x||0,y||0,r||0,r||0,{innerR:innerR||0,start:start||0,end:end||0}),arc.r=r,arc},rect:function(x,y,width,height,r,strokeWidth){r=isObject(x)?x.r:r;var wrapper=this.createElement("rect").attr({rx:r,ry:r,fill:NONE});return wrapper.attr(isObject(x)?x:wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)))},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;for(renderer.width=width,renderer.height=height,renderer.boxWrapper[pick(animate,!0)?"animate":"attr"]({width:width,height:height});i--;)alignedObjects[i].align()},g:function(name){var elem=this.createElement("g");return defined(name)?elem.attr({"class":PREFIX+name}):elem},image:function(src,x,y,width,height){var elemWrapper,attribs={preserveAspectRatio:NONE};return arguments.length>1&&extend(attribs,{x:x,y:y,width:width,height:height}),elemWrapper=this.createElement("image").attr(attribs),elemWrapper.element.setAttributeNS?elemWrapper.element.setAttributeNS("http://www.w3.org/1999/xlink","href",src):elemWrapper.element.setAttribute("hc-svg-href",src),elemWrapper},symbol:function(symbol,x,y,width,height,options){var obj,imageElement,imageSrc,imageSize,centerImage,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),width,height,options),imageRegex=/^url\((.*?)\)$/;return path?(obj=this.path(path),extend(obj,{symbolName:symbol,x:x,y:y,width:width,height:height}),options&&extend(obj,options)):imageRegex.test(symbol)&&(centerImage=function(img,size){img.element&&(img.attr({width:size[0],height:size[1]}),img.alignByTranslate||img.translate(mathRound((width-size[0])/2),mathRound((height-size[1])/2)))},imageSrc=symbol.match(imageRegex)[1],imageSize=symbolSizes[imageSrc],obj=this.image(imageSrc).attr({x:x,y:y}),obj.isImg=!0,imageSize?centerImage(obj,imageSize):(obj.attr({width:0,height:0}),imageElement=createElement("img",{onload:function(){centerImage(obj,symbolSizes[imageSrc]=[this.width,this.height])},src:imageSrc}))),obj},symbols:{circle:function(x,y,w,h){var cpw=.166*w;return[M,x+w/2,y,"C",x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,"C",x-cpw,y+h,x-cpw,y,x+w/2,y,"Z"]},square:function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,"Z"]},triangle:function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h,x,y+h,"Z"]},"triangle-down":function(x,y,w,h){return[M,x,y,L,x+w,y,x+w/2,y+h,"Z"]},diamond:function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h/2,x+w/2,y+h,x,y+h/2,"Z"]},arc:function(x,y,w,h,options){var start=options.start,radius=options.r||w||h,end=options.end-.001,innerRadius=options.innerR,open=options.open,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,"A",radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,open?M:L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,"A",innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,open?"":"Z"]}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement("clipPath").attr({id:id}).add(this.defs);return wrapper=this.rect(x,y,width,height,0).add(clipPath),wrapper.id=id,wrapper.clipPath=clipPath,wrapper},color:function(color,elem,prop){var colorObject,gradName,gradAttr,gradients,gradientObject,stops,stopColor,stopOpacity,radialReference,n,id,renderer=this,regexRgba=/^rgba/,key=[];if(color&&color.linearGradient?gradName="linearGradient":color&&color.radialGradient&&(gradName="radialGradient"),gradName){gradAttr=color[gradName],gradients=renderer.gradients,stops=color.stops,radialReference=elem.radialReference,isArray(gradAttr)&&(color[gradName]=gradAttr={x1:gradAttr[0],y1:gradAttr[1],x2:gradAttr[2],y2:gradAttr[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===gradName&&radialReference&&!defined(gradAttr.gradientUnits)&&(gradAttr=merge(gradAttr,{cx:radialReference[0]-radialReference[2]/2+gradAttr.cx*radialReference[2],cy:radialReference[1]-radialReference[2]/2+gradAttr.cy*radialReference[2],r:gradAttr.r*radialReference[2],gradientUnits:"userSpaceOnUse"}));for(n in gradAttr)"id"!==n&&key.push(n,gradAttr[n]);for(n in stops)key.push(stops[n]);return key=key.join(","),gradients[key]?id=gradients[key].id:(gradAttr.id=id=PREFIX+idCounter++,gradients[key]=gradientObject=renderer.createElement(gradName).attr(gradAttr).add(renderer.defs),gradientObject.stops=[],each(stops,function(stop){var stopObject;regexRgba.test(stop[1])?(colorObject=Color(stop[1]),stopColor=colorObject.get("rgb"),stopOpacity=colorObject.get("a")):(stopColor=stop[1],stopOpacity=1),stopObject=renderer.createElement("stop").attr({offset:stop[0],"stop-color":stopColor,"stop-opacity":stopOpacity}).add(gradientObject),gradientObject.stops.push(stopObject)})),"url("+renderer.url+"#"+id+")"}return regexRgba.test(color)?(colorObject=Color(color),attr(elem,prop+"-opacity",colorObject.get("a")),colorObject.get("rgb")):(elem.removeAttribute(prop+"-opacity"),color)},text:function(str,x,y,useHTML){var wrapper,renderer=this,defaultChartStyle=defaultOptions.chart.style,fakeSVG=useCanVG||!hasSVG&&renderer.forExport;return useHTML&&!renderer.forExport?renderer.html(str,x,y):(x=mathRound(pick(x,0)),y=mathRound(pick(y,0)),wrapper=renderer.createElement("text").attr({x:x,y:y,text:str}).css({fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize}),fakeSVG&&wrapper.css({position:ABSOLUTE}),wrapper.x=x,wrapper.y=y,wrapper)},fontMetrics:function(fontSize){fontSize=pInt(fontSize||11);var lineHeight=24>fontSize?fontSize+4:mathRound(1.2*fontSize),baseline=mathRound(.8*lineHeight);return{h:lineHeight,b:baseline}},label:function(str,x,y,shape,anchorX,anchorY,useHTML,baseline,className){function updateBoxSize(){var boxX,boxY,style=text.element.style;bBox=(void 0===width||void 0===height||wrapper.styles.textAlign)&&text.getBBox(),wrapper.width=(width||bBox.width||0)+2*padding+paddingLeft,wrapper.height=(height||bBox.height||0)+2*padding,baselineOffset=padding+renderer.fontMetrics(style&&style.fontSize).b,needsBox&&(box||(boxX=mathRound(-alignFactor*padding),boxY=baseline?-baselineOffset:0,wrapper.box=box=shape?renderer.symbol(shape,boxX,boxY,wrapper.width,wrapper.height,deferredAttr):renderer.rect(boxX,boxY,wrapper.width,wrapper.height,0,deferredAttr[STROKE_WIDTH]),box.add(wrapper)),box.isImg||box.attr(merge({width:wrapper.width,height:wrapper.height},deferredAttr)),deferredAttr=null)}function updateTextPadding(){var y,styles=wrapper.styles,textAlign=styles&&styles.textAlign,x=paddingLeft+padding*(1-alignFactor);y=baseline?0:baselineOffset,!defined(width)||"center"!==textAlign&&"right"!==textAlign||(x+={center:.5,right:1}[textAlign]*(width-bBox.width)),(x!==text.x||y!==text.y)&&text.attr({x:x,y:y}),text.x=x,text.y=y}function boxAttr(key,value){box?box.attr(key,value):deferredAttr[key]=value}function getSizeAfterAdd(){text.add(wrapper),wrapper.attr({text:str,x:x,y:y}),box&&defined(anchorX)&&wrapper.attr({anchorX:anchorX,anchorY:anchorY})}var box,bBox,width,height,wrapperX,wrapperY,baselineOffset,needsBox,renderer=this,wrapper=renderer.g(className),text=renderer.text("",0,0,useHTML).attr({zIndex:1}),alignFactor=0,padding=3,paddingLeft=0,crispAdjust=0,deferredAttr={},attrSetters=wrapper.attrSetters;addEvent(wrapper,"add",getSizeAfterAdd),attrSetters.width=function(value){return width=value,!1},attrSetters.height=function(value){return height=value,!1},attrSetters.padding=function(value){return defined(value)&&value!==padding&&(padding=value,updateTextPadding()),!1},attrSetters.paddingLeft=function(value){return defined(value)&&value!==paddingLeft&&(paddingLeft=value,updateTextPadding()),!1},attrSetters.align=function(value){return alignFactor={left:0,center:.5,right:1}[value],!1},attrSetters.text=function(value,key){return text.attr(key,value),updateBoxSize(),updateTextPadding(),!1},attrSetters[STROKE_WIDTH]=function(value,key){return needsBox=!0,crispAdjust=value%2/2,boxAttr(key,value),!1},attrSetters.stroke=attrSetters.fill=attrSetters.r=function(value,key){return"fill"===key&&(needsBox=!0),boxAttr(key,value),!1},attrSetters.anchorX=function(value,key){return anchorX=value,boxAttr(key,value+crispAdjust-wrapperX),!1},attrSetters.anchorY=function(value,key){return anchorY=value,boxAttr(key,value-wrapperY),!1},attrSetters.x=function(value){return wrapper.x=value,value-=alignFactor*((width||bBox.width)+padding),wrapperX=mathRound(value),wrapper.attr("translateX",wrapperX),!1},attrSetters.y=function(value){return wrapperY=wrapper.y=mathRound(value),wrapper.attr("translateY",wrapperY),!1};var baseCss=wrapper.css;return extend(wrapper,{css:function(styles){if(styles){var textStyles={};styles=merge(styles),each(["fontSize","fontWeight","fontFamily","color","lineHeight","width","textDecoration","textShadow"],function(prop){styles[prop]!==UNDEFINED&&(textStyles[prop]=styles[prop],delete styles[prop])}),text.css(textStyles)}return baseCss.call(wrapper,styles)},getBBox:function(){return{width:bBox.width+2*padding,height:bBox.height+2*padding,x:bBox.x-padding,y:bBox.y-padding}},shadow:function(b){return box&&box.shadow(b),wrapper},destroy:function(){removeEvent(wrapper,"add",getSizeAfterAdd),removeEvent(wrapper.element,"mouseenter"),removeEvent(wrapper.element,"mouseleave"),text&&(text=text.destroy()),box&&(box=box.destroy()),SVGElement.prototype.destroy.call(wrapper),wrapper=renderer=updateBoxSize=updateTextPadding=boxAttr=getSizeAfterAdd=null}})}},Renderer=SVGRenderer,extend(SVGElement.prototype,{htmlCss:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&"SPAN"===element.tagName&&styles.width;return textWidth&&(delete styles.width,wrapper.textWidth=textWidth,wrapper.updateTransform()),wrapper.styles=extend(wrapper.styles,styles),css(wrapper.element,styles),wrapper},htmlGetBBox:function(){var wrapper=this,element=wrapper.element,bBox=wrapper.bBox;return bBox||("text"===element.nodeName&&(element.style.position=ABSOLUTE),bBox=wrapper.bBox={x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight}),bBox},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var wrapper=this,renderer=wrapper.renderer,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||"left",alignCorrection={left:0,center:.5,right:1}[align],shadows=wrapper.shadows;if(css(elem,{marginLeft:translateX,marginTop:translateY}),shadows&&each(shadows,function(shadow){css(shadow,{marginLeft:translateX+1,marginTop:translateY+1})}),wrapper.inverted&&each(elem.childNodes,function(child){renderer.invertChild(child,elem)}),"SPAN"===elem.tagName){var width,baseline,rotation=wrapper.rotation,textWidth=pInt(wrapper.textWidth),currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(",");currentTextTransform!==wrapper.cTT&&(baseline=renderer.fontMetrics(elem.style.fontSize).b,defined(rotation)&&wrapper.setSpanRotation(rotation,alignCorrection,baseline),width=pick(wrapper.elemWidth,elem.offsetWidth),width>textWidth&&/[ \-]/.test(elem.textContent||elem.innerText)&&(css(elem,{width:textWidth+PX,display:"block",whiteSpace:"normal"}),width=textWidth),wrapper.getSpanCorrection(width,baseline,alignCorrection,rotation,align)),css(elem,{left:x+(wrapper.xCorr||0)+PX,top:y+(wrapper.yCorr||0)+PX}),isWebKit&&(baseline=elem.offsetHeight),wrapper.cTT=currentTextTransform}},setSpanRotation:function(rotation,alignCorrection,baseline){var rotationStyle={},cssTransformKey=isIE?"-ms-transform":isWebKit?"-webkit-transform":isFirefox?"MozTransform":isOpera?"-o-transform":"";rotationStyle[cssTransformKey]=rotationStyle.transform="rotate("+rotation+"deg)",rotationStyle[cssTransformKey+(isFirefox?"Origin":"-origin")]=100*alignCorrection+"% "+baseline+"px",css(this.element,rotationStyle)},getSpanCorrection:function(width,baseline,alignCorrection){this.xCorr=-width*alignCorrection,this.yCorr=-baseline}}),extend(SVGRenderer.prototype,{html:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style,wrapper=this.createElement("span"),attrSetters=wrapper.attrSetters,element=wrapper.element,renderer=wrapper.renderer;return attrSetters.text=function(value){return value!==element.innerHTML&&delete this.bBox,element.innerHTML=value,!1},attrSetters.x=attrSetters.y=attrSetters.align=attrSetters.rotation=function(value,key){return"align"===key&&(key="textAlign"),wrapper[key]=value,wrapper.htmlUpdateTransform(),!1},wrapper.attr({text:str,x:mathRound(x),y:mathRound(y)}).css({position:ABSOLUTE,whiteSpace:"nowrap",fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize}),wrapper.css=wrapper.htmlCss,renderer.isSVG&&(wrapper.add=function(svgGroupWrapper){var htmlGroup,parentGroup,container=renderer.box.parentNode,parents=[];if(this.parentGroup=svgGroupWrapper,svgGroupWrapper){if(htmlGroup=svgGroupWrapper.div,!htmlGroup){for(parentGroup=svgGroupWrapper;parentGroup;)parents.push(parentGroup),parentGroup=parentGroup.parentGroup;each(parents.reverse(),function(parentGroup){var htmlGroupStyle;htmlGroup=parentGroup.div=parentGroup.div||createElement(DIV,{className:attr(parentGroup.element,"class")},{position:ABSOLUTE,left:(parentGroup.translateX||0)+PX,top:(parentGroup.translateY||0)+PX},htmlGroup||container),htmlGroupStyle=htmlGroup.style,extend(parentGroup.attrSetters,{translateX:function(value){htmlGroupStyle.left=value+PX},translateY:function(value){htmlGroupStyle.top=value+PX},visibility:function(value,key){htmlGroupStyle[key]=value}})})}}else htmlGroup=container;return htmlGroup.appendChild(element),wrapper.added=!0,wrapper.alignOnAdd&&wrapper.htmlUpdateTransform(),wrapper}),wrapper}});var VMLRenderer,VMLElement;if(!hasSVG&&!useCanVG){Highcharts.VMLElement=VMLElement={init:function(renderer,nodeName){var wrapper=this,markup=["<",nodeName,' filled="f" stroked="f"'],style=["position: ",ABSOLUTE,";"],isDiv=nodeName===DIV;("shape"===nodeName||isDiv)&&style.push("left:0;top:0;width:1px;height:1px;"),style.push("visibility: ",isDiv?HIDDEN:VISIBLE),markup.push(' style="',style.join(""),'"/>'),nodeName&&(markup=isDiv||"span"===nodeName||"img"===nodeName?markup.join(""):renderer.prepVML(markup),wrapper.element=createElement(markup)),wrapper.renderer=renderer,wrapper.attrSetters={}},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;return inverted&&renderer.invertChild(element,parentNode),parentNode.appendChild(element),wrapper.added=!0,wrapper.alignOnAdd&&!wrapper.deferUpdateTransform&&wrapper.updateTransform(),fireEvent(wrapper,"add"),wrapper},updateTransform:SVGElement.prototype.htmlUpdateTransform,setSpanRotation:function(){var rotation=this.rotation,costheta=mathCos(rotation*deg2rad),sintheta=mathSin(rotation*deg2rad);css(this.element,{filter:rotation?["progid:DXImageTransform.Microsoft.Matrix(M11=",costheta,", M12=",-sintheta,", M21=",sintheta,", M22=",costheta,", sizingMethod='auto expand')"].join(""):NONE})},getSpanCorrection:function(width,baseline,alignCorrection,rotation,align){var quad,costheta=rotation?mathCos(rotation*deg2rad):1,sintheta=rotation?mathSin(rotation*deg2rad):0,height=pick(this.elemHeight,this.element.offsetHeight),nonLeft=align&&"left"!==align;this.xCorr=0>costheta&&-width,this.yCorr=0>sintheta&&-height,quad=0>costheta*sintheta,this.xCorr+=sintheta*baseline*(quad?1-alignCorrection:alignCorrection),this.yCorr-=costheta*baseline*(rotation?quad?alignCorrection:1-alignCorrection:1),nonLeft&&(this.xCorr-=width*alignCorrection*(0>costheta?-1:1),rotation&&(this.yCorr-=height*alignCorrection*(0>sintheta?-1:1)),css(this.element,{textAlign:align}))
},pathToVML:function(value){for(var i=value.length,path=[];i--;)isNumber(value[i])?path[i]=mathRound(10*value[i])-5:"Z"===value[i]?path[i]="x":(path[i]=value[i],!value.isArc||"wa"!==value[i]&&"at"!==value[i]||(path[i+5]===path[i+7]&&(path[i+7]+=value[i+7]>value[i+5]?1:-1),path[i+6]===path[i+8]&&(path[i+8]+=value[i+8]>value[i+6]?1:-1)));return path.join(" ")||"x"},attr:function(hash,val){var key,value,i,result,hasSetSymbolSize,skipAttr,wrapper=this,element=wrapper.element||{},elemStyle=element.style,nodeName=element.nodeName,renderer=wrapper.renderer,symbolName=wrapper.symbolName,shadows=wrapper.shadows,attrSetters=wrapper.attrSetters,ret=wrapper;if(isString(hash)&&defined(val)&&(key=hash,hash={},hash[key]=val),isString(hash))key=hash,ret="strokeWidth"===key||"stroke-width"===key?wrapper.strokeweight:wrapper[key];else for(key in hash)if(value=hash[key],skipAttr=!1,result=attrSetters[key]&&attrSetters[key].call(wrapper,value,key),result!==!1&&null!==value){if(result!==UNDEFINED&&(value=result),symbolName&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(key))hasSetSymbolSize||(wrapper.symbolAttr(hash),hasSetSymbolSize=!0),skipAttr=!0;else if("d"===key){if(value=value||[],wrapper.d=value.join(" "),element.path=value=wrapper.pathToVML(value),shadows)for(i=shadows.length;i--;)shadows[i].path=shadows[i].cutOff?this.cutOffPath(value,shadows[i].cutOff):value;skipAttr=!0}else if("visibility"===key){if(shadows)for(i=shadows.length;i--;)shadows[i].style[key]=value;"DIV"===nodeName&&(value=value===HIDDEN?"-999em":0,docMode8||(elemStyle[key]=value?VISIBLE:HIDDEN),key="top"),elemStyle[key]=value,skipAttr=!0}else if("zIndex"===key)value&&(elemStyle[key]=value),skipAttr=!0;else if(-1!==inArray(key,["x","y","width","height"]))wrapper[key]=value,"x"===key||"y"===key?key={x:"left",y:"top"}[key]:value=mathMax(0,value),wrapper.updateClipping?(wrapper[key]=value,wrapper.updateClipping()):elemStyle[key]=value,skipAttr=!0;else if("class"===key&&"DIV"===nodeName)element.className=value;else if("stroke"===key)value=renderer.color(value,element,key),key="strokecolor";else if("stroke-width"===key||"strokeWidth"===key)element.stroked=value?!0:!1,key="strokeweight",wrapper[key]=value,isNumber(value)&&(value+=PX);else if("dashstyle"===key){var strokeElem=element.getElementsByTagName("stroke")[0]||createElement(renderer.prepVML(["<stroke/>"]),null,null,element);strokeElem[key]=value||"solid",wrapper.dashstyle=value,skipAttr=!0}else"fill"===key?"SPAN"===nodeName?elemStyle.color=value:"IMG"!==nodeName&&(element.filled=value!==NONE?!0:!1,value=renderer.color(value,element,key,wrapper),key="fillcolor"):"opacity"===key?skipAttr=!0:"shape"===nodeName&&"rotation"===key?(wrapper[key]=element.style[key]=value,element.style.left=-mathRound(mathSin(value*deg2rad)+1)+PX,element.style.top=mathRound(mathCos(value*deg2rad))+PX):("translateX"===key||"translateY"===key||"rotation"===key)&&(wrapper[key]=value,wrapper.updateTransform(),skipAttr=!0);skipAttr||(docMode8?element[key]=value:attr(element,key,value))}return ret},clip:function(clipRect){var clipMembers,cssRet,wrapper=this;return clipRect?(clipMembers=clipRect.members,erase(clipMembers,wrapper),clipMembers.push(wrapper),wrapper.destroyClip=function(){erase(clipMembers,wrapper)},cssRet=clipRect.getCSS(wrapper)):(wrapper.destroyClip&&wrapper.destroyClip(),cssRet={clip:docMode8?"inherit":"rect(auto)"}),wrapper.css(cssRet)},css:SVGElement.prototype.htmlCss,safeRemoveChild:function(element){element.parentNode&&discardElement(element)},destroy:function(){return this.destroyClip&&this.destroyClip(),SVGElement.prototype.destroy.apply(this)},on:function(eventType,handler){return this.element["on"+eventType]=function(){var evt=win.event;evt.target=evt.srcElement,handler(evt)},this},cutOffPath:function(path,length){var len;return path=path.split(/[ ,]/),len=path.length,(9===len||11===len)&&(path[len-4]=path[len-2]=pInt(path[len-2])-10*length),path.join(" ")},shadow:function(shadowOptions,group,cutOff){var i,shadow,markup,strokeWidth,modifiedPath,shadowWidth,shadowElementOpacity,shadows=[],element=this.element,renderer=this.renderer,elemStyle=element.style,path=element.path;if(path&&"string"!=typeof path.value&&(path="x"),modifiedPath=path,shadowOptions){for(shadowWidth=pick(shadowOptions.width,3),shadowElementOpacity=(shadowOptions.opacity||.15)/shadowWidth,i=1;3>=i;i++)strokeWidth=2*shadowWidth+1-2*i,cutOff&&(modifiedPath=this.cutOffPath(path.value,strokeWidth+.5)),markup=['<shape isShadow="true" strokeweight="',strokeWidth,'" filled="false" path="',modifiedPath,'" coordsize="10 10" style="',element.style.cssText,'" />'],shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+pick(shadowOptions.offsetX,1),top:pInt(elemStyle.top)+pick(shadowOptions.offsetY,1)}),cutOff&&(shadow.cutOff=strokeWidth+1),markup=['<stroke color="',shadowOptions.color||"black",'" opacity="',shadowElementOpacity*i,'"/>'],createElement(renderer.prepVML(markup),null,null,shadow),group?group.element.appendChild(shadow):element.parentNode.insertBefore(shadow,element),shadows.push(shadow);this.shadows=shadows}return this}},VMLElement=extendClass(SVGElement,VMLElement);var VMLRendererExtension={Element:VMLElement,isIE8:userAgent.indexOf("MSIE 8.0")>-1,init:function(container,width,height){var boxWrapper,box,css,renderer=this;if(renderer.alignedObjects=[],boxWrapper=renderer.createElement(DIV),box=boxWrapper.element,box.style.position=RELATIVE,container.appendChild(boxWrapper.element),renderer.isVML=!0,renderer.box=box,renderer.boxWrapper=boxWrapper,renderer.cache={},renderer.setSize(width,height,!1),!doc.namespaces.hcv){doc.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),css="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{doc.createStyleSheet().cssText=css}catch(e){doc.styleSheets[0].cssText+=css}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(x,y,width,height){var clipRect=this.createElement(),isObj=isObject(x);return extend(clipRect,{members:[],left:(isObj?x.x:x)+1,top:(isObj?x.y:y)+1,width:(isObj?x.width:width)-1,height:(isObj?x.height:height)-1,getCSS:function(wrapper){var element=wrapper.element,nodeName=element.nodeName,isShape="shape"===nodeName,inverted=wrapper.inverted,rect=this,top=rect.top-(isShape?element.offsetTop:0),left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:"rect("+mathRound(inverted?left:top)+"px,"+mathRound(inverted?bottom:right)+"px,"+mathRound(inverted?right:bottom)+"px,"+mathRound(inverted?top:left)+"px)"};return!inverted&&docMode8&&"DIV"===nodeName&&extend(ret,{width:right+PX,height:bottom+PX}),ret},updateClipping:function(){each(clipRect.members,function(member){member.css(clipRect.getCSS(member))})}})},color:function(color,elem,prop,wrapper){var colorObject,markup,fillType,renderer=this,regexRgba=/^rgba/,ret=NONE;if(color&&color.linearGradient?fillType="gradient":color&&color.radialGradient&&(fillType="pattern"),fillType){var stopColor,stopOpacity,x1,y1,x2,y2,opacity1,opacity2,color1,color2,firstStop,lastStop,gradient=color.linearGradient||color.radialGradient,fillAttr="",stops=color.stops,colors=[],addFillNode=function(){markup=['<fill colors="'+colors.join(",")+'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="',fillType,'" ',fillAttr,'focus="100%" method="any" />'],createElement(renderer.prepVML(markup),null,null,elem)};if(firstStop=stops[0],lastStop=stops[stops.length-1],firstStop[0]>0&&stops.unshift([0,firstStop[1]]),lastStop[0]<1&&stops.push([1,lastStop[1]]),each(stops,function(stop,i){regexRgba.test(stop[1])?(colorObject=Color(stop[1]),stopColor=colorObject.get("rgb"),stopOpacity=colorObject.get("a")):(stopColor=stop[1],stopOpacity=1),colors.push(100*stop[0]+"% "+stopColor),i?(opacity2=stopOpacity,color1=stopColor):(opacity1=stopOpacity,color2=stopColor)}),"fill"===prop)if("gradient"===fillType)x1=gradient.x1||gradient[0]||0,y1=gradient.y1||gradient[1]||0,x2=gradient.x2||gradient[2]||0,y2=gradient.y2||gradient[3]||0,fillAttr='angle="'+(90-180*math.atan((y2-y1)/(x2-x1))/mathPI)+'"',addFillNode();else{var bBox,r=gradient.r,sizex=2*r,sizey=2*r,cx=gradient.cx,cy=gradient.cy,radialReference=elem.radialReference,applyRadialGradient=function(){radialReference&&(bBox=wrapper.getBBox(),cx+=(radialReference[0]-bBox.x)/bBox.width-.5,cy+=(radialReference[1]-bBox.y)/bBox.height-.5,sizex*=radialReference[2]/bBox.width,sizey*=radialReference[2]/bBox.height),fillAttr='src="'+defaultOptions.global.VMLRadialGradientURL+'" size="'+sizex+","+sizey+'" origin="0.5,0.5" position="'+cx+","+cy+'" color2="'+color2+'" ',addFillNode()};wrapper.added?applyRadialGradient():addEvent(wrapper,"add",applyRadialGradient),ret=color1}else ret=stopColor}else if(regexRgba.test(color)&&"IMG"!==elem.tagName)colorObject=Color(color),markup=["<",prop,' opacity="',colorObject.get("a"),'"/>'],createElement(this.prepVML(markup),null,null,elem),ret=colorObject.get("rgb");else{var propNodes=elem.getElementsByTagName(prop);propNodes.length&&(propNodes[0].opacity=1,propNodes[0].type="solid"),ret=color}return ret},prepVML:function(markup){var vmlStyle="display:inline-block;behavior:url(#default#VML);",isIE8=this.isIE8;return markup=markup.join(""),isIE8?(markup=markup.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),markup=-1===markup.indexOf('style="')?markup.replace("/>",' style="'+vmlStyle+'" />'):markup.replace('style="','style="'+vmlStyle)):markup=markup.replace("<","<hcv:"),markup},text:SVGRenderer.prototype.html,path:function(path){var attr={coordsize:"10 10"};return isArray(path)?attr.d=path:isObject(path)&&extend(attr,path),this.createElement("shape").attr(attr)},circle:function(x,y,r){var circle=this.symbol("circle");return isObject(x)&&(r=x.r,y=x.y,x=x.x),circle.isCircle=!0,circle.r=r,circle.attr({x:x,y:y})},g:function(name){var wrapper,attribs;return name&&(attribs={className:PREFIX+name,"class":PREFIX+name}),wrapper=this.createElement(DIV).attr(attribs)},image:function(src,x,y,width,height){var obj=this.createElement("img").attr({src:src});return arguments.length>1&&obj.attr({x:x,y:y,width:width,height:height}),obj},rect:function(x,y,width,height,r,strokeWidth){var wrapper=this.symbol("rect");return wrapper.r=isObject(x)?x.r:r,wrapper.attr(isObject(x)?x:wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)))},invertChild:function(element,parentNode){var parentStyle=parentNode.style;css(element,{flip:"x",left:pInt(parentStyle.width)-1,top:pInt(parentStyle.height)-1,rotation:-90})},symbols:{arc:function(x,y,w,h,options){var ret,start=options.start,end=options.end,radius=options.r||w||h,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end);return end-start===0?["x"]:(ret=["wa",x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd],options.open&&!innerRadius&&ret.push("e",M,x,y),ret.push("at",x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,"x","e"),ret.isArc=!0,ret)},circle:function(x,y,w,h,wrapper){return wrapper&&(w=h=2*wrapper.r),wrapper&&wrapper.isCircle&&(x-=w/2,y-=h/2),["wa",x,y,x+w,y+h,x+w,y+h/2,x+w,y+h/2,"e"]},rect:function(left,top,width,height,options){var ret,r,right=left+width,bottom=top+height;return defined(options)&&options.r?(r=mathMin(options.r,width,height),ret=[M,left+r,top,L,right-r,top,"wa",right-2*r,top,right,top+2*r,right-r,top,right,top+r,L,right,bottom-r,"wa",right-2*r,bottom-2*r,right,bottom,right,bottom-r,right-r,bottom,L,left+r,bottom,"wa",left,bottom-2*r,left+2*r,bottom,left+r,bottom,left,bottom-r,L,left,top+r,"wa",left,top,left+2*r,top+2*r,left,top+r,left+r,top,"x","e"]):ret=SVGRenderer.prototype.symbols.square.apply(0,arguments),ret}}};Highcharts.VMLRenderer=VMLRenderer=function(){this.init.apply(this,arguments)},VMLRenderer.prototype=merge(SVGRenderer.prototype,VMLRendererExtension),Renderer=VMLRenderer}SVGRenderer.prototype.measureSpanWidth=function(text,styles){var offsetWidth,measuringSpan=doc.createElement("span"),textNode=doc.createTextNode(text);return measuringSpan.appendChild(textNode),css(measuringSpan,styles),this.box.appendChild(measuringSpan),offsetWidth=measuringSpan.offsetWidth,discardElement(measuringSpan),offsetWidth};var CanVGRenderer,CanVGController;useCanVG&&(Highcharts.CanVGRenderer=CanVGRenderer=function(){SVG_NS="http://www.w3.org/1999/xhtml"},CanVGRenderer.prototype.symbols={},CanVGController=function(){function drawDeferred(){var callIndex,callLength=deferredRenderCalls.length;for(callIndex=0;callLength>callIndex;callIndex++)deferredRenderCalls[callIndex]();deferredRenderCalls=[]}var deferredRenderCalls=[];return{push:function(func,scriptLocation){0===deferredRenderCalls.length&&getScript(scriptLocation,drawDeferred),deferredRenderCalls.push(func)}}}(),Renderer=CanVGRenderer),Tick.prototype={addLabel:function(){var str,css,attr,dateTimeLabelFormat,tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,horiz=axis.horiz,categories=axis.categories,names=axis.names,pos=tick.pos,labelOptions=options.labels,tickPositions=axis.tickPositions,width=horiz&&categories&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&chart.plotWidth/tickPositions.length||!horiz&&(chart.margin[3]||.33*chart.chartWidth),isFirst=pos===tickPositions[0],isLast=pos===tickPositions[tickPositions.length-1],value=categories?pick(categories[pos],names[pos],pos):pos,label=tick.label,tickPositionInfo=tickPositions.info;axis.isDatetimeAxis&&tickPositionInfo&&(dateTimeLabelFormat=options.dateTimeLabelFormats[tickPositionInfo.higherRanks[pos]||tickPositionInfo.unitName]),tick.isFirst=isFirst,tick.isLast=isLast,str=axis.labelFormatter.call({axis:axis,chart:chart,isFirst:isFirst,isLast:isLast,dateTimeLabelFormat:dateTimeLabelFormat,value:axis.isLog?correctFloat(lin2log(value)):value}),css=width&&{width:mathMax(1,mathRound(width-2*(labelOptions.padding||10)))+PX},css=extend(css,labelOptions.style),defined(label)?label&&label.attr({text:str}).css(css):(attr={align:axis.labelAlign},isNumber(labelOptions.rotation)&&(attr.rotation=labelOptions.rotation),width&&labelOptions.ellipsis&&(attr._clipHeight=axis.len/tickPositions.length),tick.label=defined(str)&&labelOptions.enabled?chart.renderer.text(str,0,0,labelOptions.useHTML).attr(attr).css(css).add(axis.labelGroup):null)},getLabelSize:function(){var label=this.label,axis=this.axis;return label?label.getBBox()[axis.horiz?"height":"width"]:0},getLabelSides:function(){var bBox=this.label.getBBox(),axis=this.axis,horiz=axis.horiz,options=axis.options,labelOptions=options.labels,size=horiz?bBox.width:bBox.height,leftSide=horiz?size*{left:0,center:.5,right:1}[axis.labelAlign]-labelOptions.x:size;return[-leftSide,size-leftSide]},handleOverflow:function(index,xy){var neighbour,neighbourEdge,show=!0,axis=this.axis,isFirst=this.isFirst,isLast=this.isLast,horiz=axis.horiz,pxPos=horiz?xy.x:xy.y,reversed=axis.reversed,tickPositions=axis.tickPositions,sides=this.getLabelSides(),leftSide=sides[0],rightSide=sides[1],axisLeft=axis.pos,axisRight=axisLeft+axis.len,line=this.label.line||0,labelEdge=axis.labelEdge,justifyLabel=axis.justifyLabels&&(isFirst||isLast);return labelEdge[line]===UNDEFINED||pxPos+leftSide>labelEdge[line]?labelEdge[line]=pxPos+rightSide:justifyLabel||(show=!1),justifyLabel&&(neighbour=axis.ticks[tickPositions[index+(isFirst?1:-1)]],neighbourEdge=neighbour&&neighbour.label.xy&&neighbour.label.xy.x+neighbour.getLabelSides()[isFirst?0:1],isFirst&&!reversed||isLast&&reversed?axisLeft>pxPos+leftSide&&(pxPos=axisLeft-leftSide,neighbour&&pxPos+rightSide>neighbourEdge&&(show=!1)):pxPos+rightSide>axisRight&&(pxPos=axisRight-rightSide,neighbour&&neighbourEdge>pxPos+leftSide&&(show=!1)),xy.x=pxPos),show},getPosition:function(horiz,pos,tickmarkOffset,old){var axis=this.axis,chart=axis.chart,cHeight=old&&chart.oldChartHeight||chart.chartHeight;return{x:horiz?axis.translate(pos+tickmarkOffset,null,null,old)+axis.transB:axis.left+axis.offset+(axis.opposite?(old&&chart.oldChartWidth||chart.chartWidth)-axis.right-axis.left:0),y:horiz?cHeight-axis.bottom+axis.offset-(axis.opposite?axis.height:0):cHeight-axis.translate(pos+tickmarkOffset,null,null,old)-axis.transB}},getLabelPosition:function(x,y,label,horiz,labelOptions,tickmarkOffset,index,step){var axis=this.axis,transA=axis.transA,reversed=axis.reversed,staggerLines=axis.staggerLines,baseline=axis.chart.renderer.fontMetrics(labelOptions.style.fontSize).b,rotation=labelOptions.rotation;return x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0),y=y+labelOptions.y-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0),rotation&&2===axis.side&&(y-=baseline-baseline*mathCos(rotation*deg2rad)),defined(labelOptions.y)||rotation||(y+=baseline-label.getBBox().height/2),staggerLines&&(label.line=index/(step||1)%staggerLines,y+=label.line*(axis.labelOffset/staggerLines)),{x:x,y:y}},getMarkPath:function(x,y,tickLength,tickWidth,horiz,renderer){return renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth)},render:function(index,old,opacity){var gridLinePath,markPath,attribs,tick=this,axis=tick.axis,options=axis.options,chart=axis.chart,renderer=chart.renderer,horiz=axis.horiz,type=tick.type,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridPrefix=type?type+"Grid":"grid",tickPrefix=type?type+"Tick":"tick",gridLineWidth=options[gridPrefix+"LineWidth"],gridLineColor=options[gridPrefix+"LineColor"],dashStyle=options[gridPrefix+"LineDashStyle"],tickLength=options[tickPrefix+"Length"],tickWidth=options[tickPrefix+"Width"]||0,tickColor=options[tickPrefix+"Color"],tickPosition=options[tickPrefix+"Position"],mark=tick.mark,step=labelOptions.step,show=!0,tickmarkOffset=axis.tickmarkOffset,xy=tick.getPosition(horiz,pos,tickmarkOffset,old),x=xy.x,y=xy.y,reverseCrisp=horiz&&x===axis.pos+axis.len||!horiz&&y===axis.pos?-1:1;this.isActive=!0,gridLineWidth&&(gridLinePath=axis.getPlotLinePath(pos+tickmarkOffset,gridLineWidth*reverseCrisp,old,!0),gridLine===UNDEFINED&&(attribs={stroke:gridLineColor,"stroke-width":gridLineWidth},dashStyle&&(attribs.dashstyle=dashStyle),type||(attribs.zIndex=1),old&&(attribs.opacity=0),tick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(axis.gridGroup):null),!old&&gridLine&&gridLinePath&&gridLine[tick.isNew?"attr":"animate"]({d:gridLinePath,opacity:opacity})),tickWidth&&tickLength&&("inside"===tickPosition&&(tickLength=-tickLength),axis.opposite&&(tickLength=-tickLength),markPath=tick.getMarkPath(x,y,tickLength,tickWidth*reverseCrisp,horiz,renderer),mark?mark.animate({d:markPath,opacity:opacity}):tick.mark=renderer.path(markPath).attr({stroke:tickColor,"stroke-width":tickWidth,opacity:opacity}).add(axis.axisGroup)),label&&!isNaN(x)&&(label.xy=xy=tick.getLabelPosition(x,y,label,horiz,labelOptions,tickmarkOffset,index,step),tick.isFirst&&!tick.isLast&&!pick(options.showFirstLabel,1)||tick.isLast&&!tick.isFirst&&!pick(options.showLastLabel,1)?show=!1:axis.isRadial||labelOptions.step||labelOptions.rotation||old||0===opacity||(show=tick.handleOverflow(index,xy)),step&&index%step&&(show=!1),show&&!isNaN(xy.y)?(xy.opacity=opacity,label[tick.isNew?"attr":"animate"](xy),tick.isNew=!1):label.attr("y",-9999))},destroy:function(){destroyObjectProperties(this,this.axis)}};var PlotLineOrBand=function(axis,options){this.axis=axis,options&&(this.options=options,this.id=options.id)};PlotLineOrBand.prototype={render:function(){var addEvent,eventType,xs,ys,x,y,attribs,plotLine=this,axis=plotLine.axis,horiz=axis.horiz,halfPointRange=(axis.pointRange||0)/2,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,from=options.from,isBand=defined(from)&&defined(to),value=options.value,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],color=options.color,zIndex=options.zIndex,events=options.events,renderer=axis.chart.renderer;if(axis.isLog&&(from=log2lin(from),to=log2lin(to),value=log2lin(value)),width)path=axis.getPlotLinePath(value,width),attribs={stroke:color,"stroke-width":width},dashStyle&&(attribs.dashstyle=dashStyle);else{if(!isBand)return;from=mathMax(from,axis.min-halfPointRange),to=mathMin(to,axis.max+halfPointRange),path=axis.getPlotBandPath(from,to,options),attribs={fill:color},options.borderWidth&&(attribs.stroke=options.borderColor,attribs["stroke-width"]=options.borderWidth)}if(defined(zIndex)&&(attribs.zIndex=zIndex),svgElem)path?svgElem.animate({d:path},null,svgElem.onGetPath):(svgElem.hide(),svgElem.onGetPath=function(){svgElem.show()},label&&(plotLine.label=label=label.destroy()));else if(path&&path.length&&(plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add(),events)){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e])})};for(eventType in events)addEvent(eventType)}return optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&axis.width>0&&axis.height>0?(optionsLabel=merge({align:horiz&&isBand&&"center",x:horiz?!isBand&&4:10,verticalAlign:!horiz&&isBand&&"middle",y:horiz?isBand?16:10:isBand?6:-4,rotation:horiz&&!isBand&&90},optionsLabel),label||(plotLine.label=label=renderer.text(optionsLabel.text,0,0,optionsLabel.useHTML).attr({align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation,zIndex:zIndex}).css(optionsLabel.style).add()),xs=[path[1],path[4],pick(path[6],path[1])],ys=[path[2],path[5],pick(path[7],path[2])],x=arrayMin(xs),y=arrayMin(ys),label.align(optionsLabel,!1,{x:x,y:y,width:arrayMax(xs)-x,height:arrayMax(ys)-y}),label.show()):label&&label.hide(),plotLine},destroy:function(){erase(this.axis.plotLinesAndBands,this),delete this.axis,destroyObjectProperties(this)}},AxisPlotLineOrBandExtension={getPlotBandPath:function(from,to){var toPath=this.getPlotLinePath(to),path=this.getPlotLinePath(from);return path&&toPath?path.push(toPath[4],toPath[5],toPath[1],toPath[2]):path=null,path},addPlotBand:function(options){this.addPlotBandOrLine(options,"plotBands")},addPlotLine:function(options){this.addPlotBandOrLine(options,"plotLines")},addPlotBandOrLine:function(options,coll){var obj=new PlotLineOrBand(this,options).render(),userOptions=this.userOptions;return obj&&(coll&&(userOptions[coll]=userOptions[coll]||[],userOptions[coll].push(options)),this.plotLinesAndBands.push(obj)),obj},removePlotBandOrLine:function(id){for(var plotLinesAndBands=this.plotLinesAndBands,options=this.options,userOptions=this.userOptions,i=plotLinesAndBands.length;i--;)plotLinesAndBands[i].id===id&&plotLinesAndBands[i].destroy();each([options.plotLines||[],userOptions.plotLines||[],options.plotBands||[],userOptions.plotBands||[]],function(arr){for(i=arr.length;i--;)arr[i].id===id&&erase(arr,arr[i])})}},Axis.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:defaultLabelOptions,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return numberFormat(this.total,-1)},style:defaultLabelOptions.style}},defaultLeftAxisOptions:{labels:{x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-5},title:{rotation:0}},init:function(chart,userOptions){var isXAxis=userOptions.isX,axis=this;axis.horiz=chart.inverted?!isXAxis:isXAxis,axis.isXAxis=isXAxis,axis.coll=isXAxis?"xAxis":"yAxis",axis.opposite=userOptions.opposite,axis.side=userOptions.side||(axis.horiz?axis.opposite?0:2:axis.opposite?1:3),axis.setOptions(userOptions);var options=this.options,type=options.type,isDatetimeAxis="datetime"===type;axis.labelFormatter=options.labels.formatter||axis.defaultLabelFormatter,axis.userOptions=userOptions,axis.minPixelPadding=0,axis.chart=chart,axis.reversed=options.reversed,axis.zoomEnabled=options.zoomEnabled!==!1,axis.categories=options.categories||"category"===type,axis.names=[],axis.isLog="logarithmic"===type,axis.isDatetimeAxis=isDatetimeAxis,axis.isLinked=defined(options.linkedTo),axis.tickmarkOffset=axis.categories&&"between"===options.tickmarkPlacement?.5:0,axis.ticks={},axis.labelEdge=[],axis.minorTicks={},axis.plotLinesAndBands=[],axis.alternateBands={},axis.len=0,axis.minRange=axis.userMinRange=options.minRange||options.maxZoom,axis.range=options.range,axis.offset=options.offset||0,axis.stacks={},axis.oldStacks={},axis.stackExtremes={},axis.max=null,axis.min=null,axis.crosshair=pick(options.crosshair,splat(chart.options.tooltip.crosshairs)[isXAxis?0:1],!1);var eventType,events=axis.options.events;-1===inArray(axis,chart.axes)&&(chart.axes.push(axis),chart[axis.coll].push(axis)),axis.series=axis.series||[],chart.inverted&&isXAxis&&axis.reversed===UNDEFINED&&(axis.reversed=!0),axis.removePlotBand=axis.removePlotBandOrLine,axis.removePlotLine=axis.removePlotBandOrLine;for(eventType in events)addEvent(axis,eventType,events[eventType]);axis.isLog&&(axis.val2lin=log2lin,axis.lin2val=lin2log)},setOptions:function(userOptions){this.options=merge(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],merge(defaultOptions[this.coll],userOptions))},defaultLabelFormatter:function(){var multi,ret,axis=this.axis,value=this.value,categories=axis.categories,dateTimeLabelFormat=this.dateTimeLabelFormat,numericSymbols=defaultOptions.lang.numericSymbols,i=numericSymbols&&numericSymbols.length,formatOption=axis.options.labels.format,numericSymbolDetector=axis.isLog?value:axis.tickInterval;if(formatOption)ret=format(formatOption,this);else if(categories)ret=value;else if(dateTimeLabelFormat)ret=dateFormat(dateTimeLabelFormat,value);else if(i&&numericSymbolDetector>=1e3)for(;i--&&ret===UNDEFINED;)multi=Math.pow(1e3,i+1),numericSymbolDetector>=multi&&null!==numericSymbols[i]&&(ret=numberFormat(value/multi,-1)+numericSymbols[i]);return ret===UNDEFINED&&(ret=value>=1e4?numberFormat(value,0):numberFormat(value,-1,UNDEFINED,"")),ret},getSeriesExtremes:function(){var axis=this,chart=axis.chart;axis.hasVisibleSeries=!1,axis.dataMin=axis.dataMax=null,axis.stackExtremes={},axis.buildStacks(),each(axis.series,function(series){if(series.visible||!chart.options.chart.ignoreHiddenSeries){var xData,seriesDataMin,seriesDataMax,seriesOptions=series.options,threshold=seriesOptions.threshold;axis.hasVisibleSeries=!0,axis.isLog&&0>=threshold&&(threshold=null),axis.isXAxis?(xData=series.xData,xData.length&&(axis.dataMin=mathMin(pick(axis.dataMin,xData[0]),arrayMin(xData)),axis.dataMax=mathMax(pick(axis.dataMax,xData[0]),arrayMax(xData)))):(series.getExtremes(),seriesDataMax=series.dataMax,seriesDataMin=series.dataMin,defined(seriesDataMin)&&defined(seriesDataMax)&&(axis.dataMin=mathMin(pick(axis.dataMin,seriesDataMin),seriesDataMin),axis.dataMax=mathMax(pick(axis.dataMax,seriesDataMax),seriesDataMax)),defined(threshold)&&(axis.dataMin>=threshold?(axis.dataMin=threshold,axis.ignoreMinPadding=!0):axis.dataMax<threshold&&(axis.dataMax=threshold,axis.ignoreMaxPadding=!0)))}})},translate:function(val,backwards,cvsCoord,old,handleLog,pointPlacement){var returnValue,axis=this,axisLength=axis.len,sign=1,cvsOffset=0,localA=old?axis.oldTransA:axis.transA,localMin=old?axis.oldMin:axis.min,minPixelPadding=axis.minPixelPadding,postTranslate=(axis.options.ordinal||axis.isLog&&handleLog)&&axis.lin2val;return localA||(localA=axis.transA),cvsCoord&&(sign*=-1,cvsOffset=axisLength),axis.reversed&&(sign*=-1,cvsOffset-=sign*axisLength),backwards?(val=val*sign+cvsOffset,val-=minPixelPadding,returnValue=val/localA+localMin,postTranslate&&(returnValue=axis.lin2val(returnValue))):(postTranslate&&(val=axis.val2lin(val)),"between"===pointPlacement&&(pointPlacement=.5),returnValue=sign*(val-localMin)*localA+cvsOffset+sign*minPixelPadding+(isNumber(pointPlacement)?localA*pointPlacement*axis.pointRange:0)),returnValue},toPixels:function(value,paneCoordinates){return this.translate(value,!1,!this.horiz,null,!0)+(paneCoordinates?0:this.pos)},toValue:function(pixel,paneCoordinates){return this.translate(pixel-(paneCoordinates?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(value,lineWidth,old,force,translatedValue){var x1,y1,x2,y2,skip,axis=this,chart=axis.chart,axisLeft=axis.left,axisTop=axis.top,cHeight=old&&chart.oldChartHeight||chart.chartHeight,cWidth=old&&chart.oldChartWidth||chart.chartWidth,transB=axis.transB;return translatedValue=pick(translatedValue,axis.translate(value,null,null,old)),x1=x2=mathRound(translatedValue+transB),y1=y2=mathRound(cHeight-translatedValue-transB),isNaN(translatedValue)?skip=!0:axis.horiz?(y1=axisTop,y2=cHeight-axis.bottom,(axisLeft>x1||x1>axisLeft+axis.width)&&(skip=!0)):(x1=axisLeft,x2=cWidth-axis.right,(axisTop>y1||y1>axisTop+axis.height)&&(skip=!0)),skip&&!force?null:chart.renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||1)},getLinearTickPositions:function(tickInterval,min,max){var pos,lastPos,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval),tickPositions=[];for(pos=roundedMin;roundedMax>=pos&&(tickPositions.push(pos),pos=correctFloat(pos+tickInterval),pos!==lastPos);)lastPos=pos;return tickPositions},getMinorTickPositions:function(){var pos,i,len,axis=this,options=axis.options,tickPositions=axis.tickPositions,minorTickInterval=axis.minorTickInterval,minorTickPositions=[];if(axis.isLog)for(len=tickPositions.length,i=1;len>i;i++)minorTickPositions=minorTickPositions.concat(axis.getLogTickPositions(minorTickInterval,tickPositions[i-1],tickPositions[i],!0));else if(axis.isDatetimeAxis&&"auto"===options.minorTickInterval)minorTickPositions=minorTickPositions.concat(axis.getTimeTicks(axis.normalizeTimeTickInterval(minorTickInterval),axis.min,axis.max,options.startOfWeek)),minorTickPositions[0]<axis.min&&minorTickPositions.shift();else for(pos=axis.min+(tickPositions[0]-axis.min)%minorTickInterval;pos<=axis.max;pos+=minorTickInterval)minorTickPositions.push(pos);return minorTickPositions},adjustForMinRange:function(){var zoomOffset,closestDataRange,i,distance,xData,loopLength,minArgs,maxArgs,axis=this,options=axis.options,min=axis.min,max=axis.max,spaceAvailable=axis.dataMax-axis.dataMin>=axis.minRange;if(axis.isXAxis&&axis.minRange===UNDEFINED&&!axis.isLog&&(defined(options.min)||defined(options.max)?axis.minRange=null:(each(axis.series,function(series){for(xData=series.xData,loopLength=series.xIncrement?1:xData.length-1,i=loopLength;i>0;i--)distance=xData[i]-xData[i-1],(closestDataRange===UNDEFINED||closestDataRange>distance)&&(closestDataRange=distance)}),axis.minRange=mathMin(5*closestDataRange,axis.dataMax-axis.dataMin))),max-min<axis.minRange){var minRange=axis.minRange;zoomOffset=(minRange-max+min)/2,minArgs=[min-zoomOffset,pick(options.min,min-zoomOffset)],spaceAvailable&&(minArgs[2]=axis.dataMin),min=arrayMax(minArgs),maxArgs=[min+minRange,pick(options.max,min+minRange)],spaceAvailable&&(maxArgs[2]=axis.dataMax),max=arrayMin(maxArgs),minRange>max-min&&(minArgs[0]=max-minRange,minArgs[1]=pick(options.min,max-minRange),min=arrayMax(minArgs))}axis.min=min,axis.max=max},setAxisTranslation:function(saveOld){var closestPointRange,ordinalCorrection,axis=this,range=axis.max-axis.min,pointRange=0,minPointOffset=0,pointRangePadding=0,linkedParent=axis.linkedParent,hasCategories=!!axis.categories,transA=axis.transA;(axis.isXAxis||hasCategories)&&(linkedParent?(minPointOffset=linkedParent.minPointOffset,pointRangePadding=linkedParent.pointRangePadding):each(axis.series,function(series){var seriesPointRange=mathMax(series.pointRange,+hasCategories),pointPlacement=series.options.pointPlacement,seriesClosestPointRange=series.closestPointRange;seriesPointRange>range&&(seriesPointRange=0),pointRange=mathMax(pointRange,seriesPointRange),minPointOffset=mathMax(minPointOffset,isString(pointPlacement)?0:seriesPointRange/2),pointRangePadding=mathMax(pointRangePadding,"on"===pointPlacement?0:seriesPointRange),!series.noSharedTooltip&&defined(seriesClosestPointRange)&&(closestPointRange=defined(closestPointRange)?mathMin(closestPointRange,seriesClosestPointRange):seriesClosestPointRange)
}),ordinalCorrection=axis.ordinalSlope&&closestPointRange?axis.ordinalSlope/closestPointRange:1,axis.minPointOffset=minPointOffset*=ordinalCorrection,axis.pointRangePadding=pointRangePadding*=ordinalCorrection,axis.pointRange=mathMin(pointRange,range),axis.closestPointRange=closestPointRange),saveOld&&(axis.oldTransA=transA),axis.translationSlope=axis.transA=transA=axis.len/(range+pointRangePadding||1),axis.transB=axis.horiz?axis.left:axis.bottom,axis.minPixelPadding=transA*minPointOffset},setTickPositions:function(secondPass){var length,linkedParentExtremes,tickPositions,keepTwoTicksOnly,axis=this,chart=axis.chart,options=axis.options,isLog=axis.isLog,isDatetimeAxis=axis.isDatetimeAxis,isXAxis=axis.isXAxis,isLinked=axis.isLinked,tickPositioner=axis.options.tickPositioner,maxPadding=options.maxPadding,minPadding=options.minPadding,tickIntervalOption=options.tickInterval,minTickIntervalOption=options.minTickInterval,tickPixelIntervalOption=options.tickPixelInterval,categories=axis.categories;if(isLinked?(axis.linkedParent=chart[axis.coll][options.linkedTo],linkedParentExtremes=axis.linkedParent.getExtremes(),axis.min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin),axis.max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax),options.type!==axis.linkedParent.options.type&&error(11,1)):(axis.min=pick(axis.userMin,options.min,axis.dataMin),axis.max=pick(axis.userMax,options.max,axis.dataMax)),isLog&&(!secondPass&&mathMin(axis.min,pick(axis.dataMin,axis.min))<=0&&error(10,1),axis.min=correctFloat(log2lin(axis.min)),axis.max=correctFloat(log2lin(axis.max))),axis.range&&defined(axis.max)&&(axis.userMin=axis.min=mathMax(axis.min,axis.max-axis.range),axis.userMax=axis.max,axis.range=null),axis.beforePadding&&axis.beforePadding(),axis.adjustForMinRange(),categories||axis.usePercentage||isLinked||!defined(axis.min)||!defined(axis.max)||(length=axis.max-axis.min,length&&(defined(options.min)||defined(axis.userMin)||!minPadding||!(axis.dataMin<0)&&axis.ignoreMinPadding||(axis.min-=length*minPadding),defined(options.max)||defined(axis.userMax)||!maxPadding||!(axis.dataMax>0)&&axis.ignoreMaxPadding||(axis.max+=length*maxPadding))),axis.min===axis.max||void 0===axis.min||void 0===axis.max?axis.tickInterval=1:isLinked&&!tickIntervalOption&&tickPixelIntervalOption===axis.linkedParent.options.tickPixelInterval?axis.tickInterval=axis.linkedParent.tickInterval:(axis.tickInterval=pick(tickIntervalOption,categories?1:(axis.max-axis.min)*tickPixelIntervalOption/mathMax(axis.len,tickPixelIntervalOption)),!defined(tickIntervalOption)&&axis.len<tickPixelIntervalOption&&!this.isRadial&&!categories&&options.startOnTick&&options.endOnTick&&(keepTwoTicksOnly=!0,axis.tickInterval/=4)),isXAxis&&!secondPass&&each(axis.series,function(series){series.processData(axis.min!==axis.oldMin||axis.max!==axis.oldMax)}),axis.setAxisTranslation(!0),axis.beforeSetTickPositions&&axis.beforeSetTickPositions(),axis.postProcessTickInterval&&(axis.tickInterval=axis.postProcessTickInterval(axis.tickInterval)),axis.pointRange&&(axis.tickInterval=mathMax(axis.pointRange,axis.tickInterval)),!tickIntervalOption&&axis.tickInterval<minTickIntervalOption&&(axis.tickInterval=minTickIntervalOption),isDatetimeAxis||isLog||tickIntervalOption||(axis.tickInterval=normalizeTickInterval(axis.tickInterval,null,getMagnitude(axis.tickInterval),options)),axis.minorTickInterval="auto"===options.minorTickInterval&&axis.tickInterval?axis.tickInterval/5:options.minorTickInterval,axis.tickPositions=tickPositions=options.tickPositions?[].concat(options.tickPositions):tickPositioner&&tickPositioner.apply(axis,[axis.min,axis.max]),tickPositions||(!axis.ordinalPositions&&(axis.max-axis.min)/axis.tickInterval>mathMax(2*axis.len,200)&&error(19,!0),tickPositions=isDatetimeAxis?axis.getTimeTicks(axis.normalizeTimeTickInterval(axis.tickInterval,options.units),axis.min,axis.max,options.startOfWeek,axis.ordinalPositions,axis.closestPointRange,!0):isLog?axis.getLogTickPositions(axis.tickInterval,axis.min,axis.max):axis.getLinearTickPositions(axis.tickInterval,axis.min,axis.max),keepTwoTicksOnly&&tickPositions.splice(1,tickPositions.length-2),axis.tickPositions=tickPositions),!isLinked){var singlePad,roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1],minPointOffset=axis.minPointOffset||0;options.startOnTick?axis.min=roundedMin:axis.min-minPointOffset>roundedMin&&tickPositions.shift(),options.endOnTick?axis.max=roundedMax:axis.max+minPointOffset<roundedMax&&tickPositions.pop(),1===tickPositions.length&&(singlePad=.001,axis.min-=singlePad,axis.max+=singlePad)}},setMaxTicks:function(){var chart=this.chart,maxTicks=chart.maxTicks||{},tickPositions=this.tickPositions,key=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&tickPositions&&tickPositions.length>(maxTicks[key]||0)&&this.options.alignTicks!==!1&&(maxTicks[key]=tickPositions.length),chart.maxTicks=maxTicks},adjustTickAmount:function(){var axis=this,chart=axis.chart,key=axis._maxTicksKey,tickPositions=axis.tickPositions,maxTicks=chart.maxTicks;if(maxTicks&&maxTicks[key]&&!axis.isDatetimeAxis&&!axis.categories&&!axis.isLinked&&axis.options.alignTicks!==!1&&this.min!==UNDEFINED){var tickAmount,oldTickAmount=axis.tickAmount,calculatedTickAmount=tickPositions.length;if(axis.tickAmount=tickAmount=maxTicks[key],tickAmount>calculatedTickAmount){for(;tickPositions.length<tickAmount;)tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+axis.tickInterval));axis.transA*=(calculatedTickAmount-1)/(tickAmount-1),axis.max=tickPositions[tickPositions.length-1]}defined(oldTickAmount)&&tickAmount!==oldTickAmount&&(axis.isDirty=!0)}},setScale:function(){var type,i,isDirtyData,isDirtyAxisLength,axis=this,stacks=axis.stacks;if(axis.oldMin=axis.min,axis.oldMax=axis.max,axis.oldAxisLength=axis.len,axis.setAxisSize(),isDirtyAxisLength=axis.len!==axis.oldAxisLength,each(axis.series,function(series){(series.isDirtyData||series.isDirty||series.xAxis.isDirty)&&(isDirtyData=!0)}),isDirtyAxisLength||isDirtyData||axis.isLinked||axis.forceRedraw||axis.userMin!==axis.oldUserMin||axis.userMax!==axis.oldUserMax){if(!axis.isXAxis)for(type in stacks)for(i in stacks[type])stacks[type][i].total=null,stacks[type][i].cum=0;axis.forceRedraw=!1,axis.getSeriesExtremes(),axis.setTickPositions(),axis.oldUserMin=axis.userMin,axis.oldUserMax=axis.userMax,axis.isDirty||(axis.isDirty=isDirtyAxisLength||axis.min!==axis.oldMin||axis.max!==axis.oldMax)}else if(!axis.isXAxis){axis.oldStacks&&(stacks=axis.stacks=axis.oldStacks);for(type in stacks)for(i in stacks[type])stacks[type][i].cum=stacks[type][i].total}axis.setMaxTicks()},setExtremes:function(newMin,newMax,redraw,animation,eventArguments){var axis=this,chart=axis.chart;redraw=pick(redraw,!0),eventArguments=extend(eventArguments,{min:newMin,max:newMax}),fireEvent(axis,"setExtremes",eventArguments,function(){axis.userMin=newMin,axis.userMax=newMax,axis.eventArgs=eventArguments,axis.isDirtyExtremes=!0,redraw&&chart.redraw(animation)})},zoom:function(newMin,newMax){return this.allowZoomOutside||(defined(this.dataMin)&&newMin<=this.dataMin&&(newMin=UNDEFINED),defined(this.dataMax)&&newMax>=this.dataMax&&(newMax=UNDEFINED)),this.displayBtn=newMin!==UNDEFINED||newMax!==UNDEFINED,this.setExtremes(newMin,newMax,!1,UNDEFINED,{trigger:"zoom"}),!0},setAxisSize:function(){var width,height,top,left,chart=this.chart,options=this.options,offsetLeft=options.offsetLeft||0,offsetRight=options.offsetRight||0,horiz=this.horiz;this.left=left=pick(options.left,chart.plotLeft+offsetLeft),this.top=top=pick(options.top,chart.plotTop),this.width=width=pick(options.width,chart.plotWidth-offsetLeft+offsetRight),this.height=height=pick(options.height,chart.plotHeight),this.bottom=chart.chartHeight-height-top,this.right=chart.chartWidth-width-left,this.len=mathMax(horiz?width:height,0),this.pos=horiz?left:top},getExtremes:function(){var axis=this,isLog=axis.isLog;return{min:isLog?correctFloat(lin2log(axis.min)):axis.min,max:isLog?correctFloat(lin2log(axis.max)):axis.max,dataMin:axis.dataMin,dataMax:axis.dataMax,userMin:axis.userMin,userMax:axis.userMax}},getThreshold:function(threshold){var axis=this,isLog=axis.isLog,realMin=isLog?lin2log(axis.min):axis.min,realMax=isLog?lin2log(axis.max):axis.max;return realMin>threshold||null===threshold?threshold=realMin:threshold>realMax&&(threshold=realMax),axis.translate(threshold,0,1,0,1)},autoLabelAlign:function(rotation){var ret,angle=(pick(rotation,0)-90*this.side+720)%360;return ret=angle>15&&165>angle?"right":angle>195&&345>angle?"left":"center"},getOffset:function(){var hasData,showAxis,titleOffsetOption,n,i,sortedPositions,lastRight,overlap,pos,bBox,x,w,lineNo,axis=this,chart=axis.chart,renderer=chart.renderer,options=axis.options,tickPositions=axis.tickPositions,ticks=axis.ticks,horiz=axis.horiz,side=axis.side,invertedSide=chart.inverted?[1,0,3,2][side]:side,titleOffset=0,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,labelOffset=0,axisOffset=chart.axisOffset,clipOffset=chart.clipOffset,directionFactor=[-1,1,1,-1][side],autoStaggerLines=1,maxStaggerLines=pick(labelOptions.maxStaggerLines,5);if(axis.hasData=hasData=axis.hasVisibleSeries||defined(axis.min)&&defined(axis.max)&&!!tickPositions,axis.showAxis=showAxis=hasData||pick(options.showEmpty,!0),axis.staggerLines=axis.horiz&&labelOptions.staggerLines,axis.axisGroup||(axis.gridGroup=renderer.g("grid").attr({zIndex:options.gridZIndex||1}).add(),axis.axisGroup=renderer.g("axis").attr({zIndex:options.zIndex||2}).add(),axis.labelGroup=renderer.g("axis-labels").attr({zIndex:labelOptions.zIndex||7}).add()),hasData||axis.isLinked){if(axis.labelAlign=pick(labelOptions.align||axis.autoLabelAlign(labelOptions.rotation)),each(tickPositions,function(pos){ticks[pos]?ticks[pos].addLabel():ticks[pos]=new Tick(axis,pos)}),axis.horiz&&!axis.staggerLines&&maxStaggerLines&&!labelOptions.rotation){for(sortedPositions=axis.reversed?[].concat(tickPositions).reverse():tickPositions;maxStaggerLines>autoStaggerLines;){for(lastRight=[],overlap=!1,i=0;i<sortedPositions.length;i++)pos=sortedPositions[i],bBox=ticks[pos].label&&ticks[pos].label.getBBox(),w=bBox?bBox.width:0,lineNo=i%autoStaggerLines,w&&(x=axis.translate(pos),lastRight[lineNo]!==UNDEFINED&&x<lastRight[lineNo]&&(overlap=!0),lastRight[lineNo]=x+w);if(!overlap)break;autoStaggerLines++}autoStaggerLines>1&&(axis.staggerLines=autoStaggerLines)}each(tickPositions,function(pos){(0===side||2===side||{1:"left",3:"right"}[side]===axis.labelAlign)&&(labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset))}),axis.staggerLines&&(labelOffset*=axis.staggerLines,axis.labelOffset=labelOffset)}else for(n in ticks)ticks[n].destroy(),delete ticks[n];axisTitleOptions&&axisTitleOptions.text&&axisTitleOptions.enabled!==!1&&(axis.axisTitle||(axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:"left",middle:"center",high:"right"}[axisTitleOptions.align]}).css(axisTitleOptions.style).add(axis.axisGroup),axis.axisTitle.isNew=!0),showAxis&&(titleOffset=axis.axisTitle.getBBox()[horiz?"height":"width"],titleMargin=pick(axisTitleOptions.margin,horiz?5:10),titleOffsetOption=axisTitleOptions.offset),axis.axisTitle[showAxis?"show":"hide"]()),axis.offset=directionFactor*pick(options.offset,axisOffset[side]),axis.axisTitleMargin=pick(titleOffsetOption,labelOffset+titleMargin+(2!==side&&labelOffset&&directionFactor*options.labels[horiz?"y":"x"])),axisOffset[side]=mathMax(axisOffset[side],axis.axisTitleMargin+titleOffset+directionFactor*axis.offset),clipOffset[invertedSide]=mathMax(clipOffset[invertedSide],2*mathFloor(options.lineWidth/2))},getLinePath:function(lineWidth){var chart=this.chart,opposite=this.opposite,offset=this.offset,horiz=this.horiz,lineLeft=this.left+(opposite?this.width:0)+offset,lineTop=chart.chartHeight-this.bottom-(opposite?this.height:0)+offset;return opposite&&(lineWidth*=-1),chart.renderer.crispLine([M,horiz?this.left:lineLeft,horiz?lineTop:this.top,L,horiz?chart.chartWidth-this.right:lineLeft,horiz?lineTop:chart.chartHeight-this.bottom],lineWidth)},getTitlePosition:function(){var horiz=this.horiz,axisLeft=this.left,axisTop=this.top,axisLength=this.len,axisTitleOptions=this.options.title,margin=horiz?axisLeft:axisTop,opposite=this.opposite,offset=this.offset,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?axisTop+this.height:axisLeft)+(horiz?1:-1)*(opposite?-1:1)*this.axisTitleMargin+(2===this.side?fontSize:0);return{x:horiz?alongAxis:offAxis+(opposite?this.width:0)+offset+(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?this.height:0)+offset:alongAxis+(axisTitleOptions.y||0)}},render:function(){var sortedPositions,linePath,from,to,axis=this,horiz=axis.horiz,reversed=axis.reversed,chart=axis.chart,renderer=chart.renderer,options=axis.options,isLog=axis.isLog,isLinked=axis.isLinked,tickPositions=axis.tickPositions,axisTitle=axis.axisTitle,stacks=axis.stacks,ticks=axis.ticks,minorTicks=axis.minorTicks,alternateBands=axis.alternateBands,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,tickmarkOffset=axis.tickmarkOffset,lineWidth=options.lineWidth,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(axis.oldMin)&&!isNaN(axis.oldMin),hasData=axis.hasData,showAxis=axis.showAxis,justifyLabels=axis.justifyLabels=!axis.staggerLines&&horiz&&"justify"===options.labels.overflow;if(axis.labelEdge.length=0,each([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll)coll[pos].isActive=!1}),(hasData||isLinked)&&(axis.minorTickInterval&&!axis.categories&&each(axis.getMinorTickPositions(),function(pos){minorTicks[pos]||(minorTicks[pos]=new Tick(axis,pos,"minor")),slideInTicks&&minorTicks[pos].isNew&&minorTicks[pos].render(null,!0),minorTicks[pos].render(null,!1,1)}),tickPositions.length&&(sortedPositions=tickPositions.slice(),(horiz&&reversed||!horiz&&!reversed)&&sortedPositions.reverse(),justifyLabels&&(sortedPositions=sortedPositions.slice(1).concat([sortedPositions[0]])),each(sortedPositions,function(pos,i){justifyLabels&&(i=i===sortedPositions.length-1?0:i+1),(!isLinked||pos>=axis.min&&pos<=axis.max)&&(ticks[pos]||(ticks[pos]=new Tick(axis,pos)),slideInTicks&&ticks[pos].isNew&&ticks[pos].render(i,!0,.1),ticks[pos].render(i,!1,1))}),tickmarkOffset&&0===axis.min&&(ticks[-1]||(ticks[-1]=new Tick(axis,-1,null,!0)),ticks[-1].render(-1))),alternateGridColor&&each(tickPositions,function(pos,i){i%2===0&&pos<axis.max&&(alternateBands[pos]||(alternateBands[pos]=new PlotLineOrBand(axis)),from=pos+tickmarkOffset,to=tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]+tickmarkOffset:axis.max,alternateBands[pos].options={from:isLog?lin2log(from):from,to:isLog?lin2log(to):to,color:alternateGridColor},alternateBands[pos].render(),alternateBands[pos].isActive=!0)}),axis._addedPlotLB||(each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){axis.addPlotBandOrLine(plotLineOptions)}),axis._addedPlotLB=!0)),each([ticks,minorTicks,alternateBands],function(coll){var pos,i,forDestruction=[],delay=globalAnimation?globalAnimation.duration||500:0,destroyInactiveItems=function(){for(i=forDestruction.length;i--;)coll[forDestruction[i]]&&!coll[forDestruction[i]].isActive&&(coll[forDestruction[i]].destroy(),delete coll[forDestruction[i]])};for(pos in coll)coll[pos].isActive||(coll[pos].render(pos,!1,0),coll[pos].isActive=!1,forDestruction.push(pos));coll!==alternateBands&&chart.hasRendered&&delay?delay&&setTimeout(destroyInactiveItems,delay):destroyInactiveItems()}),lineWidth&&(linePath=axis.getLinePath(lineWidth),axis.axisLine?axis.axisLine.animate({d:linePath}):axis.axisLine=renderer.path(linePath).attr({stroke:options.lineColor,"stroke-width":lineWidth,zIndex:7}).add(axis.axisGroup),axis.axisLine[showAxis?"show":"hide"]()),axisTitle&&showAxis&&(axisTitle[axisTitle.isNew?"attr":"animate"](axis.getTitlePosition()),axisTitle.isNew=!1),stackLabelOptions&&stackLabelOptions.enabled){var stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;stackTotalGroup||(axis.stackTotalGroup=stackTotalGroup=renderer.g("stack-labels").attr({visibility:VISIBLE,zIndex:6}).add()),stackTotalGroup.translate(chart.plotLeft,chart.plotTop);for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack)oneStack[stackCategory].render(stackTotalGroup)}}axis.isDirty=!1},redraw:function(){var axis=this,chart=axis.chart,pointer=chart.pointer;pointer.reset&&pointer.reset(!0),axis.render(),each(axis.plotLinesAndBands,function(plotLine){plotLine.render()}),each(axis.series,function(series){series.isDirty=!0})},buildStacks:function(){var series=this.series,i=series.length;if(!this.isXAxis){for(;i--;)series[i].setStackedPoints();if(this.usePercentage)for(i=0;i<series.length;i++)series[i].setPercentStacks()}},destroy:function(keepEvents){var stackKey,i,axis=this,stacks=axis.stacks,plotLinesAndBands=axis.plotLinesAndBands;keepEvents||removeEvent(axis);for(stackKey in stacks)destroyObjectProperties(stacks[stackKey]),stacks[stackKey]=null;for(each([axis.ticks,axis.minorTicks,axis.alternateBands],function(coll){destroyObjectProperties(coll)}),i=plotLinesAndBands.length;i--;)plotLinesAndBands[i].destroy();each(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(prop){axis[prop]&&(axis[prop]=axis[prop].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,point){if(this.crosshair){if((defined(point)||!pick(this.crosshair.snap,!0))===!1)return void this.hideCrosshair();var path,pos,options=this.crosshair,animation=options.animation;if(pick(options.snap,!0)?defined(point)&&(pos=this.chart.inverted!=this.horiz?point.plotX:this.len-point.plotY):pos=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,path=this.isRadial?this.getPlotLinePath(this.isXAxis?point.x:pick(point.stackY,point.y)):this.getPlotLinePath(null,null,null,null,pos),null===path)return void this.hideCrosshair();if(this.cross)this.cross.attr({visibility:VISIBLE})[animation?"animate":"attr"]({d:path},animation);else{var attribs={"stroke-width":options.width||1,stroke:options.color||"#C0C0C0",zIndex:options.zIndex||2};options.dashStyle&&(attribs.dashstyle=options.dashStyle),this.cross=this.chart.renderer.path(path).attr(attribs).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}},extend(Axis.prototype,AxisPlotLineOrBandExtension),Axis.prototype.getLogTickPositions=function(interval,min,max,minor){var axis=this,options=axis.options,axisLength=axis.len,positions=[];if(minor||(axis._minorAutoInterval=null),interval>=.5)interval=mathRound(interval),positions=axis.getLinearTickPositions(interval,min,max);else if(interval>=.08){var intermediate,i,j,len,pos,lastPos,break2,roundedMin=mathFloor(min);for(intermediate=interval>.3?[1,2,4]:interval>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],i=roundedMin;max+1>i&&!break2;i++)for(len=intermediate.length,j=0;len>j&&!break2;j++)pos=log2lin(lin2log(i)*intermediate[j]),pos>min&&(!minor||max>=lastPos)&&positions.push(lastPos),lastPos>max&&(break2=!0),lastPos=pos}else{var realMin=lin2log(min),realMax=lin2log(max),tickIntervalOption=options[minor?"minorTickInterval":"tickInterval"],filteredTickIntervalOption="auto"===tickIntervalOption?null:tickIntervalOption,tickPixelIntervalOption=options.tickPixelInterval/(minor?5:1),totalPixelLength=minor?axisLength/axis.tickPositions.length:axisLength;interval=pick(filteredTickIntervalOption,axis._minorAutoInterval,(realMax-realMin)*tickPixelIntervalOption/(totalPixelLength||1)),interval=normalizeTickInterval(interval,null,getMagnitude(interval)),positions=map(axis.getLinearTickPositions(interval,realMin,realMax),log2lin),minor||(axis._minorAutoInterval=interval/5)}return minor||(axis.tickInterval=interval),positions},Axis.prototype.getTimeTicks=function(normalizedInterval,min,max,startOfWeek){var i,minYear,tickPositions=[],higherRanks={},useUTC=defaultOptions.global.useUTC,minDate=new Date(min-timezoneOffset),interval=normalizedInterval.unitRange,count=normalizedInterval.count;if(defined(min)){interval>=timeUnits[SECOND]&&(minDate.setMilliseconds(0),minDate.setSeconds(interval>=timeUnits[MINUTE]?0:count*mathFloor(minDate.getSeconds()/count))),interval>=timeUnits[MINUTE]&&minDate[setMinutes](interval>=timeUnits[HOUR]?0:count*mathFloor(minDate[getMinutes]()/count)),interval>=timeUnits[HOUR]&&minDate[setHours](interval>=timeUnits[DAY]?0:count*mathFloor(minDate[getHours]()/count)),interval>=timeUnits[DAY]&&minDate[setDate](interval>=timeUnits[MONTH]?1:count*mathFloor(minDate[getDate]()/count)),interval>=timeUnits[MONTH]&&(minDate[setMonth](interval>=timeUnits[YEAR]?0:count*mathFloor(minDate[getMonth]()/count)),minYear=minDate[getFullYear]()),interval>=timeUnits[YEAR]&&(minYear-=minYear%count,minDate[setFullYear](minYear)),interval===timeUnits[WEEK]&&minDate[setDate](minDate[getDate]()-minDate[getDay]()+pick(startOfWeek,1)),i=1,timezoneOffset&&(minDate=new Date(minDate.getTime()+timezoneOffset)),minYear=minDate[getFullYear]();for(var time=minDate.getTime(),minMonth=minDate[getMonth](),minDateDate=minDate[getDate](),localTimezoneOffset=useUTC?timezoneOffset:(864e5+60*minDate.getTimezoneOffset()*1e3)%864e5;max>time;)tickPositions.push(time),interval===timeUnits[YEAR]?time=makeTime(minYear+i*count,0):interval===timeUnits[MONTH]?time=makeTime(minYear,minMonth+i*count):useUTC||interval!==timeUnits[DAY]&&interval!==timeUnits[WEEK]?time+=interval*count:time=makeTime(minYear,minMonth,minDateDate+i*count*(interval===timeUnits[DAY]?1:7)),i++;tickPositions.push(time),each(grep(tickPositions,function(time){return interval<=timeUnits[HOUR]&&time%timeUnits[DAY]===localTimezoneOffset}),function(time){higherRanks[time]=DAY})}return tickPositions.info=extend(normalizedInterval,{higherRanks:higherRanks,totalRange:interval*count}),tickPositions},Axis.prototype.normalizeTimeTickInterval=function(tickInterval,unitsOption){var count,i,units=unitsOption||[[MILLISECOND,[1,2,5,10,20,25,50,100,200,500]],[SECOND,[1,2,5,10,15,30]],[MINUTE,[1,2,5,10,15,30]],[HOUR,[1,2,3,4,6,8,12]],[DAY,[1,2]],[WEEK,[1,2]],[MONTH,[1,2,3,4,6]],[YEAR,null]],unit=units[units.length-1],interval=timeUnits[unit[0]],multiples=unit[1];for(i=0;i<units.length;i++)if(unit=units[i],interval=timeUnits[unit[0]],multiples=unit[1],units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+timeUnits[units[i+1][0]])/2;if(lessThan>=tickInterval)break}return interval===timeUnits[YEAR]&&5*interval>tickInterval&&(multiples=[1,2,5]),count=normalizeTickInterval(tickInterval/interval,multiples,unit[0]===YEAR?mathMax(getMagnitude(tickInterval/interval),1):1),{unitRange:interval,count:count,unitName:unit[0]}},StackItem.prototype={destroy:function(){destroyObjectProperties(this,this.axis)},render:function(group){var options=this.options,formatOption=options.format,str=formatOption?format(formatOption,this):options.formatter.call(this);this.label?this.label.attr({text:str,visibility:HIDDEN}):this.label=this.axis.chart.renderer.text(str,0,0,options.useHTML).css(options.style).attr({align:this.textAlign,rotation:options.rotation,visibility:HIDDEN}).add(group)},setOffset:function(xOffset,xWidth){var alignAttr,stackItem=this,axis=stackItem.axis,chart=axis.chart,inverted=chart.inverted,neg=this.isNegative,y=axis.translate(this.percent?100:this.total,0,0,0,1),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(this.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?neg?y:y-h:x,y:inverted?plotHeight-x-xWidth:neg?plotHeight-y-h:plotHeight-y,width:inverted?h:xWidth,height:inverted?xWidth:h},label=this.label;label&&(label.align(this.alignOptions,null,stackBox),alignAttr=label.alignAttr,label.attr({visibility:this.options.crop===!1||chart.isInsidePlot(alignAttr.x,alignAttr.y)?hasSVG?"inherit":VISIBLE:HIDDEN}))}},Tooltip.prototype={init:function(chart,options){var borderWidth=options.borderWidth,style=options.style,padding=pInt(style.padding);this.chart=chart,this.options=options,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=chart.renderer.label("",0,0,options.shape,null,null,options.useHTML,null,"tooltip").attr({padding:padding,fill:options.backgroundColor,"stroke-width":borderWidth,r:options.borderRadius,zIndex:8}).css(style).css({padding:0}).add().attr({y:-999}),useCanVG||this.label.shadow(options.shadow),this.shared=options.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(x,y,anchorX,anchorY){var tooltip=this,now=tooltip.now,animate=tooltip.options.animation!==!1&&!tooltip.isHidden;extend(now,{x:animate?(2*now.x+x)/3:x,y:animate?(now.y+y)/2:y,anchorX:animate?(2*now.anchorX+anchorX)/3:anchorX,anchorY:animate?(now.anchorY+anchorY)/2:anchorY}),tooltip.label.attr(now),animate&&(mathAbs(x-now.x)>1||mathAbs(y-now.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){tooltip&&tooltip.move(x,y,anchorX,anchorY)},32))},hide:function(){var hoverPoints,tooltip=this;clearTimeout(this.hideTimer),this.isHidden||(hoverPoints=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){tooltip.label.fadeOut(),tooltip.isHidden=!0},pick(this.options.hideDelay,500)),hoverPoints&&each(hoverPoints,function(point){point.setState()}),this.chart.hoverPoints=null)},getAnchor:function(points,mouseEvent){var ret,yAxis,chart=this.chart,inverted=chart.inverted,plotTop=chart.plotTop,plotX=0,plotY=0;return points=splat(points),ret=points[0].tooltipPos,this.followPointer&&mouseEvent&&(mouseEvent.chartX===UNDEFINED&&(mouseEvent=chart.pointer.normalize(mouseEvent)),ret=[mouseEvent.chartX-chart.plotLeft,mouseEvent.chartY-plotTop]),ret||(each(points,function(point){yAxis=point.series.yAxis,plotX+=point.plotX,plotY+=(point.plotLow?(point.plotLow+point.plotHigh)/2:point.plotY)+(!inverted&&yAxis?yAxis.top-plotTop:0)}),plotX/=points.length,plotY/=points.length,ret=[inverted?chart.plotWidth-plotY:plotX,this.shared&&!inverted&&points.length>1&&mouseEvent?mouseEvent.chartY-plotTop:inverted?chart.plotHeight-plotX:plotY]),map(ret,mathRound)},getPosition:function(boxWidth,boxHeight,point){var alignedRight,chart=this.chart,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,distance=pick(this.options.distance,12),pointX=point.plotX,pointY=point.plotY,x=pointX+plotLeft+(chart.inverted?distance:-boxWidth-distance),y=pointY-boxHeight+plotTop+15;return 7>x&&(x=plotLeft+mathMax(pointX,0)+distance),x+boxWidth>plotLeft+plotWidth&&(x-=x+boxWidth-(plotLeft+plotWidth),y=pointY-boxHeight+plotTop-distance,alignedRight=!0),plotTop+5>y&&(y=plotTop+5,alignedRight&&pointY>=y&&y+boxHeight>=pointY&&(y=pointY+plotTop+distance)),y+boxHeight>plotTop+plotHeight&&(y=mathMax(plotTop,plotTop+plotHeight-boxHeight-distance)),{x:x,y:y}},defaultFormatter:function(tooltip){var s,items=this.points||splat(this),series=items[0].series;return s=[series.tooltipHeaderFormatter(items[0])],each(items,function(item){series=item.series,s.push(series.tooltipFormatter&&series.tooltipFormatter(item)||item.point.tooltipFormatter(series.tooltipOptions.pointFormat))}),s.push(tooltip.options.footerFormat||""),s.join("")},refresh:function(point,mouseEvent){var x,y,anchor,text,borderColor,currentSeries,tooltip=this,chart=tooltip.chart,label=tooltip.label,options=tooltip.options,textConfig={},pointConfig=[],formatter=options.formatter||tooltip.defaultFormatter,hoverPoints=chart.hoverPoints,shared=tooltip.shared;clearTimeout(this.hideTimer),tooltip.followPointer=splat(point)[0].series.tooltipOptions.followPointer,anchor=tooltip.getAnchor(point,mouseEvent),x=anchor[0],y=anchor[1],!shared||point.series&&point.series.noSharedTooltip?textConfig=point.getLabelConfig():(chart.hoverPoints=point,hoverPoints&&each(hoverPoints,function(point){point.setState()}),each(point,function(item){item.setState(HOVER_STATE),pointConfig.push(item.getLabelConfig())}),textConfig={x:point[0].category,y:point[0].y},textConfig.points=pointConfig,point=point[0]),text=formatter.call(textConfig,tooltip),currentSeries=point.series,text===!1?this.hide():(tooltip.isHidden&&(stop(label),label.attr("opacity",1).show()),label.attr({text:text}),borderColor=options.borderColor||point.color||currentSeries.color||"#606060",label.attr({stroke:borderColor}),tooltip.updatePosition({plotX:x,plotY:y}),this.isHidden=!1),fireEvent(chart,"tooltipRefresh",{text:text,x:x+chart.plotLeft,y:y+chart.plotTop,borderColor:borderColor})},updatePosition:function(point){var chart=this.chart,label=this.label,pos=(this.options.positioner||this.getPosition).call(this,label.width,label.height,point);this.move(mathRound(pos.x),mathRound(pos.y),point.plotX+chart.plotLeft,point.plotY+chart.plotTop)}};var Pointer=Highcharts.Pointer=function(chart,options){this.init(chart,options)};Pointer.prototype={init:function(chart,options){var zoomX,zoomY,chartOptions=options.chart,chartEvents=chartOptions.events,zoomType=useCanVG?"":chartOptions.zoomType,inverted=chart.inverted;this.options=options,this.chart=chart,this.zoomX=zoomX=/x/.test(zoomType),this.zoomY=zoomY=/y/.test(zoomType),this.zoomHor=zoomX&&!inverted||zoomY&&inverted,this.zoomVert=zoomY&&!inverted||zoomX&&inverted,this.runChartClick=chartEvents&&!!chartEvents.click,this.pinchDown=[],this.lastValidTouch={},options.tooltip.enabled&&(chart.tooltip=new Tooltip(chart,options.tooltip)),this.setDOMEvents()},normalize:function(e,chartPosition){var chartX,chartY,ePos;return e=e||win.event,e.target||(e.target=e.srcElement),e=washMouseEvent(e),ePos=e.touches?e.touches.item(0):e,chartPosition||(this.chartPosition=chartPosition=offset(this.chart.container)),ePos.pageX===UNDEFINED?(chartX=mathMax(e.x,e.clientX-chartPosition.left),chartY=e.y):(chartX=ePos.pageX-chartPosition.left,chartY=ePos.pageY-chartPosition.top),extend(e,{chartX:mathRound(chartX),chartY:mathRound(chartY)})},getCoordinates:function(e){var coordinates={xAxis:[],yAxis:[]};return each(this.chart.axes,function(axis){coordinates[axis.isXAxis?"xAxis":"yAxis"].push({axis:axis,value:axis.toValue(e[axis.horiz?"chartX":"chartY"])})}),coordinates},getIndex:function(e){var chart=this.chart;return chart.inverted?chart.plotHeight+chart.plotTop-e.chartY:e.chartX-chart.plotLeft},runPointActions:function(e){var point,points,i,j,anchor,pointer=this,chart=pointer.chart,series=chart.series,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,distance=chart.chartWidth,index=pointer.getIndex(e);if(tooltip&&pointer.options.tooltip.shared&&(!hoverSeries||!hoverSeries.noSharedTooltip)){for(points=[],i=series.length,j=0;i>j;j++)series[j].visible&&series[j].options.enableMouseTracking!==!1&&!series[j].noSharedTooltip&&series[j].tooltipPoints.length&&(point=series[j].tooltipPoints[index],point&&point.series&&(point._dist=mathAbs(index-point.clientX),distance=mathMin(distance,point._dist),points.push(point)));for(i=points.length;i--;)points[i]._dist>distance&&points.splice(i,1);points.length&&points[0].clientX!==pointer.hoverX&&(tooltip.refresh(points,e),pointer.hoverX=points[0].clientX)}hoverSeries&&hoverSeries.tracker?(point=hoverSeries.tooltipPoints[index],point&&point!==hoverPoint&&point.onMouseOver(e)):tooltip&&tooltip.followPointer&&!tooltip.isHidden&&(anchor=tooltip.getAnchor([{}],e),tooltip.updatePosition({plotX:anchor[0],plotY:anchor[1]})),tooltip&&!pointer._onDocumentMouseMove&&(pointer._onDocumentMouseMove=function(e){pointer.onDocumentMouseMove(e)},addEvent(doc,"mousemove",pointer._onDocumentMouseMove)),each(chart.axes,function(axis){axis.drawCrosshair(e,pick(point,hoverPoint))})},reset:function(allowMove){var pointer=this,chart=pointer.chart,hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint,tooltip=chart.tooltip,tooltipPoints=tooltip&&tooltip.shared?chart.hoverPoints:hoverPoint;allowMove=allowMove&&tooltip&&tooltipPoints,allowMove&&splat(tooltipPoints)[0].plotX===UNDEFINED&&(allowMove=!1),allowMove?(tooltip.refresh(tooltipPoints),hoverPoint&&hoverPoint.setState(hoverPoint.state,!0)):(hoverPoint&&hoverPoint.onMouseOut(),hoverSeries&&hoverSeries.onMouseOut(),tooltip&&tooltip.hide(),pointer._onDocumentMouseMove&&(removeEvent(doc,"mousemove",pointer._onDocumentMouseMove),pointer._onDocumentMouseMove=null),each(chart.axes,function(axis){axis.hideCrosshair()}),pointer.hoverX=null)},scaleGroups:function(attribs,clip){var seriesAttribs,chart=this.chart;each(chart.series,function(series){seriesAttribs=attribs||series.getPlotBox(),series.xAxis&&series.xAxis.zoomEnabled&&(series.group.attr(seriesAttribs),series.markerGroup&&(series.markerGroup.attr(seriesAttribs),series.markerGroup.clip(clip?chart.clipRect:null)),series.dataLabelsGroup&&series.dataLabelsGroup.attr(seriesAttribs))
}),chart.clipRect.attr(clip||chart.clipBox)},pinchTranslate:function(zoomHor,zoomVert,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch){zoomHor&&this.pinchTranslateDirection(!0,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch),zoomVert&&this.pinchTranslateDirection(!1,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch)},pinchTranslateDirection:function(horiz,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch,forcedScale){var selectionWH,selectionXY,clipXY,outOfBounds,transformScale,scaleKey,chart=this.chart,xy=horiz?"x":"y",XY=horiz?"X":"Y",sChartXY="chart"+XY,wh=horiz?"width":"height",plotLeftTop=chart["plot"+(horiz?"Left":"Top")],scale=forcedScale||1,inverted=chart.inverted,bounds=chart.bounds[horiz?"h":"v"],singleTouch=1===pinchDown.length,touch0Start=pinchDown[0][sChartXY],touch0Now=touches[0][sChartXY],touch1Start=!singleTouch&&pinchDown[1][sChartXY],touch1Now=!singleTouch&&touches[1][sChartXY],setScale=function(){!singleTouch&&mathAbs(touch0Start-touch1Start)>20&&(scale=forcedScale||mathAbs(touch0Now-touch1Now)/mathAbs(touch0Start-touch1Start)),clipXY=(plotLeftTop-touch0Now)/scale+touch0Start,selectionWH=chart["plot"+(horiz?"Width":"Height")]/scale};setScale(),selectionXY=clipXY,selectionXY<bounds.min?(selectionXY=bounds.min,outOfBounds=!0):selectionXY+selectionWH>bounds.max&&(selectionXY=bounds.max-selectionWH,outOfBounds=!0),outOfBounds?(touch0Now-=.8*(touch0Now-lastValidTouch[xy][0]),singleTouch||(touch1Now-=.8*(touch1Now-lastValidTouch[xy][1])),setScale()):lastValidTouch[xy]=[touch0Now,touch1Now],inverted||(clip[xy]=clipXY-plotLeftTop,clip[wh]=selectionWH),scaleKey=inverted?horiz?"scaleY":"scaleX":"scale"+XY,transformScale=inverted?1/scale:scale,selectionMarker[wh]=selectionWH,selectionMarker[xy]=selectionXY,transform[scaleKey]=scale,transform["translate"+XY]=transformScale*plotLeftTop+(touch0Now-transformScale*touch0Start)},pinch:function(e){var self=this,chart=self.chart,pinchDown=self.pinchDown,followTouchMove=chart.tooltip&&chart.tooltip.options.followTouchMove,touches=e.touches,touchesLength=touches.length,lastValidTouch=self.lastValidTouch,zoomHor=self.zoomHor||self.pinchHor,zoomVert=self.zoomVert||self.pinchVert,hasZoom=zoomHor||zoomVert,selectionMarker=self.selectionMarker,transform={},fireClickEvent=1===touchesLength&&(self.inClass(e.target,PREFIX+"tracker")&&chart.runTrackerClick||chart.runChartClick),clip={};!hasZoom&&!followTouchMove||fireClickEvent||e.preventDefault(),map(touches,function(e){return self.normalize(e)}),"touchstart"===e.type?(each(touches,function(e,i){pinchDown[i]={chartX:e.chartX,chartY:e.chartY}}),lastValidTouch.x=[pinchDown[0].chartX,pinchDown[1]&&pinchDown[1].chartX],lastValidTouch.y=[pinchDown[0].chartY,pinchDown[1]&&pinchDown[1].chartY],each(chart.axes,function(axis){if(axis.zoomEnabled){var bounds=chart.bounds[axis.horiz?"h":"v"],minPixelPadding=axis.minPixelPadding,min=axis.toPixels(axis.dataMin),max=axis.toPixels(axis.dataMax),absMin=mathMin(min,max),absMax=mathMax(min,max);bounds.min=mathMin(axis.pos,absMin-minPixelPadding),bounds.max=mathMax(axis.pos+axis.len,absMax+minPixelPadding)}})):pinchDown.length&&(selectionMarker||(self.selectionMarker=selectionMarker=extend({destroy:noop},chart.plotBox)),self.pinchTranslate(zoomHor,zoomVert,pinchDown,touches,transform,selectionMarker,clip,lastValidTouch),self.hasPinched=hasZoom,self.scaleGroups(transform,clip),!hasZoom&&followTouchMove&&1===touchesLength&&this.runPointActions(self.normalize(e)))},dragStart:function(e){var chart=this.chart;chart.mouseIsDown=e.type,chart.cancelClick=!1,chart.mouseDownX=this.mouseDownX=e.chartX,chart.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var clickedInside,size,chart=this.chart,chartOptions=chart.options.chart,chartX=e.chartX,chartY=e.chartY,zoomHor=this.zoomHor,zoomVert=this.zoomVert,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,mouseDownX=this.mouseDownX,mouseDownY=this.mouseDownY;plotLeft>chartX?chartX=plotLeft:chartX>plotLeft+plotWidth&&(chartX=plotLeft+plotWidth),plotTop>chartY?chartY=plotTop:chartY>plotTop+plotHeight&&(chartY=plotTop+plotHeight),this.hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+Math.pow(mouseDownY-chartY,2)),this.hasDragged>10&&(clickedInside=chart.isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop),chart.hasCartesianSeries&&(this.zoomX||this.zoomY)&&clickedInside&&(this.selectionMarker||(this.selectionMarker=chart.renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:chartOptions.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&zoomHor&&(size=chartX-mouseDownX,this.selectionMarker.attr({width:mathAbs(size),x:(size>0?0:size)+mouseDownX})),this.selectionMarker&&zoomVert&&(size=chartY-mouseDownY,this.selectionMarker.attr({height:mathAbs(size),y:(size>0?0:size)+mouseDownY})),clickedInside&&!this.selectionMarker&&chartOptions.panning&&chart.pan(e,chartOptions.panning))},drop:function(e){var chart=this.chart,hasPinched=this.hasPinched;if(this.selectionMarker){var runZoom,selectionData={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},selectionBox=this.selectionMarker,selectionLeft=selectionBox.x,selectionTop=selectionBox.y;(this.hasDragged||hasPinched)&&(each(chart.axes,function(axis){if(axis.zoomEnabled){var horiz=axis.horiz,selectionMin=axis.toValue(horiz?selectionLeft:selectionTop),selectionMax=axis.toValue(horiz?selectionLeft+selectionBox.width:selectionTop+selectionBox.height);isNaN(selectionMin)||isNaN(selectionMax)||(selectionData[axis.coll].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)}),runZoom=!0)}}),runZoom&&fireEvent(chart,"selection",selectionData,function(args){chart.zoom(extend(args,hasPinched?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),hasPinched&&this.scaleGroups()}chart&&(css(chart.container,{cursor:chart._cursor}),chart.cancelClick=this.hasDragged>10,chart.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){this.drop(e)},onDocumentMouseMove:function(e){var chart=this.chart,chartPosition=this.chartPosition,hoverSeries=chart.hoverSeries;e=this.normalize(e,chartPosition),chartPosition&&hoverSeries&&!this.inClass(e.target,"highcharts-tracker")&&!chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(e){var chart=this.chart;e=this.normalize(e),"mousedown"===chart.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)||chart.openMenu||this.runPointActions(e)},inClass:function(element,className){for(var elemClassName;element;){if(elemClassName=attr(element,"class")){if(-1!==elemClassName.indexOf(className))return!0;if(-1!==elemClassName.indexOf(PREFIX+"container"))return!1}element=element.parentNode}},onTrackerMouseOut:function(e){var series=this.chart.hoverSeries,relatedTarget=e.relatedTarget||e.toElement,relatedSeries=relatedTarget&&relatedTarget.point&&relatedTarget.point.series;!series||series.options.stickyTracking||this.inClass(relatedTarget,PREFIX+"tooltip")||relatedSeries===series||series.onMouseOut()},onContainerClick:function(e){var chartPosition,plotX,plotY,chart=this.chart,hoverPoint=chart.hoverPoint,plotLeft=chart.plotLeft,plotTop=chart.plotTop,inverted=chart.inverted;e=this.normalize(e),e.cancelBubble=!0,chart.cancelClick||(hoverPoint&&this.inClass(e.target,PREFIX+"tracker")?(chartPosition=this.chartPosition,plotX=hoverPoint.plotX,plotY=hoverPoint.plotY,extend(hoverPoint,{pageX:chartPosition.left+plotLeft+(inverted?chart.plotWidth-plotY:plotX),pageY:chartPosition.top+plotTop+(inverted?chart.plotHeight-plotX:plotY)}),fireEvent(hoverPoint.series,"click",extend(e,{point:hoverPoint})),chart.hoverPoint&&hoverPoint.firePointEvent("click",e)):(extend(e,this.getCoordinates(e)),chart.isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)&&fireEvent(chart,"click",e)))},onContainerTouchStart:function(e){var chart=this.chart;1===e.touches.length?(e=this.normalize(e),chart.isInsidePlot(e.chartX-chart.plotLeft,e.chartY-chart.plotTop)?(this.runPointActions(e),this.pinch(e)):this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){this.drop(e)},setDOMEvents:function(){var events,pointer=this,container=pointer.chart.container;this._events=events=[[container,"onmousedown","onContainerMouseDown"],[container,"onmousemove","onContainerMouseMove"],[container,"onclick","onContainerClick"],[container,"mouseleave","onContainerMouseLeave"],[doc,"mouseup","onDocumentMouseUp"]],hasTouch&&events.push([container,"ontouchstart","onContainerTouchStart"],[container,"ontouchmove","onContainerTouchMove"],[doc,"touchend","onDocumentTouchEnd"]),each(events,function(eventConfig){pointer["_"+eventConfig[2]]=function(e){pointer[eventConfig[2]](e)},0===eventConfig[1].indexOf("on")?eventConfig[0][eventConfig[1]]=pointer["_"+eventConfig[2]]:addEvent(eventConfig[0],eventConfig[1],pointer["_"+eventConfig[2]])})},destroy:function(){var pointer=this;each(pointer._events,function(eventConfig){0===eventConfig[1].indexOf("on")?eventConfig[0][eventConfig[1]]=null:removeEvent(eventConfig[0],eventConfig[1],pointer["_"+eventConfig[2]])}),delete pointer._events,clearInterval(pointer.tooltipTimeout)}};var TrackerMixin=Highcharts.TrackerMixin={drawTrackerPoint:function(){var series=this,chart=series.chart,pointer=chart.pointer,cursor=series.options.cursor,css=cursor&&{cursor:cursor},onMouseOver=function(e){var point,target=e.target;for(chart.hoverSeries!==series&&series.onMouseOver();target&&!point;)point=target.point,target=target.parentNode;point!==UNDEFINED&&point!==chart.hoverPoint&&point.onMouseOver(e)};each(series.points,function(point){point.graphic&&(point.graphic.element.point=point),point.dataLabel&&(point.dataLabel.element.point=point)}),series._hasTracking||(each(series.trackerGroups,function(key){series[key]&&(series[key].addClass(PREFIX+"tracker").on("mouseover",onMouseOver).on("mouseout",function(e){pointer.onTrackerMouseOut(e)}).css(css),hasTouch&&series[key].on("touchstart",onMouseOver))}),series._hasTracking=!0)},drawTrackerGraph:function(){var singlePoint,i,series=this,options=series.options,trackByArea=options.trackByArea,trackerPath=[].concat(trackByArea?series.areaPath:series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,pointer=chart.pointer,renderer=chart.renderer,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,onMouseOver=function(){chart.hoverSeries!==series&&series.onMouseOver()};if(trackerPathLength&&!trackByArea)for(i=trackerPathLength+1;i--;)trackerPath[i]===M&&trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L),(i&&trackerPath[i]===M||i===trackerPathLength)&&trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);for(i=0;i<singlePoints.length;i++)singlePoint=singlePoints[i],trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);tracker?tracker.attr({d:trackerPath}):(series.tracker=renderer.path(trackerPath).attr({"stroke-linejoin":"round",visibility:series.visible?VISIBLE:HIDDEN,stroke:TRACKER_FILL,fill:trackByArea?TRACKER_FILL:NONE,"stroke-width":options.lineWidth+(trackByArea?0:2*snap),zIndex:2}).add(series.group),each([series.tracker,series.markerGroup],function(tracker){tracker.addClass(PREFIX+"tracker").on("mouseover",onMouseOver).on("mouseout",function(e){pointer.onTrackerMouseOut(e)}).css(css),hasTouch&&tracker.on("touchstart",onMouseOver)}))}};if(win.PointerEvent||win.MSPointerEvent){var touches={};Pointer.prototype.getWebkitTouches=function(){var key,fake=[];fake.item=function(i){return this[i]};for(key in touches)touches.hasOwnProperty(key)&&fake.push({pageX:touches[key].pageX,pageY:touches[key].pageY,target:touches[key].target});return fake},wrap(Pointer.prototype,"init",function(proceed,chart,options){chart.container.style["-ms-touch-action"]=chart.container.style["touch-action"]="none",proceed.call(this,chart,options)}),wrap(Pointer.prototype,"setDOMEvents",function(proceed){var eventmap,pointer=this;proceed.apply(this,Array.prototype.slice.call(arguments,1)),eventmap=[[this.chart.container,"PointerDown","touchstart","onContainerTouchStart",function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}}],[this.chart.container,"PointerMove","touchmove","onContainerTouchMove",function(e){touches[e.pointerId]={pageX:e.pageX,pageY:e.pageY},touches[e.pointerId].target||(touches[e.pointerId].target=e.currentTarget)}],[document,"PointerUp","touchend","onDocumentTouchEnd",function(e){delete touches[e.pointerId]}]],each(eventmap,function(eventConfig){addEvent(eventConfig[0],window.PointerEvent?eventConfig[1].toLowerCase():"MS"+eventConfig[1],function(e){e=e.originalEvent,("touch"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&(eventConfig[4](e),pointer[eventConfig[3]]({type:eventConfig[2],target:e.currentTarget,preventDefault:noop,touches:pointer.getWebkitTouches()}))})})})}var Legend=Highcharts.Legend=function(chart,options){this.init(chart,options)};Legend.prototype={init:function(chart,options){var legend=this,itemStyle=options.itemStyle,padding=pick(options.padding,8),itemMarginTop=options.itemMarginTop||0;this.options=options,options.enabled&&(legend.baseline=pInt(itemStyle.fontSize)+3+itemMarginTop,legend.itemStyle=itemStyle,legend.itemHiddenStyle=merge(itemStyle,options.itemHiddenStyle),legend.itemMarginTop=itemMarginTop,legend.padding=padding,legend.initialItemX=padding,legend.initialItemY=padding-5,legend.maxItemWidth=0,legend.chart=chart,legend.itemHeight=0,legend.lastLineHeight=0,legend.symbolWidth=pick(options.symbolWidth,16),legend.pages=[],legend.render(),addEvent(legend.chart,"endResize",function(){legend.positionCheckboxes()}))},colorizeItem:function(item,visible){var key,val,legend=this,options=legend.options,legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=legend.itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?item.legendColor||item.color:hiddenColor,markerOptions=item.options&&item.options.marker,symbolAttr={stroke:symbolColor,fill:symbolColor};if(legendItem&&legendItem.css({fill:textColor,color:textColor}),legendLine&&legendLine.attr({stroke:symbolColor}),legendSymbol){if(markerOptions&&legendSymbol.isMarker){markerOptions=item.convertAttribs(markerOptions);for(key in markerOptions)val=markerOptions[key],val!==UNDEFINED&&(symbolAttr[key]=val)}legendSymbol.attr(symbolAttr)}},positionItem:function(item){var legend=this,options=legend.options,symbolPadding=options.symbolPadding,ltr=!options.rtl,legendItemPos=item._legendItemPos,itemX=legendItemPos[0],itemY=legendItemPos[1],checkbox=item.checkbox;item.legendGroup&&item.legendGroup.translate(ltr?itemX:legend.legendWidth-itemX-2*symbolPadding-4,itemY),checkbox&&(checkbox.x=itemX,checkbox.y=itemY)},destroyItem:function(item){var checkbox=item.checkbox;each(["legendItem","legendLine","legendSymbol","legendGroup"],function(key){item[key]&&(item[key]=item[key].destroy())}),checkbox&&discardElement(item.checkbox)},destroy:function(){var legend=this,legendGroup=legend.group,box=legend.box;box&&(legend.box=box.destroy()),legendGroup&&(legend.group=legendGroup.destroy())},positionCheckboxes:function(scrollOffset){var translateY,alignAttr=this.group.alignAttr,clipHeight=this.clipHeight||this.legendHeight;alignAttr&&(translateY=alignAttr.translateY,each(this.allItems,function(item){var top,checkbox=item.checkbox;checkbox&&(top=translateY+checkbox.y+(scrollOffset||0)+3,css(checkbox,{left:alignAttr.translateX+item.legendItemWidth+checkbox.x-20+PX,top:top+PX,display:top>translateY-6&&translateY+clipHeight-6>top?"":NONE}))}))},renderTitle:function(){var bBox,options=this.options,padding=this.padding,titleOptions=options.title,titleHeight=0;titleOptions.text&&(this.title||(this.title=this.chart.renderer.label(titleOptions.text,padding-3,padding-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(titleOptions.style).add(this.group)),bBox=this.title.getBBox(),titleHeight=bBox.height,this.offsetWidth=bBox.width,this.contentGroup.attr({translateY:titleHeight})),this.titleHeight=titleHeight},renderItem:function(item){var itemHeight,bBox,itemWidth,legend=this,chart=legend.chart,renderer=chart.renderer,options=legend.options,horizontal="horizontal"===options.layout,symbolWidth=legend.symbolWidth,symbolPadding=options.symbolPadding,itemStyle=legend.itemStyle,itemHiddenStyle=legend.itemHiddenStyle,padding=legend.padding,itemDistance=horizontal?pick(options.itemDistance,8):0,ltr=!options.rtl,widthOption=options.width,itemMarginBottom=options.itemMarginBottom||0,itemMarginTop=legend.itemMarginTop,initialItemX=legend.initialItemX,li=item.legendItem,series=item.series&&item.series.drawLegendSymbol?item.series:item,seriesOptions=series.options,showCheckbox=seriesOptions&&seriesOptions.showCheckbox,useHTML=options.useHTML;li||(item.legendGroup=renderer.g("legend-item").attr({zIndex:1}).add(legend.scrollGroup),series.drawLegendSymbol(legend,item),item.legendItem=li=renderer.text(options.labelFormat?format(options.labelFormat,item):options.labelFormatter.call(item),ltr?symbolWidth+symbolPadding:-symbolPadding,legend.baseline,useHTML).css(merge(item.visible?itemStyle:itemHiddenStyle)).attr({align:ltr?"left":"right",zIndex:2}).add(item.legendGroup),(useHTML?li:item.legendGroup).on("mouseover",function(){item.setState(HOVER_STATE),li.css(legend.options.itemHoverStyle)}).on("mouseout",function(){li.css(item.visible?itemStyle:itemHiddenStyle),item.setState()}).on("click",function(event){var strLegendItemClick="legendItemClick",fnLegendItemClick=function(){item.setVisible()};event={browserEvent:event},item.firePointEvent?item.firePointEvent(strLegendItemClick,event,fnLegendItemClick):fireEvent(item,strLegendItemClick,event,fnLegendItemClick)}),legend.colorizeItem(item,item.visible),showCheckbox&&(item.checkbox=createElement("input",{type:"checkbox",checked:item.selected,defaultChecked:item.selected},options.itemCheckboxStyle,chart.container),addEvent(item.checkbox,"click",function(event){var target=event.target;fireEvent(item,"checkboxClick",{checked:target.checked},function(){item.select()})}))),bBox=li.getBBox(),itemWidth=item.legendItemWidth=options.itemWidth||item.legendItemWidth||symbolWidth+symbolPadding+bBox.width+itemDistance+(showCheckbox?20:0),legend.itemHeight=itemHeight=mathRound(item.legendItemHeight||bBox.height),horizontal&&legend.itemX-initialItemX+itemWidth>(widthOption||chart.chartWidth-2*padding-initialItemX)&&(legend.itemX=initialItemX,legend.itemY+=itemMarginTop+legend.lastLineHeight+itemMarginBottom,legend.lastLineHeight=0),legend.maxItemWidth=mathMax(legend.maxItemWidth,itemWidth),legend.lastItemY=itemMarginTop+legend.itemY+itemMarginBottom,legend.lastLineHeight=mathMax(itemHeight,legend.lastLineHeight),item._legendItemPos=[legend.itemX,legend.itemY],horizontal?legend.itemX+=itemWidth:(legend.itemY+=itemMarginTop+itemHeight+itemMarginBottom,legend.lastLineHeight=itemHeight),legend.offsetWidth=widthOption||mathMax((horizontal?legend.itemX-initialItemX-itemDistance:itemWidth)+padding,legend.offsetWidth)},getAllItems:function(){var allItems=[];return each(this.chart.series,function(series){var seriesOptions=series.options;pick(seriesOptions.showInLegend,defined(seriesOptions.linkedTo)?!1:UNDEFINED,!0)&&(allItems=allItems.concat(series.legendItems||("point"===seriesOptions.legendType?series.data:series)))}),allItems},render:function(){var allItems,display,legendWidth,legendHeight,legend=this,chart=legend.chart,renderer=chart.renderer,legendGroup=legend.group,box=legend.box,options=legend.options,padding=legend.padding,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor;legend.itemX=legend.initialItemX,legend.itemY=legend.initialItemY,legend.offsetWidth=0,legend.lastItemY=0,legendGroup||(legend.group=legendGroup=renderer.g("legend").attr({zIndex:7}).add(),legend.contentGroup=renderer.g().attr({zIndex:1}).add(legendGroup),legend.scrollGroup=renderer.g().add(legend.contentGroup)),legend.renderTitle(),allItems=legend.getAllItems(),stableSort(allItems,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)}),options.reversed&&allItems.reverse(),legend.allItems=allItems,legend.display=display=!!allItems.length,each(allItems,function(item){legend.renderItem(item)}),legendWidth=options.width||legend.offsetWidth,legendHeight=legend.lastItemY+legend.lastLineHeight+legend.titleHeight,legendHeight=legend.handleOverflow(legendHeight),(legendBorderWidth||legendBackgroundColor)&&(legendWidth+=padding,legendHeight+=padding,box?legendWidth>0&&legendHeight>0&&(box[box.isNew?"attr":"animate"](box.crisp(null,null,null,legendWidth,legendHeight)),box.isNew=!1):(legend.box=box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,"stroke-width":legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow),box.isNew=!0),box[display?"show":"hide"]()),legend.legendWidth=legendWidth,legend.legendHeight=legendHeight,each(allItems,function(item){legend.positionItem(item)}),display&&legendGroup.align(extend({width:legendWidth,height:legendHeight},options),!0,"spacingBox"),chart.isResizing||this.positionCheckboxes()},handleOverflow:function(legendHeight){var clipHeight,lastY,legend=this,chart=this.chart,renderer=chart.renderer,options=this.options,optionsY=options.y,alignTop="top"===options.verticalAlign,spaceHeight=chart.spacingBox.height+(alignTop?-optionsY:optionsY)-this.padding,maxHeight=options.maxHeight,clipRect=this.clipRect,navOptions=options.navigation,animation=pick(navOptions.animation,!0),arrowSize=navOptions.arrowSize||12,nav=this.nav,pages=this.pages,allItems=this.allItems;return"horizontal"===options.layout&&(spaceHeight/=2),maxHeight&&(spaceHeight=mathMin(spaceHeight,maxHeight)),pages.length=0,legendHeight>spaceHeight&&!options.useHTML?(this.clipHeight=clipHeight=spaceHeight-20-this.titleHeight-this.padding,this.currentPage=pick(this.currentPage,1),this.fullHeight=legendHeight,each(allItems,function(item,i){var y=item._legendItemPos[1],h=mathRound(item.legendItem.bBox.height),len=pages.length;(!len||y-pages[len-1]>clipHeight)&&pages.push(lastY||y),i===allItems.length-1&&y+h-pages[len-1]>clipHeight&&pages.push(y),y!==lastY&&(lastY=y)}),clipRect||(clipRect=legend.clipRect=renderer.clipRect(0,this.padding,9999,0),legend.contentGroup.clip(clipRect)),clipRect.attr({height:clipHeight}),nav||(this.nav=nav=renderer.g().attr({zIndex:1}).add(this.group),this.up=renderer.symbol("triangle",0,0,arrowSize,arrowSize).on("click",function(){legend.scroll(-1,animation)}).add(nav),this.pager=renderer.text("",15,10).css(navOptions.style).add(nav),this.down=renderer.symbol("triangle-down",0,0,arrowSize,arrowSize).on("click",function(){legend.scroll(1,animation)}).add(nav)),legend.scroll(0),legendHeight=spaceHeight):nav&&(clipRect.attr({height:chart.chartHeight}),nav.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),legendHeight},scroll:function(scrollBy,animation){var scrollOffset,pages=this.pages,pageCount=pages.length,currentPage=this.currentPage+scrollBy,clipHeight=this.clipHeight,navOptions=this.options.navigation,activeColor=navOptions.activeColor,inactiveColor=navOptions.inactiveColor,pager=this.pager,padding=this.padding;currentPage>pageCount&&(currentPage=pageCount),currentPage>0&&(animation!==UNDEFINED&&setAnimation(animation,this.chart),this.nav.attr({translateX:padding,translateY:clipHeight+this.padding+7+this.titleHeight,visibility:VISIBLE}),this.up.attr({fill:1===currentPage?inactiveColor:activeColor}).css({cursor:1===currentPage?"default":"pointer"}),pager.attr({text:currentPage+"/"+pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:currentPage===pageCount?inactiveColor:activeColor}).css({cursor:currentPage===pageCount?"default":"pointer"}),scrollOffset=-pages[currentPage-1]+this.initialItemY,this.scrollGroup.animate({translateY:scrollOffset}),this.currentPage=currentPage,this.positionCheckboxes(scrollOffset))}};var LegendSymbolMixin=Highcharts.LegendSymbolMixin={drawRectangle:function(legend,item){var symbolHeight=legend.options.symbolHeight||12;item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-5-symbolHeight/2,legend.symbolWidth,symbolHeight,pick(legend.options.symbolRadius,2)).attr({zIndex:3}).add(item.legendGroup)},drawLineMarker:function(legend){var radius,legendSymbol,attr,options=this.options,markerOptions=options.marker,legendOptions=legend.options,symbolWidth=legend.symbolWidth,renderer=this.chart.renderer,legendItemGroup=this.legendGroup,verticalCenter=legend.baseline-mathRound(.3*renderer.fontMetrics(legendOptions.itemStyle.fontSize).b);options.lineWidth&&(attr={"stroke-width":options.lineWidth},options.dashStyle&&(attr.dashstyle=options.dashStyle),this.legendLine=renderer.path([M,0,verticalCenter,L,symbolWidth,verticalCenter]).attr(attr).add(legendItemGroup)),markerOptions&&markerOptions.enabled&&(radius=markerOptions.radius,this.legendSymbol=legendSymbol=renderer.symbol(this.symbol,symbolWidth/2-radius,verticalCenter-radius,2*radius,2*radius).add(legendItemGroup),legendSymbol.isMarker=!0)}};/Trident\/7\.0/.test(userAgent)&&wrap(Legend.prototype,"positionItem",function(proceed,item){var legend=this,runPositionItem=function(){item._legendItemPos&&proceed.call(legend,item)};legend.chart.renderer.forExport?runPositionItem():setTimeout(runPositionItem)}),Chart.prototype={init:function(userOptions,callback){var options,seriesOptions=userOptions.series;userOptions.series=null,options=merge(defaultOptions,userOptions),options.series=userOptions.series=seriesOptions,this.userOptions=userOptions;var optionsChart=options.chart;this.margin=this.splashArray("margin",optionsChart),this.spacing=this.splashArray("spacing",optionsChart);var chartEvents=optionsChart.events;this.bounds={h:{},v:{}},this.callback=callback,this.isResizing=0,this.options=options,this.axes=[],this.series=[],this.hasCartesianSeries=optionsChart.showAxes;var eventType,chart=this;if(chart.index=charts.length,charts.push(chart),optionsChart.reflow!==!1&&addEvent(chart,"load",function(){chart.initReflow()}),chartEvents)for(eventType in chartEvents)addEvent(chart,eventType,chartEvents[eventType]);chart.xAxis=[],chart.yAxis=[],chart.animation=useCanVG?!1:pick(optionsChart.animation,!0),chart.pointCount=0,chart.counters=new ChartCounters,chart.firstRender()},initSeries:function(options){var series,chart=this,optionsChart=chart.options.chart,type=options.type||optionsChart.type||optionsChart.defaultSeriesType,constr=seriesTypes[type];return constr||error(17,!0),series=new constr,series.init(this,options),series},isInsidePlot:function(plotX,plotY,inverted){var x=inverted?plotY:plotX,y=inverted?plotX:plotY;return x>=0&&x<=this.plotWidth&&y>=0&&y<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&each(this.axes,function(axis){axis.adjustTickAmount()}),this.maxTicks=null},redraw:function(animation){var hasStackedSeries,hasDirtyStacks,serie,chart=this,axes=chart.axes,series=chart.series,pointer=chart.pointer,legend=chart.legend,redrawLegend=chart.isDirtyLegend,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,renderer=chart.renderer,isHiddenChart=renderer.isHidden(),afterRedraw=[];for(setAnimation(animation,chart),isHiddenChart&&chart.cloneRenderTo(),chart.layOutTitles();i--;)if(serie=series[i],serie.options.stacking&&(hasStackedSeries=!0,serie.isDirty)){hasDirtyStacks=!0;break}if(hasDirtyStacks)for(i=seriesLength;i--;)serie=series[i],serie.options.stacking&&(serie.isDirty=!0);each(series,function(serie){serie.isDirty&&"point"===serie.options.legendType&&(redrawLegend=!0)}),redrawLegend&&legend.options.enabled&&(legend.render(),chart.isDirtyLegend=!1),hasStackedSeries&&chart.getStacks(),chart.hasCartesianSeries&&(chart.isResizing||(chart.maxTicks=null,each(axes,function(axis){axis.setScale()})),chart.adjustTickAmounts(),chart.getMargins(),each(axes,function(axis){axis.isDirty&&(isDirtyBox=!0)}),each(axes,function(axis){axis.isDirtyExtremes&&(axis.isDirtyExtremes=!1,afterRedraw.push(function(){fireEvent(axis,"afterSetExtremes",extend(axis.eventArgs,axis.getExtremes())),delete axis.eventArgs})),(isDirtyBox||hasStackedSeries)&&axis.redraw()})),isDirtyBox&&chart.drawChartBox(),each(series,function(serie){serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)&&serie.redraw()}),pointer&&pointer.reset&&pointer.reset(!0),renderer.draw(),fireEvent(chart,"redraw"),isHiddenChart&&chart.cloneRenderTo(!0),each(afterRedraw,function(callback){callback.call()})},get:function(id){var i,j,points,chart=this,axes=chart.axes,series=chart.series;for(i=0;i<axes.length;i++)if(axes[i].options.id===id)return axes[i];for(i=0;i<series.length;i++)if(series[i].options.id===id)return series[i];for(i=0;i<series.length;i++)for(points=series[i].points||[],j=0;j<points.length;j++)if(points[j].id===id)return points[j];return null},getAxes:function(){var optionsArray,axis,chart=this,options=this.options,xAxisOptions=options.xAxis=splat(options.xAxis||{}),yAxisOptions=options.yAxis=splat(options.yAxis||{});each(xAxisOptions,function(axis,i){axis.index=i,axis.isX=!0}),each(yAxisOptions,function(axis,i){axis.index=i}),optionsArray=xAxisOptions.concat(yAxisOptions),each(optionsArray,function(axisOptions){axis=new Axis(chart,axisOptions)}),chart.adjustTickAmounts()},getSelectedPoints:function(){var points=[];return each(this.series,function(serie){points=points.concat(grep(serie.points||[],function(point){return point.selected}))}),points},getSelectedSeries:function(){return grep(this.series,function(serie){return serie.selected})},getStacks:function(){var chart=this;each(chart.yAxis,function(axis){axis.stacks&&axis.hasVisibleSeries&&(axis.oldStacks=axis.stacks)}),each(chart.series,function(series){!series.options.stacking||series.visible!==!0&&chart.options.chart.ignoreHiddenSeries!==!1||(series.stackKey=series.type+pick(series.options.stack,""))})},showResetZoom:function(){var chart=this,lang=defaultOptions.lang,btnOptions=chart.options.chart.resetZoomButton,theme=btnOptions.theme,states=theme.states,alignTo="chart"===btnOptions.relativeTo?null:"plotBox";this.resetZoomButton=chart.renderer.button(lang.resetZoom,null,null,function(){chart.zoomOut()},theme,states&&states.hover).attr({align:btnOptions.position.align,title:lang.resetZoomTitle}).add().align(btnOptions.position,!1,alignTo)},zoomOut:function(){var chart=this;fireEvent(chart,"selection",{resetSelection:!0},function(){chart.zoom()})},zoom:function(event){var hasZoomed,resetZoomButton,chart=this,pointer=chart.pointer,displayButton=!1;!event||event.resetSelection?each(chart.axes,function(axis){hasZoomed=axis.zoom()}):each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis,isXAxis=axis.isXAxis;(pointer[isXAxis?"zoomX":"zoomY"]||pointer[isXAxis?"pinchX":"pinchY"])&&(hasZoomed=axis.zoom(axisData.min,axisData.max),axis.displayBtn&&(displayButton=!0))}),resetZoomButton=chart.resetZoomButton,displayButton&&!resetZoomButton?chart.showResetZoom():!displayButton&&isObject(resetZoomButton)&&(chart.resetZoomButton=resetZoomButton.destroy()),hasZoomed&&chart.redraw(pick(chart.options.chart.animation,event&&event.animation,chart.pointCount<100))},pan:function(e,panning){var doRedraw,chart=this,hoverPoints=chart.hoverPoints;hoverPoints&&each(hoverPoints,function(point){point.setState()}),each("xy"===panning?[1,0]:[1],function(isX){var mousePos=e[isX?"chartX":"chartY"],axis=chart[isX?"xAxis":"yAxis"][0],startPos=chart[isX?"mouseDownX":"mouseDownY"],halfPointRange=(axis.pointRange||0)/2,extremes=axis.getExtremes(),newMin=axis.toValue(startPos-mousePos,!0)+halfPointRange,newMax=axis.toValue(startPos+chart[isX?"plotWidth":"plotHeight"]-mousePos,!0)-halfPointRange;axis.series.length&&newMin>mathMin(extremes.dataMin,extremes.min)&&newMax<mathMax(extremes.dataMax,extremes.max)&&(axis.setExtremes(newMin,newMax,!1,!1,{trigger:"pan"}),doRedraw=!0),chart[isX?"mouseDownX":"mouseDownY"]=mousePos}),doRedraw&&chart.redraw(!1),css(chart.container,{cursor:"move"})},setTitle:function(titleOptions,subtitleOptions){var chartTitleOptions,chartSubtitleOptions,chart=this,options=chart.options;
chartTitleOptions=options.title=merge(options.title,titleOptions),chartSubtitleOptions=options.subtitle=merge(options.subtitle,subtitleOptions),each([["title",titleOptions,chartTitleOptions],["subtitle",subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];title&&titleOptions&&(chart[name]=title=title.destroy()),chartTitleOptions&&chartTitleOptions.text&&!title&&(chart[name]=chart.renderer.text(chartTitleOptions.text,0,0,chartTitleOptions.useHTML).attr({align:chartTitleOptions.align,"class":PREFIX+name,zIndex:chartTitleOptions.zIndex||4}).css(chartTitleOptions.style).add())}),chart.layOutTitles()},layOutTitles:function(){var titleOffset=0,title=this.title,subtitle=this.subtitle,options=this.options,titleOptions=options.title,subtitleOptions=options.subtitle,autoWidth=this.spacingBox.width-44;title&&(title.css({width:(titleOptions.width||autoWidth)+PX}).align(extend({y:15},titleOptions),!1,"spacingBox"),titleOptions.floating||titleOptions.verticalAlign||(titleOffset=title.getBBox().height,titleOffset>=18&&25>=titleOffset&&(titleOffset=15))),subtitle&&(subtitle.css({width:(subtitleOptions.width||autoWidth)+PX}).align(extend({y:titleOffset+titleOptions.margin},subtitleOptions),!1,"spacingBox"),subtitleOptions.floating||subtitleOptions.verticalAlign||(titleOffset=mathCeil(titleOffset+subtitle.getBBox().height))),this.titleOffset=titleOffset},getChartSize:function(){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderToClone||chart.renderTo;chart.containerWidth=adapterRun(renderTo,"width"),chart.containerHeight=adapterRun(renderTo,"height"),chart.chartWidth=mathMax(0,optionsChart.width||chart.containerWidth||600),chart.chartHeight=mathMax(0,pick(optionsChart.height,chart.containerHeight>19?chart.containerHeight:400))},cloneRenderTo:function(revert){var clone=this.renderToClone,container=this.container;revert?clone&&(this.renderTo.appendChild(container),discardElement(clone),delete this.renderToClone):(container&&container.parentNode===this.renderTo&&this.renderTo.removeChild(container),this.renderToClone=clone=this.renderTo.cloneNode(0),css(clone,{position:ABSOLUTE,top:"-9999px",display:"block"}),doc.body.appendChild(clone),container&&clone.appendChild(container))},getContainer:function(){var container,chartWidth,chartHeight,renderTo,oldChartIndex,containerId,chart=this,optionsChart=chart.options.chart,indexAttrName="data-highcharts-chart";chart.renderTo=renderTo=optionsChart.renderTo,containerId=PREFIX+idCounter++,isString(renderTo)&&(chart.renderTo=renderTo=doc.getElementById(renderTo)),renderTo||error(13,!0),oldChartIndex=pInt(attr(renderTo,indexAttrName)),!isNaN(oldChartIndex)&&charts[oldChartIndex]&&charts[oldChartIndex].destroy(),attr(renderTo,indexAttrName,chart.index),renderTo.innerHTML="",renderTo.offsetWidth||chart.cloneRenderTo(),chart.getChartSize(),chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chart.container=container=createElement(DIV,{className:PREFIX+"container"+(optionsChart.className?" "+optionsChart.className:""),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},optionsChart.style),chart.renderToClone||renderTo),chart._cursor=container.style.cursor,chart.renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,!0):new Renderer(container,chartWidth,chartHeight),useCanVG&&chart.renderer.create(chart,container,chartWidth,chartHeight)},getMargins:function(){var axisOffset,chart=this,spacing=chart.spacing,legend=chart.legend,margin=chart.margin,legendOptions=chart.options.legend,legendMargin=pick(legendOptions.margin,10),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset=chart.titleOffset;chart.resetMargins(),axisOffset=chart.axisOffset,titleOffset&&!defined(margin[0])&&(chart.plotTop=mathMax(chart.plotTop,titleOffset+chart.options.title.margin+spacing[0])),legend.display&&!legendOptions.floating&&("right"===align?defined(margin[1])||(chart.marginRight=mathMax(chart.marginRight,legend.legendWidth-legendX+legendMargin+spacing[1])):"left"===align?defined(margin[3])||(chart.plotLeft=mathMax(chart.plotLeft,legend.legendWidth+legendX+legendMargin+spacing[3])):"top"===verticalAlign?defined(margin[0])||(chart.plotTop=mathMax(chart.plotTop,legend.legendHeight+legendY+legendMargin+spacing[0])):"bottom"===verticalAlign&&(defined(margin[2])||(chart.marginBottom=mathMax(chart.marginBottom,legend.legendHeight-legendY+legendMargin+spacing[2])))),chart.extraBottomMargin&&(chart.marginBottom+=chart.extraBottomMargin),chart.extraTopMargin&&(chart.plotTop+=chart.extraTopMargin),chart.hasCartesianSeries&&each(chart.axes,function(axis){axis.getOffset()}),defined(margin[3])||(chart.plotLeft+=axisOffset[3]),defined(margin[0])||(chart.plotTop+=axisOffset[0]),defined(margin[2])||(chart.marginBottom+=axisOffset[2]),defined(margin[1])||(chart.marginRight+=axisOffset[1]),chart.setChartSize()},reflow:function(e){var chart=this,optionsChart=chart.options.chart,renderTo=chart.renderTo,width=optionsChart.width||adapterRun(renderTo,"width"),height=optionsChart.height||adapterRun(renderTo,"height"),target=e?e.target:win,doReflow=function(){chart.container&&(chart.setSize(width,height,!1),chart.hasUserSize=null)};chart.hasUserSize||!width||!height||target!==win&&target!==doc||((width!==chart.containerWidth||height!==chart.containerHeight)&&(clearTimeout(chart.reflowTimeout),e?chart.reflowTimeout=setTimeout(doReflow,100):doReflow()),chart.containerWidth=width,chart.containerHeight=height)},initReflow:function(){var chart=this,reflow=function(e){chart.reflow(e)};addEvent(win,"resize",reflow),addEvent(chart,"destroy",function(){removeEvent(win,"resize",reflow)})},setSize:function(width,height,animation){var chartWidth,chartHeight,fireEndResize,chart=this;chart.isResizing+=1,fireEndResize=function(){chart&&fireEvent(chart,"endResize",null,function(){chart.isResizing-=1})},setAnimation(animation,chart),chart.oldChartHeight=chart.chartHeight,chart.oldChartWidth=chart.chartWidth,defined(width)&&(chart.chartWidth=chartWidth=mathMax(0,mathRound(width)),chart.hasUserSize=!!chartWidth),defined(height)&&(chart.chartHeight=chartHeight=mathMax(0,mathRound(height))),(globalAnimation?animate:css)(chart.container,{width:chartWidth+PX,height:chartHeight+PX},globalAnimation),chart.setChartSize(!0),chart.renderer.setSize(chartWidth,chartHeight,animation),chart.maxTicks=null,each(chart.axes,function(axis){axis.isDirty=!0,axis.setScale()}),each(chart.series,function(serie){serie.isDirty=!0}),chart.isDirtyLegend=!0,chart.isDirtyBox=!0,chart.getMargins(),chart.redraw(animation),chart.oldChartHeight=null,fireEvent(chart,"resize"),globalAnimation===!1?fireEndResize():setTimeout(fireEndResize,globalAnimation&&globalAnimation.duration||500)},setChartSize:function(skipAxes){var clipX,clipY,plotLeft,plotTop,plotWidth,plotHeight,plotBorderWidth,chart=this,inverted=chart.inverted,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,optionsChart=chart.options.chart,spacing=chart.spacing,clipOffset=chart.clipOffset;chart.plotLeft=plotLeft=mathRound(chart.plotLeft),chart.plotTop=plotTop=mathRound(chart.plotTop),chart.plotWidth=plotWidth=mathMax(0,mathRound(chartWidth-plotLeft-chart.marginRight)),chart.plotHeight=plotHeight=mathMax(0,mathRound(chartHeight-plotTop-chart.marginBottom)),chart.plotSizeX=inverted?plotHeight:plotWidth,chart.plotSizeY=inverted?plotWidth:plotHeight,chart.plotBorderWidth=optionsChart.plotBorderWidth||0,chart.spacingBox=renderer.spacingBox={x:spacing[3],y:spacing[0],width:chartWidth-spacing[3]-spacing[1],height:chartHeight-spacing[0]-spacing[2]},chart.plotBox=renderer.plotBox={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight},plotBorderWidth=2*mathFloor(chart.plotBorderWidth/2),clipX=mathCeil(mathMax(plotBorderWidth,clipOffset[3])/2),clipY=mathCeil(mathMax(plotBorderWidth,clipOffset[0])/2),chart.clipBox={x:clipX,y:clipY,width:mathFloor(chart.plotSizeX-mathMax(plotBorderWidth,clipOffset[1])/2-clipX),height:mathFloor(chart.plotSizeY-mathMax(plotBorderWidth,clipOffset[2])/2-clipY)},skipAxes||each(chart.axes,function(axis){axis.setAxisSize(),axis.setAxisTranslation()})},resetMargins:function(){var chart=this,spacing=chart.spacing,margin=chart.margin;chart.plotTop=pick(margin[0],spacing[0]),chart.marginRight=pick(margin[1],spacing[1]),chart.marginBottom=pick(margin[2],spacing[2]),chart.plotLeft=pick(margin[3],spacing[3]),chart.axisOffset=[0,0,0,0],chart.clipOffset=[0,0,0,0]},drawChartBox:function(){var mgn,bgAttr,chart=this,optionsChart=chart.options.chart,renderer=chart.renderer,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartBackground=chart.chartBackground,plotBackground=chart.plotBackground,plotBorder=chart.plotBorder,plotBGImage=chart.plotBGImage,chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,plotBorderWidth=optionsChart.plotBorderWidth||0,plotLeft=chart.plotLeft,plotTop=chart.plotTop,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,plotBox=chart.plotBox,clipRect=chart.clipRect,clipBox=chart.clipBox;mgn=chartBorderWidth+(optionsChart.shadow?8:0),(chartBorderWidth||chartBackgroundColor)&&(chartBackground?chartBackground.animate(chartBackground.crisp(null,null,null,chartWidth-mgn,chartHeight-mgn)):(bgAttr={fill:chartBackgroundColor||NONE},chartBorderWidth&&(bgAttr.stroke=optionsChart.borderColor,bgAttr["stroke-width"]=chartBorderWidth),chart.chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr(bgAttr).add().shadow(optionsChart.shadow))),plotBackgroundColor&&(plotBackground?plotBackground.animate(plotBox):chart.plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow)),plotBackgroundImage&&(plotBGImage?plotBGImage.animate(plotBox):chart.plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add()),clipRect?clipRect.animate({width:clipBox.width,height:clipBox.height}):chart.clipRect=renderer.clipRect(clipBox),plotBorderWidth&&(plotBorder?plotBorder.animate(plotBorder.crisp(null,plotLeft,plotTop,plotWidth,plotHeight)):chart.plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,-plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,"stroke-width":plotBorderWidth,zIndex:1}).add()),chart.isDirtyBox=!1},propFromSeries:function(){var klass,i,value,chart=this,optionsChart=chart.options.chart,seriesOptions=chart.options.series;each(["inverted","angular","polar"],function(key){for(klass=seriesTypes[optionsChart.type||optionsChart.defaultSeriesType],value=chart[key]||optionsChart[key]||klass&&klass.prototype[key],i=seriesOptions&&seriesOptions.length;!value&&i--;)klass=seriesTypes[seriesOptions[i].type],klass&&klass.prototype[key]&&(value=!0);chart[key]=value})},linkSeries:function(){var chart=this,chartSeries=chart.series;each(chartSeries,function(series){series.linkedSeries.length=0}),each(chartSeries,function(series){var linkedTo=series.options.linkedTo;isString(linkedTo)&&(linkedTo=":previous"===linkedTo?chart.series[series.index-1]:chart.get(linkedTo),linkedTo&&(linkedTo.linkedSeries.push(series),series.linkedParent=linkedTo))})},render:function(){var creditsHref,chart=this,axes=chart.axes,renderer=chart.renderer,options=chart.options,labels=options.labels,credits=options.credits;chart.setTitle(),chart.legend=new Legend(chart,options.legend),chart.getStacks(),each(axes,function(axis){axis.setScale()}),chart.getMargins(),chart.maxTicks=null,each(axes,function(axis){axis.setTickPositions(!0),axis.setMaxTicks()}),chart.adjustTickAmounts(),chart.getMargins(),chart.drawChartBox(),chart.hasCartesianSeries&&each(axes,function(axis){axis.render()}),chart.seriesGroup||(chart.seriesGroup=renderer.g("series-group").attr({zIndex:3}).add()),each(chart.series,function(serie){serie.translate(),serie.setTooltipPoints(),serie.render()}),labels.items&&each(labels.items,function(label){var style=extend(labels.style,label.style),x=pInt(style.left)+chart.plotLeft,y=pInt(style.top)+chart.plotTop+12;delete style.left,delete style.top,renderer.text(label.html,x,y).attr({zIndex:2}).css(style).add()}),credits.enabled&&!chart.credits&&(creditsHref=credits.href,chart.credits=renderer.text(credits.text,0,0).on("click",function(){creditsHref&&(location.href=creditsHref)}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position)),chart.hasRendered=!0},destroy:function(){var i,chart=this,axes=chart.axes,series=chart.series,container=chart.container,parentNode=container&&container.parentNode;for(fireEvent(chart,"destroy"),charts[chart.index]=UNDEFINED,chart.renderTo.removeAttribute("data-highcharts-chart"),removeEvent(chart),i=axes.length;i--;)axes[i]=axes[i].destroy();for(i=series.length;i--;)series[i]=series[i].destroy();each(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(name){var prop=chart[name];prop&&prop.destroy&&(chart[name]=prop.destroy())}),container&&(container.innerHTML="",removeEvent(container),parentNode&&discardElement(container));for(i in chart)delete chart[i]},isReadyToRender:function(){var chart=this;return!hasSVG&&win==win.top&&"complete"!==doc.readyState||useCanVG&&!win.canvg?(useCanVG?CanVGController.push(function(){chart.firstRender()},chart.options.global.canvasToolsURL):doc.attachEvent("onreadystatechange",function(){doc.detachEvent("onreadystatechange",chart.firstRender),"complete"===doc.readyState&&chart.firstRender()}),!1):!0},firstRender:function(){var chart=this,options=chart.options,callback=chart.callback;chart.isReadyToRender()&&(chart.getContainer(),fireEvent(chart,"init"),chart.resetMargins(),chart.setChartSize(),chart.propFromSeries(),chart.getAxes(),each(options.series||[],function(serieOptions){chart.initSeries(serieOptions)}),chart.linkSeries(),fireEvent(chart,"beforeRender"),chart.pointer=new Pointer(chart,options),chart.render(),chart.renderer.draw(),callback&&callback.apply(chart,[chart]),each(chart.callbacks,function(fn){fn.apply(chart,[chart])}),chart.cloneRenderTo(!0),fireEvent(chart,"load"))},splashArray:function(target,options){var oVar=options[target],tArray=isObject(oVar)?oVar:[oVar,oVar,oVar,oVar];return[pick(options[target+"Top"],tArray[0]),pick(options[target+"Right"],tArray[1]),pick(options[target+"Bottom"],tArray[2]),pick(options[target+"Left"],tArray[3])]}},Chart.prototype.callbacks=[];var CenteredSeriesMixin=Highcharts.CenteredSeriesMixin={getCenter:function(){var handleSlicingRoom,isPercent,options=this.options,chart=this.chart,slicingRoom=2*(options.slicedOffset||0),plotWidth=chart.plotWidth-2*slicingRoom,plotHeight=chart.plotHeight-2*slicingRoom,centerOption=options.center,positions=[pick(centerOption[0],"50%"),pick(centerOption[1],"50%"),options.size||"100%",options.innerSize||0],smallestSize=mathMin(plotWidth,plotHeight);return map(positions,function(length,i){return isPercent=/%$/.test(length),handleSlicingRoom=2>i||2===i&&isPercent,(isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length)+(handleSlicingRoom?slicingRoom:0)})}},Point=function(){};Point.prototype={init:function(series,options,x){var colors,point=this;return point.series=series,point.applyOptions(options,x),point.pointAttr={},series.options.colorByPoint&&(colors=series.options.colors||series.chart.options.colors,point.color=point.color||colors[series.colorCounter++],series.colorCounter===colors.length&&(series.colorCounter=0)),series.chart.pointCount++,point},applyOptions:function(options,x){var point=this,series=point.series,pointValKey=series.pointValKey;return options=Point.prototype.optionsToObject.call(this,options),extend(point,options),point.options=point.options?extend(point.options,options):options,pointValKey&&(point.y=point[pointValKey]),point.x===UNDEFINED&&series&&(point.x=x===UNDEFINED?series.autoIncrement():x),point},optionsToObject:function(options){var firstItemType,ret={},series=this.series,pointArrayMap=series.pointArrayMap||["y"],valueCount=pointArrayMap.length,i=0,j=0;if("number"==typeof options||null===options)ret[pointArrayMap[0]]=options;else if(isArray(options))for(options.length>valueCount&&(firstItemType=typeof options[0],"string"===firstItemType?ret.name=options[0]:"number"===firstItemType&&(ret.x=options[0]),i++);valueCount>j;)ret[pointArrayMap[j++]]=options[i++];else"object"==typeof options&&(ret=options,options.dataLabels&&(series._hasPointLabels=!0),options.marker&&(series._hasPointMarkers=!0));return ret},destroy:function(){var prop,point=this,series=point.series,chart=series.chart,hoverPoints=chart.hoverPoints;chart.pointCount--,hoverPoints&&(point.setState(),erase(hoverPoints,point),hoverPoints.length||(chart.hoverPoints=null)),point===chart.hoverPoint&&point.onMouseOut(),(point.graphic||point.dataLabel)&&(removeEvent(point),point.destroyElements()),point.legendItem&&chart.legend.destroyItem(point);for(prop in point)point[prop]=null},destroyElements:function(){for(var prop,point=this,props=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],i=6;i--;)prop=props[i],point[prop]&&(point[prop]=point[prop].destroy())},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,key:point.name||point.category,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal}},select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;selected=pick(selected,!point.selected),point.firePointEvent(selected?"select":"unselect",{accumulate:accumulate},function(){point.selected=point.options.selected=selected,series.options.data[inArray(point,series.data)]=point.options,point.setState(selected&&SELECT_STATE),accumulate||each(chart.getSelectedPoints(),function(loopPoint){loopPoint.selected&&loopPoint!==point&&(loopPoint.selected=loopPoint.options.selected=!1,series.options.data[inArray(loopPoint,series.data)]=loopPoint.options,loopPoint.setState(NORMAL_STATE),loopPoint.firePointEvent("unselect"))})})},onMouseOver:function(e){var point=this,series=point.series,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;hoverPoint&&hoverPoint!==point&&hoverPoint.onMouseOut(),point.firePointEvent("mouseOver"),!tooltip||tooltip.shared&&!series.noSharedTooltip||tooltip.refresh(point,e),point.setState(HOVER_STATE),chart.hoverPoint=point},onMouseOut:function(){var chart=this.series.chart,hoverPoints=chart.hoverPoints;hoverPoints&&-1!==inArray(this,hoverPoints)||(this.firePointEvent("mouseOut"),this.setState(),chart.hoverPoint=null)},tooltipFormatter:function(pointFormat){var series=this.series,seriesTooltipOptions=series.tooltipOptions,valueDecimals=pick(seriesTooltipOptions.valueDecimals,""),valuePrefix=seriesTooltipOptions.valuePrefix||"",valueSuffix=seriesTooltipOptions.valueSuffix||"";return each(series.pointArrayMap||["y"],function(key){key="{point."+key,(valuePrefix||valueSuffix)&&(pointFormat=pointFormat.replace(key+"}",valuePrefix+key+"}"+valueSuffix)),pointFormat=pointFormat.replace(key+"}",key+":,."+valueDecimals+"f}")}),format(pointFormat,{point:this,series:this.series})},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;(seriesOptions.point.events[eventType]||point.options&&point.options.events&&point.options.events[eventType])&&this.importEvents(),"click"===eventType&&seriesOptions.allowPointSelect&&(defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey)}),fireEvent(this,eventType,eventArgs,defaultFunction)},importEvents:function(){if(!this.hasImportedEvents){var eventType,point=this,options=merge(point.series.options.point,point.options),events=options.events;point.events=events;for(eventType in events)addEvent(point,eventType,events[eventType]);this.hasImportedEvents=!0}},setState:function(state,move){var radius,newSymbol,point=this,plotX=point.plotX,plotY=point.plotY,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===!1,stateMarkerGraphic=series.stateMarkerGraphic,pointMarker=point.marker||{},chart=series.chart,pointAttr=point.pointAttr;state=state||NORMAL_STATE,move=move&&stateMarkerGraphic,state===point.state&&!move||point.selected&&state!==SELECT_STATE||stateOptions[state]&&stateOptions[state].enabled===!1||state&&(stateDisabled||normalDisabled&&!markerStateOptions.enabled)||state&&pointMarker.states&&pointMarker.states[state]&&pointMarker.states[state].enabled===!1||(point.graphic?(radius=markerOptions&&point.graphic.symbolName&&pointAttr[state].r,point.graphic.attr(merge(pointAttr[state],radius?{x:plotX-radius,y:plotY-radius,width:2*radius,height:2*radius}:{}))):(state&&markerStateOptions&&(radius=markerStateOptions.radius,newSymbol=pointMarker.symbol||series.symbol,stateMarkerGraphic&&stateMarkerGraphic.currentSymbol!==newSymbol&&(stateMarkerGraphic=stateMarkerGraphic.destroy()),stateMarkerGraphic?stateMarkerGraphic[move?"animate":"attr"]({x:plotX-radius,y:plotY-radius}):(series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.symbol(newSymbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr[state]).add(series.markerGroup),stateMarkerGraphic.currentSymbol=newSymbol)),stateMarkerGraphic&&stateMarkerGraphic[state&&chart.isInsidePlot(plotX,plotY,chart.inverted)?"show":"hide"]()),point.state=state)}};var Series=function(){};Series.prototype={isCartesian:!0,type:"line",pointClass:Point,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(chart,options){var eventType,events,series=this,chartSeries=chart.series,sortByIndex=function(a,b){return pick(a.options.index,a._i)-pick(b.options.index,b._i)};series.chart=chart,series.options=options=series.setOptions(options),series.linkedSeries=[],series.bindAxes(),extend(series,{name:options.name,state:NORMAL_STATE,pointAttr:{},visible:options.visible!==!1,selected:options.selected===!0}),useCanVG&&(options.animation=!1),events=options.events;for(eventType in events)addEvent(series,eventType,events[eventType]);(events&&events.click||options.point&&options.point.events&&options.point.events.click||options.allowPointSelect)&&(chart.runTrackerClick=!0),series.getColor(),series.getSymbol(),each(series.parallelArrays,function(key){series[key+"Data"]=[]}),series.setData(options.data,!1),series.isCartesian&&(chart.hasCartesianSeries=!0),chartSeries.push(series),series._i=chartSeries.length-1,stableSort(chartSeries,sortByIndex),this.yAxis&&stableSort(this.yAxis.series,sortByIndex),each(chartSeries,function(series,i){series.index=i,series.name=series.name||"Series "+(i+1)})},bindAxes:function(){var axisOptions,series=this,seriesOptions=series.options,chart=series.chart;each(series.axisTypes||[],function(AXIS){each(chart[AXIS],function(axis){axisOptions=axis.options,(seriesOptions[AXIS]===axisOptions.index||seriesOptions[AXIS]!==UNDEFINED&&seriesOptions[AXIS]===axisOptions.id||seriesOptions[AXIS]===UNDEFINED&&0===axisOptions.index)&&(axis.series.push(series),series[AXIS]=axis,axis.isDirty=!0)}),series[AXIS]||series.optionalAxis===AXIS||error(18,!0)})},updateParallelArrays:function(point,i){var series=point.series,args=arguments,fn="number"==typeof i?function(key){var val="y"===key&&series.toYData?series.toYData(point):point[key];series[key+"Data"][i]=val}:function(key){Array.prototype[i].apply(series[key+"Data"],Array.prototype.slice.call(args,2))};each(series.parallelArrays,fn)},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;return xIncrement=pick(xIncrement,options.pointStart,0),series.pointInterval=pick(series.pointInterval,options.pointInterval,1),series.xIncrement=xIncrement+series.pointInterval,xIncrement},getSegments:function(){var i,series=this,lastNull=-1,segments=[],points=series.points,pointsLength=points.length;if(pointsLength)if(series.options.connectNulls){for(i=pointsLength;i--;)null===points[i].y&&points.splice(i,1);points.length&&(segments=[points])}else each(points,function(point,i){null===point.y?(i>lastNull+1&&segments.push(points.slice(lastNull+1,i)),lastNull=i):i===pointsLength-1&&segments.push(points.slice(lastNull+1,i+1))});series.segments=segments},setOptions:function(itemOptions){var options,chart=this.chart,chartOptions=chart.options,plotOptions=chartOptions.plotOptions,userOptions=chart.userOptions||{},userPlotOptions=userOptions.plotOptions||{},typeOptions=plotOptions[this.type];return this.userOptions=itemOptions,options=merge(typeOptions,plotOptions.series,itemOptions),this.tooltipOptions=merge(defaultOptions.tooltip,defaultOptions.plotOptions[this.type].tooltip,userOptions.tooltip,userPlotOptions.series&&userPlotOptions.series.tooltip,userPlotOptions[this.type]&&userPlotOptions[this.type].tooltip,itemOptions.tooltip),null===typeOptions.marker&&delete options.marker,options},getColor:function(){var color,colorIndex,options=this.options,userOptions=this.userOptions,defaultColors=this.chart.options.colors,counters=this.chart.counters;color=options.color||defaultPlotOptions[this.type].color,color||options.colorByPoint||(defined(userOptions._colorIndex)?colorIndex=userOptions._colorIndex:(userOptions._colorIndex=counters.color,colorIndex=counters.color++),color=defaultColors[colorIndex]),this.color=color,counters.wrapColor(defaultColors.length)},getSymbol:function(){var symbolIndex,series=this,userOptions=series.userOptions,seriesMarkerOption=series.options.marker,chart=series.chart,defaultSymbols=chart.options.symbols,counters=chart.counters;series.symbol=seriesMarkerOption.symbol,series.symbol||(defined(userOptions._symbolIndex)?symbolIndex=userOptions._symbolIndex:(userOptions._symbolIndex=counters.symbol,symbolIndex=counters.symbol++),series.symbol=defaultSymbols[symbolIndex]),/^url/.test(series.symbol)&&(seriesMarkerOption.radius=0),counters.wrapSymbol(defaultSymbols.length)},drawLegendSymbol:LegendSymbolMixin.drawLineMarker,setData:function(data,redraw){var i,series=this,oldData=series.points,options=series.options,chart=series.chart,firstPoint=null,xAxis=series.xAxis,hasCategories=xAxis&&!!xAxis.categories;series.xIncrement=null,series.pointRange=hasCategories?1:options.pointRange,series.colorCounter=0,data=data||[];var pt,dataLength=data.length,turboThreshold=options.turboThreshold,xData=this.xData,yData=this.yData,pointArrayMap=series.pointArrayMap,valueCount=pointArrayMap&&pointArrayMap.length;if(each(this.parallelArrays,function(key){series[key+"Data"].length=0}),turboThreshold&&dataLength>turboThreshold){for(i=0;null===firstPoint&&dataLength>i;)firstPoint=data[i],i++;if(isNumber(firstPoint)){var x=pick(options.pointStart,0),pointInterval=pick(options.pointInterval,1);for(i=0;dataLength>i;i++)xData[i]=x,yData[i]=data[i],x+=pointInterval;series.xIncrement=x}else if(isArray(firstPoint))if(valueCount)for(i=0;dataLength>i;i++)pt=data[i],xData[i]=pt[0],yData[i]=pt.slice(1,valueCount+1);else for(i=0;dataLength>i;i++)pt=data[i],xData[i]=pt[0],yData[i]=pt[1];else error(12)}else for(i=0;dataLength>i;i++)data[i]!==UNDEFINED&&(pt={series:series},series.pointClass.prototype.applyOptions.apply(pt,[data[i]]),series.updateParallelArrays(pt,i),hasCategories&&pt.name&&(xAxis.names[pt.x]=pt.name));for(isString(yData[0])&&error(14,!0),series.data=[],series.options.data=data,i=oldData&&oldData.length||0;i--;)oldData[i]&&oldData[i].destroy&&oldData[i].destroy();xAxis&&(xAxis.minRange=xAxis.userMinRange),series.isDirty=series.isDirtyData=chart.isDirtyBox=!0,pick(redraw,!0)&&chart.redraw(!1)},processData:function(force){var croppedData,cropped,distance,closestPointRange,i,series=this,processedXData=series.xData,processedYData=series.yData,dataLength=processedXData.length,cropStart=0,xAxis=series.xAxis,options=series.options,cropThreshold=options.cropThreshold,isCartesian=series.isCartesian;if(isCartesian&&!series.isDirty&&!xAxis.isDirty&&!series.yAxis.isDirty&&!force)return!1;if(isCartesian&&series.sorted&&(!cropThreshold||dataLength>cropThreshold||series.forceCrop)){var min=xAxis.min,max=xAxis.max;processedXData[dataLength-1]<min||processedXData[0]>max?(processedXData=[],processedYData=[]):(processedXData[0]<min||processedXData[dataLength-1]>max)&&(croppedData=this.cropData(series.xData,series.yData,min,max),processedXData=croppedData.xData,processedYData=croppedData.yData,cropStart=croppedData.start,cropped=!0)}for(i=processedXData.length-1;i>=0;i--)distance=processedXData[i]-processedXData[i-1],distance>0&&(closestPointRange===UNDEFINED||closestPointRange>distance)?closestPointRange=distance:0>distance&&series.requireSorting&&error(15);series.cropped=cropped,series.cropStart=cropStart,series.processedXData=processedXData,series.processedYData=processedYData,null===options.pointRange&&(series.pointRange=closestPointRange||1),series.closestPointRange=closestPointRange},cropData:function(xData,yData,min,max){var i,dataLength=xData.length,cropStart=0,cropEnd=dataLength,cropShoulder=pick(this.cropShoulder,1);for(i=0;dataLength>i;i++)if(xData[i]>=min){cropStart=mathMax(0,i-cropShoulder);break}for(;dataLength>i;i++)if(xData[i]>max){cropEnd=i+cropShoulder;break}return{xData:xData.slice(cropStart,cropEnd),yData:yData.slice(cropStart,cropEnd),start:cropStart,end:cropEnd}},generatePoints:function(){var dataLength,cursor,point,i,series=this,options=series.options,dataOptions=options.data,data=series.data,processedXData=series.processedXData,processedYData=series.processedYData,pointClass=series.pointClass,processedDataLength=processedXData.length,cropStart=series.cropStart||0,hasGroupedData=series.hasGroupedData,points=[];if(!data&&!hasGroupedData){var arr=[];arr.length=dataOptions.length,data=series.data=arr}for(i=0;processedDataLength>i;i++)cursor=cropStart+i,hasGroupedData?points[i]=(new pointClass).init(series,[processedXData[i]].concat(splat(processedYData[i]))):(data[cursor]?point=data[cursor]:dataOptions[cursor]!==UNDEFINED&&(data[cursor]=point=(new pointClass).init(series,dataOptions[cursor],processedXData[i])),points[i]=point);if(data&&(processedDataLength!==(dataLength=data.length)||hasGroupedData))for(i=0;dataLength>i;i++)i!==cropStart||hasGroupedData||(i+=processedDataLength),data[i]&&(data[i].destroyElements(),data[i].plotX=UNDEFINED);series.data=data,series.points=points},setStackedPoints:function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var isNegative,stack,other,key,i,x,y,series=this,xData=series.processedXData,yData=series.processedYData,stackedYData=[],yDataLength=yData.length,seriesOptions=series.options,threshold=seriesOptions.threshold,stackOption=seriesOptions.stack,stacking=seriesOptions.stacking,stackKey=series.stackKey,negKey="-"+stackKey,negStacks=series.negStacks,yAxis=series.yAxis,stacks=yAxis.stacks,oldStacks=yAxis.oldStacks;for(i=0;yDataLength>i;i++)x=xData[i],y=yData[i],isNegative=negStacks&&threshold>y,key=isNegative?negKey:stackKey,stacks[key]||(stacks[key]={}),stacks[key][x]||(oldStacks[key]&&oldStacks[key][x]?(stacks[key][x]=oldStacks[key][x],stacks[key][x].total=null):stacks[key][x]=new StackItem(yAxis,yAxis.options.stackLabels,isNegative,x,stackOption,stacking)),stack=stacks[key][x],stack.points[series.index]=[stack.cum||0],"percent"===stacking?(other=isNegative?stackKey:negKey,negStacks&&stacks[other]&&stacks[other][x]?(other=stacks[other][x],stack.total=other.total=mathMax(other.total,stack.total)+mathAbs(y)||0):stack.total=correctFloat(stack.total+(mathAbs(y)||0))):stack.total=correctFloat(stack.total+(y||0)),stack.cum=(stack.cum||0)+(y||0),stack.points[series.index].push(stack.cum),stackedYData[i]=stack.cum;"percent"===stacking&&(yAxis.usePercentage=!0),this.stackedYData=stackedYData,yAxis.oldStacks={}}},setPercentStacks:function(){var series=this,stackKey=series.stackKey,stacks=series.yAxis.stacks;each([stackKey,"-"+stackKey],function(key){for(var x,stack,pointExtremes,totalFactor,i=series.xData.length;i--;)x=series.xData[i],stack=stacks[key]&&stacks[key][x],pointExtremes=stack&&stack.points[series.index],pointExtremes&&(totalFactor=stack.total?100/stack.total:0,pointExtremes[0]=correctFloat(pointExtremes[0]*totalFactor),pointExtremes[1]=correctFloat(pointExtremes[1]*totalFactor),series.stackedYData[i]=pointExtremes[1])
})},getExtremes:function(yData){var yDataLength,validValue,withinRange,dataMin,dataMax,x,y,i,j,xAxis=this.xAxis,yAxis=this.yAxis,xData=this.processedXData,activeYData=[],activeCounter=0,xExtremes=xAxis.getExtremes(),xMin=xExtremes.min,xMax=xExtremes.max;for(yData=yData||this.stackedYData||this.processedYData,yDataLength=yData.length,i=0;yDataLength>i;i++)if(x=xData[i],y=yData[i],validValue=null!==y&&y!==UNDEFINED&&(!yAxis.isLog||y.length||y>0),withinRange=this.getExtremesFromAll||this.cropped||(xData[i+1]||x)>=xMin&&(xData[i-1]||x)<=xMax,validValue&&withinRange)if(j=y.length)for(;j--;)null!==y[j]&&(activeYData[activeCounter++]=y[j]);else activeYData[activeCounter++]=y;this.dataMin=pick(dataMin,arrayMin(activeYData)),this.dataMax=pick(dataMax,arrayMax(activeYData))},translate:function(){this.processedXData||this.processData(),this.generatePoints();var i,series=this,options=series.options,stacking=options.stacking,xAxis=series.xAxis,categories=xAxis.categories,yAxis=series.yAxis,points=series.points,dataLength=points.length,hasModifyValue=!!series.modifyValue,pointPlacement=options.pointPlacement,dynamicallyPlaced="between"===pointPlacement||isNumber(pointPlacement),threshold=options.threshold;for(i=0;dataLength>i;i++){var pointStack,stackValues,point=points[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=stacking&&yAxis.stacks[(series.negStacks&&threshold>yValue?"-":"")+series.stackKey];yAxis.isLog&&0>=yValue&&(point.y=yValue=null),point.plotX=xAxis.translate(xValue,0,0,0,1,pointPlacement,"flags"===this.type),stacking&&series.visible&&stack&&stack[xValue]&&(pointStack=stack[xValue],stackValues=pointStack.points[series.index],yBottom=stackValues[0],yValue=stackValues[1],0===yBottom&&(yBottom=pick(threshold,yAxis.min)),yAxis.isLog&&0>=yBottom&&(yBottom=null),point.total=point.stackTotal=pointStack.total,point.percentage="percent"===stacking&&point.y/pointStack.total*100,point.stackY=yValue,pointStack.setOffset(series.pointXOffset||0,series.barW||0)),point.yBottom=defined(yBottom)?yAxis.translate(yBottom,0,1,0,1):null,hasModifyValue&&(yValue=series.modifyValue(yValue,point)),point.plotY="number"==typeof yValue&&1/0!==yValue?yAxis.translate(yValue,0,1,0,1):UNDEFINED,point.clientX=dynamicallyPlaced?xAxis.translate(xValue,0,0,0,1):point.plotX,point.negative=point.y<(threshold||0),point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x}series.getSegments()},setTooltipPoints:function(renew){var pointsLength,low,high,point,pointX,nextPoint,i,series=this,points=[],xAxis=series.xAxis,xExtremes=xAxis&&xAxis.getExtremes(),axisLength=xAxis?xAxis.tooltipLen||xAxis.len:series.chart.plotSizeX,tooltipPoints=[];if(series.options.enableMouseTracking!==!1){for(renew&&(series.tooltipPoints=null),each(series.segments||series.points,function(segment){points=points.concat(segment)}),xAxis&&xAxis.reversed&&(points=points.reverse()),series.orderTooltipPoints&&series.orderTooltipPoints(points),pointsLength=points.length,i=0;pointsLength>i;i++)if(point=points[i],pointX=point.x,pointX>=xExtremes.min&&pointX<=xExtremes.max)for(nextPoint=points[i+1],low=high===UNDEFINED?0:high+1,high=points[i+1]?mathMin(mathMax(0,mathFloor((point.clientX+(nextPoint?nextPoint.wrappedClientX||nextPoint.clientX:axisLength))/2)),axisLength):axisLength;low>=0&&high>=low;)tooltipPoints[low++]=point;series.tooltipPoints=tooltipPoints}},tooltipHeaderFormatter:function(point){var n,series=this,tooltipOptions=series.tooltipOptions,dateTimeLabelFormats=tooltipOptions.dateTimeLabelFormats,xDateFormat=tooltipOptions.xDateFormat,xAxis=series.xAxis,isDateTime=xAxis&&"datetime"===xAxis.options.type,headerFormat=tooltipOptions.headerFormat,closestPointRange=xAxis&&xAxis.closestPointRange;if(isDateTime&&!xDateFormat){if(closestPointRange){for(n in timeUnits)if(timeUnits[n]>=closestPointRange){xDateFormat=dateTimeLabelFormats[n];break}}else xDateFormat=dateTimeLabelFormats.day;xDateFormat=xDateFormat||dateTimeLabelFormats.year}return isDateTime&&xDateFormat&&isNumber(point.key)&&(headerFormat=headerFormat.replace("{point.key}","{point.key:"+xDateFormat+"}")),format(headerFormat,{point:point,series:series})},onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;hoverSeries&&hoverSeries!==series&&hoverSeries.onMouseOut(),series.options.events.mouseOver&&fireEvent(series,"mouseOver"),series.setState(HOVER_STATE),chart.hoverSeries=series},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;hoverPoint&&hoverPoint.onMouseOut(),series&&options.events.mouseOut&&fireEvent(series,"mouseOut"),!tooltip||options.stickyTracking||tooltip.shared&&!series.noSharedTooltip||tooltip.hide(),series.setState(),chart.hoverSeries=null},animate:function(init){var clipRect,markerClipRect,sharedClipKey,series=this,chart=series.chart,renderer=chart.renderer,animation=series.options.animation,clipBox=chart.clipBox,inverted=chart.inverted;animation&&!isObject(animation)&&(animation=defaultPlotOptions[series.type].animation),sharedClipKey="_sharedClip"+animation.duration+animation.easing,init?(clipRect=chart[sharedClipKey],markerClipRect=chart[sharedClipKey+"m"],clipRect||(chart[sharedClipKey]=clipRect=renderer.clipRect(extend(clipBox,{width:0})),chart[sharedClipKey+"m"]=markerClipRect=renderer.clipRect(-99,inverted?-chart.plotLeft:-chart.plotTop,99,inverted?chart.chartWidth:chart.chartHeight)),series.group.clip(clipRect),series.markerGroup.clip(markerClipRect),series.sharedClipKey=sharedClipKey):(clipRect=chart[sharedClipKey],clipRect&&(clipRect.animate({width:chart.plotSizeX},animation),chart[sharedClipKey+"m"].animate({width:chart.plotSizeX+99},animation)),series.animate=null,series.animationTimeout=setTimeout(function(){series.afterAnimate()},animation.duration))},afterAnimate:function(){var chart=this.chart,sharedClipKey=this.sharedClipKey,group=this.group;group&&this.options.clip!==!1&&(group.clip(chart.clipRect),this.markerGroup.clip()),setTimeout(function(){sharedClipKey&&chart[sharedClipKey]&&(chart[sharedClipKey]=chart[sharedClipKey].destroy(),chart[sharedClipKey+"m"]=chart[sharedClipKey+"m"].destroy())},100)},drawPoints:function(){var pointAttr,plotX,plotY,i,point,radius,symbol,isImage,graphic,pointMarkerOptions,enabled,isInside,series=this,points=series.points,chart=series.chart,options=series.options,seriesMarkerOptions=options.marker,markerGroup=series.markerGroup;if(seriesMarkerOptions.enabled||series._hasPointMarkers)for(i=points.length;i--;)point=points[i],plotX=mathFloor(point.plotX),plotY=point.plotY,graphic=point.graphic,pointMarkerOptions=point.marker||{},enabled=seriesMarkerOptions.enabled&&pointMarkerOptions.enabled===UNDEFINED||pointMarkerOptions.enabled,isInside=chart.isInsidePlot(mathRound(plotX),plotY,chart.inverted),enabled&&plotY!==UNDEFINED&&!isNaN(plotY)&&null!==point.y?(pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE],radius=pointAttr.r,symbol=pick(pointMarkerOptions.symbol,series.symbol),isImage=0===symbol.indexOf("url"),graphic?graphic.attr({visibility:isInside?hasSVG?"inherit":VISIBLE:HIDDEN}).animate(extend({x:plotX-radius,y:plotY-radius},graphic.symbolName?{width:2*radius,height:2*radius}:{})):isInside&&(radius>0||isImage)&&(point.graphic=graphic=chart.renderer.symbol(symbol,plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(markerGroup))):graphic&&(point.graphic=graphic.destroy())},convertAttribs:function(options,base1,base2,base3){var attr,option,conversion=this.pointAttrToOptions,obj={};options=options||{},base1=base1||{},base2=base2||{},base3=base3||{};for(attr in conversion)option=conversion[attr],obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);return obj},getAttribs:function(){var pointStateOptionsHover,i,point,pointAttr,hasPointSpecificOptions,attr,key,series=this,seriesOptions=series.options,normalOptions=defaultPlotOptions[series.type].marker?seriesOptions.marker:seriesOptions,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},points=series.points||[],seriesPointAttr=[],pointAttrToOptions=series.pointAttrToOptions,negativeColor=seriesOptions.negativeColor,defaultLineColor=normalOptions.lineColor,defaultFillColor=normalOptions.fillColor;for(seriesOptions.marker?(stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+2,stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+1):stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get(),seriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults),each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE])}),series.pointAttr=seriesPointAttr,i=points.length;i--;){if(point=points[i],normalOptions=point.options&&point.options.marker||point.options,normalOptions&&normalOptions.enabled===!1&&(normalOptions.radius=0),point.negative&&negativeColor&&(point.color=point.fillColor=negativeColor),hasPointSpecificOptions=seriesOptions.colorByPoint||point.color,point.options)for(key in pointAttrToOptions)defined(normalOptions[pointAttrToOptions[key]])&&(hasPointSpecificOptions=!0);hasPointSpecificOptions?(normalOptions=normalOptions||{},pointAttr=[],stateOptions=normalOptions.states||{},pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{},seriesOptions.marker||(pointStateOptionsHover.color=Color(pointStateOptionsHover.color||point.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get()),attr={color:point.color},defaultFillColor||(attr.fillColor=point.color),defaultLineColor||(attr.lineColor=point.color),pointAttr[NORMAL_STATE]=series.convertAttribs(extend(attr,normalOptions),seriesPointAttr[NORMAL_STATE]),pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]),pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE])):pointAttr=seriesPointAttr,point.pointAttr=pointAttr}},destroy:function(){var destroy,i,point,prop,axis,series=this,chart=series.chart,issue134=/AppleWebKit\/533/.test(userAgent),data=series.data||[];for(fireEvent(series,"destroy"),removeEvent(series),each(series.axisTypes||[],function(AXIS){axis=series[AXIS],axis&&(erase(axis.series,series),axis.isDirty=axis.forceRedraw=!0)}),series.legendItem&&series.chart.legend.destroyItem(series),i=data.length;i--;)point=data[i],point&&point.destroy&&point.destroy();series.points=null,clearTimeout(series.animationTimeout),each(["area","graph","dataLabelsGroup","group","markerGroup","tracker","graphNeg","areaNeg","posClip","negClip"],function(prop){series[prop]&&(destroy=issue134&&"group"===prop?"hide":"destroy",series[prop][destroy]())}),chart.hoverSeries===series&&(chart.hoverSeries=null),erase(chart.series,series);for(prop in series)delete series[prop]},getSegmentPath:function(segment){var series=this,segmentPath=[],step=series.options.step;return each(segment,function(point,i){var lastPoint,plotX=point.plotX,plotY=point.plotY;series.getPointSpline?segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i)):(segmentPath.push(i?L:M),step&&i&&(lastPoint=segment[i-1],"right"===step?segmentPath.push(lastPoint.plotX,plotY):"center"===step?segmentPath.push((lastPoint.plotX+plotX)/2,lastPoint.plotY,(lastPoint.plotX+plotX)/2,plotY):segmentPath.push(plotX,lastPoint.plotY)),segmentPath.push(point.plotX,point.plotY))}),segmentPath},getGraphPath:function(){var segmentPath,series=this,graphPath=[],singlePoints=[];return each(series.segments,function(segment){segmentPath=series.getSegmentPath(segment),segment.length>1?graphPath=graphPath.concat(segmentPath):singlePoints.push(segment[0])}),series.singlePoints=singlePoints,series.graphPath=graphPath,graphPath},drawGraph:function(){var series=this,options=this.options,props=[["graph",options.lineColor||this.color]],lineWidth=options.lineWidth,dashStyle=options.dashStyle,roundCap="square"!==options.linecap,graphPath=this.getGraphPath(),negativeColor=options.negativeColor;negativeColor&&props.push(["graphNeg",negativeColor]),each(props,function(prop,i){var attribs,graphKey=prop[0],graph=series[graphKey];graph?(stop(graph),graph.animate({d:graphPath})):lineWidth&&graphPath.length&&(attribs={stroke:prop[1],"stroke-width":lineWidth,zIndex:1},dashStyle?attribs.dashstyle=dashStyle:roundCap&&(attribs["stroke-linecap"]=attribs["stroke-linejoin"]="round"),series[graphKey]=series.chart.renderer.path(graphPath).attr(attribs).add(series.group).shadow(!i&&options.shadow))})},clipNeg:function(){var translatedThreshold,posAttr,negAttr,above,below,options=this.options,chart=this.chart,renderer=chart.renderer,negativeColor=options.negativeColor||options.negativeFillColor,graph=this.graph,area=this.area,posClip=this.posClip,negClip=this.negClip,chartWidth=chart.chartWidth,chartHeight=chart.chartHeight,chartSizeMax=mathMax(chartWidth,chartHeight),yAxis=this.yAxis;negativeColor&&(graph||area)&&(translatedThreshold=mathRound(yAxis.toPixels(options.threshold||0,!0)),0>translatedThreshold&&(chartSizeMax-=translatedThreshold),above={x:0,y:0,width:chartSizeMax,height:translatedThreshold},below={x:0,y:translatedThreshold,width:chartSizeMax,height:chartSizeMax},chart.inverted&&(above.height=below.y=chart.plotWidth-translatedThreshold,renderer.isVML&&(above={x:chart.plotWidth-translatedThreshold-chart.plotLeft,y:0,width:chartWidth,height:chartHeight},below={x:translatedThreshold+chart.plotLeft-chartWidth,y:0,width:chart.plotLeft+translatedThreshold,height:chartWidth})),yAxis.reversed?(posAttr=below,negAttr=above):(posAttr=above,negAttr=below),posClip?(posClip.animate(posAttr),negClip.animate(negAttr)):(this.posClip=posClip=renderer.clipRect(posAttr),this.negClip=negClip=renderer.clipRect(negAttr),graph&&this.graphNeg&&(graph.clip(posClip),this.graphNeg.clip(negClip)),area&&(area.clip(posClip),this.areaNeg.clip(negClip))))},invertGroups:function(){function setInvert(){var size={width:series.yAxis.len,height:series.xAxis.len};each(["group","markerGroup"],function(groupName){series[groupName]&&series[groupName].attr(size).invert()})}var series=this,chart=series.chart;series.xAxis&&(addEvent(chart,"resize",setInvert),addEvent(series,"destroy",function(){removeEvent(chart,"resize",setInvert)}),setInvert(),series.invertGroups=setInvert)},plotGroup:function(prop,name,visibility,zIndex,parent){var group=this[prop],isNew=!group;return isNew&&(this[prop]=group=this.chart.renderer.g(name).attr({visibility:visibility,zIndex:zIndex||.1}).add(parent)),group[isNew?"attr":"animate"](this.getPlotBox()),group},getPlotBox:function(){return{translateX:this.xAxis?this.xAxis.left:this.chart.plotLeft,translateY:this.yAxis?this.yAxis.top:this.chart.plotTop,scaleX:1,scaleY:1}},render:function(){var group,series=this,chart=series.chart,options=series.options,animation=options.animation,doAnimation=animation&&!!series.animate&&chart.renderer.isSVG,visibility=series.visible?VISIBLE:HIDDEN,zIndex=options.zIndex,hasRendered=series.hasRendered,chartSeriesGroup=chart.seriesGroup;group=series.plotGroup("group","series",visibility,zIndex,chartSeriesGroup),series.markerGroup=series.plotGroup("markerGroup","markers",visibility,zIndex,chartSeriesGroup),doAnimation&&series.animate(!0),series.getAttribs(),group.inverted=series.isCartesian?chart.inverted:!1,series.drawGraph&&(series.drawGraph(),series.clipNeg()),series.drawDataLabels&&series.drawDataLabels(),series.visible&&series.drawPoints(),series.options.enableMouseTracking!==!1&&series.drawTracker(),chart.inverted&&series.invertGroups(),options.clip===!1||series.sharedClipKey||hasRendered||group.clip(chart.clipRect),doAnimation?series.animate():hasRendered||series.afterAnimate(),series.isDirty=series.isDirtyData=!1,series.hasRendered=!0},redraw:function(){var series=this,chart=series.chart,wasDirtyData=series.isDirtyData,group=series.group,xAxis=series.xAxis,yAxis=series.yAxis;group&&(chart.inverted&&group.attr({width:chart.plotWidth,height:chart.plotHeight}),group.animate({translateX:pick(xAxis&&xAxis.left,chart.plotLeft),translateY:pick(yAxis&&yAxis.top,chart.plotTop)})),series.translate(),series.setTooltipPoints(!0),series.render(),wasDirtyData&&fireEvent(series,"updatedData")},setState:function(state){var attribs,series=this,options=series.options,graph=series.graph,graphNeg=series.graphNeg,stateOptions=options.states,lineWidth=options.lineWidth;if(state=state||NORMAL_STATE,series.state!==state){if(series.state=state,stateOptions[state]&&stateOptions[state].enabled===!1)return;state&&(lineWidth=stateOptions[state].lineWidth||lineWidth+1),graph&&!graph.dashstyle&&(attribs={"stroke-width":lineWidth},graph.attr(attribs),graphNeg&&graphNeg.attr(attribs))}},setVisible:function(vis,redraw){var showOrHide,series=this,chart=series.chart,legendItem=series.legendItem,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=series.userOptions.visible=vis===UNDEFINED?!oldVisibility:vis,showOrHide=vis?"show":"hide",each(["group","dataLabelsGroup","markerGroup","tracker"],function(key){series[key]&&series[key][showOrHide]()}),chart.hoverSeries===series&&series.onMouseOut(),legendItem&&chart.legend.colorizeItem(series,vis),series.isDirty=!0,series.options.stacking&&each(chart.series,function(otherSeries){otherSeries.options.stacking&&otherSeries.visible&&(otherSeries.isDirty=!0)}),each(series.linkedSeries,function(otherSeries){otherSeries.setVisible(vis,!1)}),ignoreHiddenSeries&&(chart.isDirtyBox=!0),redraw!==!1&&chart.redraw(),fireEvent(series,showOrHide)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(selected){var series=this;series.selected=selected=selected===UNDEFINED?!series.selected:selected,series.checkbox&&(series.checkbox.checked=selected),fireEvent(series,selected?"select":"unselect")},drawTracker:TrackerMixin.drawTrackerGraph},extend(Chart.prototype,{addSeries:function(options,redraw,animation){var series,chart=this;return options&&(redraw=pick(redraw,!0),fireEvent(chart,"addSeries",{options:options},function(){series=chart.initSeries(options),chart.isDirtyLegend=!0,chart.linkSeries(),redraw&&chart.redraw(animation)})),series},addAxis:function(options,isX,redraw,animation){var axis,key=isX?"xAxis":"yAxis",chartOptions=this.options;axis=new Axis(this,merge(options,{index:this[key].length,isX:isX})),chartOptions[key]=splat(chartOptions[key]||{}),chartOptions[key].push(options),pick(redraw,!0)&&this.redraw(animation)},showLoading:function(str){var chart=this,options=chart.options,loadingDiv=chart.loadingDiv,loadingOptions=options.loading;loadingDiv||(chart.loadingDiv=loadingDiv=createElement(DIV,{className:PREFIX+"loading"},extend(loadingOptions.style,{zIndex:10,display:NONE}),chart.container),chart.loadingSpan=createElement("span",null,loadingOptions.labelStyle,loadingDiv)),chart.loadingSpan.innerHTML=str||options.lang.loading,chart.loadingShown||(css(loadingDiv,{opacity:0,display:"",left:chart.plotLeft+PX,top:chart.plotTop+PX,width:chart.plotWidth+PX,height:chart.plotHeight+PX}),animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration||0}),chart.loadingShown=!0)},hideLoading:function(){var options=this.options,loadingDiv=this.loadingDiv;loadingDiv&&animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration||100,complete:function(){css(loadingDiv,{display:NONE})}}),this.loadingShown=!1}}),extend(Point.prototype,{update:function(options,redraw,animation){var i,point=this,series=point.series,graphic=point.graphic,data=series.data,chart=series.chart,seriesOptions=series.options;redraw=pick(redraw,!0),point.firePointEvent("update",{options:options},function(){point.applyOptions(options),isObject(options)&&(series.getAttribs(),graphic&&(options&&options.marker&&options.marker.symbol?point.graphic=graphic.destroy():graphic.attr(point.pointAttr[point.state||""])),options&&options.dataLabels&&point.dataLabel&&(point.dataLabel=point.dataLabel.destroy())),i=inArray(point,data),series.updateParallelArrays(point,i),seriesOptions.data[i]=point.options,series.isDirty=series.isDirtyData=!0,!series.fixedBox&&series.hasCartesianSeries&&(chart.isDirtyBox=!0),"point"===seriesOptions.legendType&&chart.legend.destroyItem(point),redraw&&chart.redraw(animation)})},remove:function(redraw,animation){var i,point=this,series=point.series,points=series.points,chart=series.chart,data=series.data;setAnimation(animation,chart),redraw=pick(redraw,!0),point.firePointEvent("remove",null,function(){i=inArray(point,data),data.length===points.length&&points.splice(i,1),data.splice(i,1),series.options.data.splice(i,1),series.updateParallelArrays(point,"splice",i,1),point.destroy(),series.isDirty=!0,series.isDirtyData=!0,redraw&&chart.redraw()})}}),extend(Series.prototype,{addPoint:function(options,redraw,shift,animation){var point,isInTheMiddle,x,i,series=this,seriesOptions=series.options,data=series.data,graph=series.graph,area=series.area,chart=series.chart,names=series.xAxis&&series.xAxis.names,currentShift=graph&&graph.shift||0,dataOptions=seriesOptions.data,xData=series.xData;if(setAnimation(animation,chart),shift&&each([graph,area,series.graphNeg,series.areaNeg],function(shape){shape&&(shape.shift=currentShift+1)}),area&&(area.isArea=!0),redraw=pick(redraw,!0),point={series:series},series.pointClass.prototype.applyOptions.apply(point,[options]),x=point.x,i=xData.length,series.requireSorting&&x<xData[i-1])for(isInTheMiddle=!0;i&&xData[i-1]>x;)i--;series.updateParallelArrays(point,"splice",i,0,0),series.updateParallelArrays(point,i),names&&(names[x]=point.name),dataOptions.splice(i,0,options),isInTheMiddle&&(series.data.splice(i,0,null),series.processData()),"point"===seriesOptions.legendType&&series.generatePoints(),shift&&(data[0]&&data[0].remove?data[0].remove(!1):(data.shift(),series.updateParallelArrays(point,"shift"),dataOptions.shift())),series.isDirty=!0,series.isDirtyData=!0,redraw&&(series.getAttribs(),chart.redraw())},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,!0),series.isRemoving||(series.isRemoving=!0,fireEvent(series,"remove",null,function(){series.destroy(),chart.isDirtyLegend=chart.isDirtyBox=!0,chart.linkSeries(),redraw&&chart.redraw(animation)})),series.isRemoving=!1},update:function(newOptions,redraw){var n,chart=this.chart,oldOptions=this.userOptions,oldType=this.type,proto=seriesTypes[oldType].prototype;newOptions=merge(oldOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},newOptions),this.remove(!1);for(n in proto)proto.hasOwnProperty(n)&&(this[n]=UNDEFINED);extend(this,seriesTypes[newOptions.type||oldType].prototype),this.init(chart,newOptions),pick(redraw,!0)&&chart.redraw(!1)}}),extend(Axis.prototype,{update:function(newOptions,redraw){var chart=this.chart;newOptions=chart.options[this.coll][this.options.index]=merge(this.userOptions,newOptions),this.destroy(!0),this._addedPlotLB=this.userMin=this.userMax=UNDEFINED,this.init(chart,extend(newOptions,{events:UNDEFINED})),chart.isDirtyBox=!0,pick(redraw,!0)&&chart.redraw()},remove:function(redraw){var chart=this.chart,key=this.coll;each(this.series,function(series){series.remove(!1)}),erase(chart.axes,this),erase(chart[key],this),chart.options[key].splice(this.options.index,1),each(chart[key],function(axis,i){axis.options.index=i}),this.destroy(),chart.isDirtyBox=!0,pick(redraw,!0)&&chart.redraw()},setTitle:function(newTitleOptions,redraw){this.update({title:newTitleOptions},redraw)},setCategories:function(categories,redraw){this.update({categories:categories},redraw)}});var LineSeries=extendClass(Series);seriesTypes.line=LineSeries,defaultPlotOptions.area=merge(defaultSeriesOptions,{threshold:0});var AreaSeries=extendClass(Series,{type:"area",getSegments:function(){var plotX,plotY,val,i,x,segments=[],segment=[],keys=[],xAxis=this.xAxis,yAxis=this.yAxis,stack=yAxis.stacks[this.stackKey],pointMap={},points=this.points,connectNulls=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<points.length;i++)pointMap[points[i].x]=points[i];for(x in stack)null!==stack[x].total&&keys.push(+x);keys.sort(function(a,b){return a-b}),each(keys,function(x){(!connectNulls||pointMap[x]&&null!==pointMap[x].y)&&(pointMap[x]?segment.push(pointMap[x]):(plotX=xAxis.translate(x),val=stack[x].percent?stack[x].total?100*stack[x].cum/stack[x].total:0:stack[x].cum,plotY=yAxis.toPixels(val,!0),segment.push({y:null,plotX:plotX,clientX:plotX,plotY:plotY,yBottom:plotY,onMouseOver:noop})))}),segment.length&&segments.push(segment)}else Series.prototype.getSegments.call(this),segments=this.segments;this.segments=segments},getSegmentPath:function(segment){var i,yBottom,segmentPath=Series.prototype.getSegmentPath.call(this,segment),areaSegmentPath=[].concat(segmentPath),options=this.options,segLength=segmentPath.length,translatedThreshold=this.yAxis.getThreshold(options.threshold);if(3===segLength&&areaSegmentPath.push(L,segmentPath[1],segmentPath[2]),options.stacking&&!this.closedStacks)for(i=segment.length-1;i>=0;i--)yBottom=pick(segment[i].yBottom,translatedThreshold),i<segment.length-1&&options.step&&areaSegmentPath.push(segment[i+1].plotX,yBottom),areaSegmentPath.push(segment[i].plotX,yBottom);else this.closeSegment(areaSegmentPath,segment,translatedThreshold);return this.areaPath=this.areaPath.concat(areaSegmentPath),segmentPath},closeSegment:function(path,segment,translatedThreshold){path.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold)},drawGraph:function(){this.areaPath=[],Series.prototype.drawGraph.apply(this);var series=this,areaPath=this.areaPath,options=this.options,negativeColor=options.negativeColor,negativeFillColor=options.negativeFillColor,props=[["area",this.color,options.fillColor]];(negativeColor||negativeFillColor)&&props.push(["areaNeg",negativeColor,negativeFillColor]),each(props,function(prop){var areaKey=prop[0],area=series[areaKey];area?area.animate({d:areaPath}):series[areaKey]=series.chart.renderer.path(areaPath).attr({fill:pick(prop[2],Color(prop[1]).setOpacity(pick(options.fillOpacity,.75)).get()),zIndex:0}).add(series.group)})},drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.area=AreaSeries,defaultPlotOptions.spline=merge(defaultSeriesOptions);var SplineSeries=extendClass(Series,{type:"spline",getPointSpline:function(segment,point,i){var leftContX,leftContY,rightContX,rightContY,ret,smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1];if(lastPoint&&nextPoint){var correction,lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY;leftContX=(smoothing*plotX+lastX)/denom,leftContY=(smoothing*plotY+lastY)/denom,rightContX=(smoothing*plotX+nextX)/denom,rightContY=(smoothing*plotY+nextY)/denom,correction=(rightContY-leftContY)*(rightContX-plotX)/(rightContX-leftContX)+plotY-rightContY,leftContY+=correction,rightContY+=correction,leftContY>lastY&&leftContY>plotY?(leftContY=mathMax(lastY,plotY),rightContY=2*plotY-leftContY):lastY>leftContY&&plotY>leftContY&&(leftContY=mathMin(lastY,plotY),rightContY=2*plotY-leftContY),rightContY>nextY&&rightContY>plotY?(rightContY=mathMax(nextY,plotY),leftContY=2*plotY-rightContY):nextY>rightContY&&plotY>rightContY&&(rightContY=mathMin(nextY,plotY),leftContY=2*plotY-rightContY),point.rightContX=rightContX,point.rightContY=rightContY}return i?(ret=["C",lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY],lastPoint.rightContX=lastPoint.rightContY=null):ret=[M,plotX,plotY],ret}});seriesTypes.spline=SplineSeries,defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);var areaProto=AreaSeries.prototype,AreaSplineSeries=extendClass(SplineSeries,{type:"areaspline",closedStacks:!0,getSegmentPath:areaProto.getSegmentPath,closeSegment:areaProto.closeSegment,drawGraph:areaProto.drawGraph,drawLegendSymbol:LegendSymbolMixin.drawRectangle});seriesTypes.areaspline=AreaSplineSeries,defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});var ColumnSeries=extendClass(Series,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;chart.hasRendered&&each(chart.series,function(otherSeries){otherSeries.type===series.type&&(otherSeries.isDirty=!0)})},getColumnMetrics:function(){var stackKey,columnIndex,series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,reversedXAxis=xAxis.reversed,stackGroups={},columnCount=0;options.grouping===!1?columnCount=1:each(series.chart.series,function(otherSeries){var otherOptions=otherSeries.options,otherYAxis=otherSeries.yAxis;otherSeries.type===series.type&&otherSeries.visible&&yAxis.len===otherYAxis.len&&yAxis.pos===otherYAxis.pos&&(otherOptions.stacking?(stackKey=otherSeries.stackKey,stackGroups[stackKey]===UNDEFINED&&(stackGroups[stackKey]=columnCount++),columnIndex=stackGroups[stackKey]):otherOptions.grouping!==!1&&(columnIndex=columnCount++),otherSeries.columnIndex=columnIndex)});var categoryWidth=mathMin(mathAbs(xAxis.transA)*(xAxis.ordinalSlope||options.pointRange||xAxis.closestPointRange||1),xAxis.len),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=pick(optionPointWidth,pointOffsetWidth-2*pointPadding),colIndex=(reversedXAxis?columnCount-(series.columnIndex||0):series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-categoryWidth/2)*(reversedXAxis?-1:1);return series.columnMetrics={width:pointWidth,offset:pointXOffset}},translate:function(){var series=this,chart=series.chart,options=series.options,borderWidth=options.borderWidth,yAxis=series.yAxis,threshold=options.threshold,translatedThreshold=series.translatedThreshold=yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5),metrics=series.getColumnMetrics(),pointWidth=metrics.width,seriesBarW=series.barW=mathCeil(mathMax(pointWidth,1+2*borderWidth)),pointXOffset=series.pointXOffset=metrics.offset,xCrisp=-(borderWidth%2?.5:0),yCrisp=borderWidth%2?.5:1;chart.renderer.isVML&&chart.inverted&&(yCrisp+=1),Series.prototype.translate.apply(series),each(series.points,function(point){var right,bottom,fromTop,fromLeft,yBottom=pick(point.yBottom,translatedThreshold),plotY=mathMin(mathMax(-999-yBottom,point.plotY),yAxis.len+999+yBottom),barX=point.plotX+pointXOffset,barW=seriesBarW,barY=mathMin(plotY,yBottom),barH=mathMax(plotY,yBottom)-barY;mathAbs(barH)<minPointLength&&minPointLength&&(barH=minPointLength,barY=mathRound(mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(yAxis.translate(point.y,0,1,0,1)<=translatedThreshold?minPointLength:0))),point.barX=barX,point.pointWidth=pointWidth,fromLeft=mathAbs(barX)<.5,right=mathRound(barX+barW)+xCrisp,barX=mathRound(barX)+xCrisp,barW=right-barX,fromTop=mathAbs(barY)<.5,bottom=mathRound(barY+barH)+yCrisp,barY=mathRound(barY)+yCrisp,barH=bottom-barY,fromLeft&&(barX+=1,barW-=1),fromTop&&(barY-=1,barH+=1),point.shapeType="rect",point.shapeArgs={x:barX,y:barY,width:barW,height:barH}})},getSymbol:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,drawGraph:noop,drawPoints:function(){var shapeArgs,series=this,chart=this.chart,options=series.options,renderer=chart.renderer,animationLimit=chart.options.animationLimit||250;each(series.points,function(point){var plotY=point.plotY,graphic=point.graphic;plotY===UNDEFINED||isNaN(plotY)||null===point.y?graphic&&(point.graphic=graphic.destroy()):(shapeArgs=point.shapeArgs,graphic?(stop(graphic),graphic[chart.pointCount<animationLimit?"animate":"attr"](merge(shapeArgs))):point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(series.group).shadow(options.shadow,null,options.stacking&&!options.borderRadius))
})},drawTracker:TrackerMixin.drawTrackerPoint,animate:function(init){var translatedThreshold,series=this,yAxis=this.yAxis,options=series.options,inverted=this.chart.inverted,attr={};hasSVG&&(init?(attr.scaleY=.001,translatedThreshold=mathMin(yAxis.pos+yAxis.len,mathMax(yAxis.pos,yAxis.toPixels(options.threshold))),inverted?attr.translateX=translatedThreshold-yAxis.len:attr.translateY=translatedThreshold,series.group.attr(attr)):(attr.scaleY=1,attr[inverted?"translateX":"translateY"]=yAxis.pos,series.group.animate(attr,series.options.animation),series.animate=null))},remove:function(){var series=this,chart=series.chart;chart.hasRendered&&each(chart.series,function(otherSeries){otherSeries.type===series.type&&(otherSeries.isDirty=!0)}),Series.prototype.remove.apply(series,arguments)}});seriesTypes.column=ColumnSeries,defaultPlotOptions.bar=merge(defaultPlotOptions.column);var BarSeries=extendClass(ColumnSeries,{type:"bar",inverted:!0});seriesTypes.bar=BarSeries,defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1});var ScatterSeries=extendClass(Series,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,drawTracker:TrackerMixin.drawTrackerPoint,drawGraph:function(){this.options.lineWidth&&Series.prototype.drawGraph.call(this)},setTooltipPoints:noop});seriesTypes.scatter=ScatterSeries,defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var toggleSlice,point=this;return point.y<0&&(point.y=null),extend(point,{visible:point.visible!==!1,name:pick(point.name,"Slice")}),toggleSlice=function(e){point.slice("select"===e.type)},addEvent(point,"select",toggleSlice),addEvent(point,"unselect",toggleSlice),point},setVisible:function(vis){var method,point=this,series=point.series,chart=series.chart;point.visible=point.options.visible=vis=vis===UNDEFINED?!point.visible:vis,series.options.data[inArray(point,series.data)]=point.options,method=vis?"show":"hide",each(["graphic","dataLabel","connector","shadowGroup"],function(key){point[key]&&point[key][method]()}),point.legendItem&&chart.legend.colorizeItem(point,vis),!series.isDirty&&series.options.ignoreHiddenPoint&&(series.isDirty=!0,chart.redraw())},slice:function(sliced,redraw,animation){var translation,point=this,series=point.series,chart=series.chart;setAnimation(animation,chart),redraw=pick(redraw,!0),point.sliced=point.options.sliced=sliced=defined(sliced)?sliced:!point.sliced,series.options.data[inArray(point,series.data)]=point.options,translation=sliced?point.slicedTranslation:{translateX:0,translateY:0},point.graphic.animate(translation),point.shadowGroup&&point.shadowGroup.animate(translation)}}),PieSeries={type:"pie",isCartesian:!1,pointClass:PiePoint,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:noop,animate:function(init){var series=this,points=series.points,startAngleRad=series.startAngleRad;init||(each(points,function(point){var graphic=point.graphic,args=point.shapeArgs;graphic&&(graphic.attr({r:series.center[3]/2,start:startAngleRad,end:startAngleRad}),graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation))}),series.animate=null)},setData:function(data,redraw){Series.prototype.setData.call(this,data,!1),this.processData(),this.generatePoints(),pick(redraw,!0)&&this.chart.redraw()},generatePoints:function(){var i,points,len,point,total=0,ignoreHiddenPoint=this.options.ignoreHiddenPoint;for(Series.prototype.generatePoints.call(this),points=this.points,len=points.length,i=0;len>i;i++)point=points[i],total+=ignoreHiddenPoint&&!point.visible?0:point.y;for(this.total=total,i=0;len>i;i++)point=points[i],point.percentage=total>0?point.y/total*100:0,point.total=total},translate:function(positions){this.generatePoints();var start,end,angle,radiusX,radiusY,i,point,series=this,cumulative=0,precision=1e3,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,startAngle=options.startAngle||0,startAngleRad=series.startAngleRad=mathPI/180*(startAngle-90),endAngleRad=series.endAngleRad=mathPI/180*((options.endAngle||startAngle+360)-90),circ=endAngleRad-startAngleRad,points=series.points,labelDistance=options.dataLabels.distance,ignoreHiddenPoint=options.ignoreHiddenPoint,len=points.length;for(positions||(series.center=positions=series.getCenter()),series.getX=function(y,left){return angle=math.asin((y-positions[1])/(positions[2]/2+labelDistance)),positions[0]+(left?-1:1)*mathCos(angle)*(positions[2]/2+labelDistance)},i=0;len>i;i++)point=points[i],start=startAngleRad+cumulative*circ,(!ignoreHiddenPoint||point.visible)&&(cumulative+=point.percentage/100),end=startAngleRad+cumulative*circ,point.shapeType="arc",point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/(2.5-point.percentage/100),innerR:positions[3]/2,start:mathRound(start*precision)/precision,end:mathRound(end*precision)/precision},angle=(end+start)/2,angle>.75*circ&&(angle-=2*mathPI),point.slicedTranslation={translateX:mathRound(mathCos(angle)*slicedOffset),translateY:mathRound(mathSin(angle)*slicedOffset)},radiusX=mathCos(angle)*positions[2]/2,radiusY=mathSin(angle)*positions[2]/2,point.tooltipPos=[positions[0]+.7*radiusX,positions[1]+.7*radiusY],point.half=-mathPI/2>angle||angle>mathPI/2?1:0,point.angle=angle,connectorOffset=mathMin(connectorOffset,labelDistance/2),point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,0>labelDistance?"center":point.half?"right":"left",angle]},setTooltipPoints:noop,drawGraph:null,drawPoints:function(){var groupTranslation,graphic,shadowGroup,shapeArgs,series=this,chart=series.chart,renderer=chart.renderer,shadow=series.options.shadow;shadow&&!series.shadowGroup&&(series.shadowGroup=renderer.g("shadow").add(series.group)),each(series.points,function(point){graphic=point.graphic,shapeArgs=point.shapeArgs,shadowGroup=point.shadowGroup,shadow&&!shadowGroup&&(shadowGroup=point.shadowGroup=renderer.g("shadow").add(series.shadowGroup)),groupTranslation=point.sliced?point.slicedTranslation:{translateX:0,translateY:0},shadowGroup&&shadowGroup.attr(groupTranslation),graphic?graphic.animate(extend(shapeArgs,groupTranslation)):point.graphic=graphic=renderer.arc(shapeArgs).setRadialReference(series.center).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).attr({"stroke-linejoin":"round"}).attr(groupTranslation).add(series.group).shadow(shadow,shadowGroup),void 0!==point.visible&&point.setVisible(point.visible)})},sortByAngle:function(points,sign){points.sort(function(a,b){return void 0!==a.angle&&(b.angle-a.angle)*sign})},drawTracker:TrackerMixin.drawTrackerPoint,drawLegendSymbol:LegendSymbolMixin.drawRectangle,getCenter:CenteredSeriesMixin.getCenter,getSymbol:noop};PieSeries=extendClass(Series,PieSeries),seriesTypes.pie=PieSeries,Series.prototype.drawDataLabels=function(){var pointOptions,generalOptions,str,dataLabelsGroup,series=this,seriesOptions=series.options,cursor=seriesOptions.cursor,options=seriesOptions.dataLabels,points=series.points;(options.enabled||series._hasPointLabels)&&(series.dlProcessOptions&&series.dlProcessOptions(options),dataLabelsGroup=series.plotGroup("dataLabelsGroup","data-labels",series.visible?VISIBLE:HIDDEN,options.zIndex||6),generalOptions=options,each(points,function(point){var enabled,labelConfig,attr,name,rotation,dataLabel=point.dataLabel,connector=point.connector,isNew=!0;if(pointOptions=point.options&&point.options.dataLabels,enabled=pick(pointOptions&&pointOptions.enabled,generalOptions.enabled),dataLabel&&!enabled)point.dataLabel=dataLabel.destroy();else if(enabled){if(options=merge(generalOptions,pointOptions),rotation=options.rotation,labelConfig=point.getLabelConfig(),str=options.format?format(options.format,labelConfig):options.formatter.call(labelConfig,options),options.style.color=pick(options.color,options.style.color,series.color,"black"),dataLabel)defined(str)?(dataLabel.attr({text:str}),isNew=!1):(point.dataLabel=dataLabel=dataLabel.destroy(),connector&&(point.connector=connector.destroy()));else if(defined(str)){attr={fill:options.backgroundColor,stroke:options.borderColor,"stroke-width":options.borderWidth,r:options.borderRadius||0,rotation:rotation,padding:options.padding,zIndex:1};for(name in attr)attr[name]===UNDEFINED&&delete attr[name];dataLabel=point.dataLabel=series.chart.renderer[rotation?"text":"label"](str,0,-999,null,null,null,options.useHTML).attr(attr).css(extend(options.style,cursor&&{cursor:cursor})).add(dataLabelsGroup).shadow(options.shadow)}dataLabel&&series.alignDataLabel(point,dataLabel,options,null,isNew)}}))},Series.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var alignAttr,chart=this.chart,inverted=chart.inverted,plotX=pick(point.plotX,-999),plotY=pick(point.plotY,-999),bBox=dataLabel.getBBox(),visible=this.visible&&(point.series.forceDL||chart.isInsidePlot(point.plotX,point.plotY,inverted));visible&&(alignTo=extend({x:inverted?chart.plotWidth-plotY:plotX,y:mathRound(inverted?chart.plotHeight-plotX:plotY),width:0,height:0},alignTo),extend(options,{width:bBox.width,height:bBox.height}),options.rotation?(alignAttr={align:options.align,x:alignTo.x+options.x+alignTo.width/2,y:alignTo.y+options.y+alignTo.height/2},dataLabel[isNew?"attr":"animate"](alignAttr)):(dataLabel.align(options,null,alignTo),alignAttr=dataLabel.alignAttr,"justify"===pick(options.overflow,"justify")?this.justifyDataLabel(dataLabel,options,alignAttr,bBox,alignTo,isNew):pick(options.crop,!0)&&(visible=chart.isInsidePlot(alignAttr.x,alignAttr.y)&&chart.isInsidePlot(alignAttr.x+bBox.width,alignAttr.y+bBox.height)))),visible||(dataLabel.attr({y:-999}),dataLabel.placed=!1)},Series.prototype.justifyDataLabel=function(dataLabel,options,alignAttr,bBox,alignTo,isNew){var off,justified,chart=this.chart,align=options.align,verticalAlign=options.verticalAlign;off=alignAttr.x,0>off&&("right"===align?options.align="left":options.x=-off,justified=!0),off=alignAttr.x+bBox.width,off>chart.plotWidth&&("left"===align?options.align="right":options.x=chart.plotWidth-off,justified=!0),off=alignAttr.y,0>off&&("bottom"===verticalAlign?options.verticalAlign="top":options.y=-off,justified=!0),off=alignAttr.y+bBox.height,off>chart.plotHeight&&("top"===verticalAlign?options.verticalAlign="bottom":options.y=chart.plotHeight-off,justified=!0),justified&&(dataLabel.placed=!isNew,dataLabel.align(options,null,alignTo))},seriesTypes.pie&&(seriesTypes.pie.prototype.drawDataLabels=function(){var point,connector,connectorPath,dataLabel,dataLabelWidth,labelPos,labelHeight,x,y,visibility,rankArr,i,j,series=this,data=series.data,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,softConnector=pick(options.softConnector,!0),distanceOption=options.distance,seriesCenter=series.center,radius=seriesCenter[2]/2,centerY=seriesCenter[1],outside=distanceOption>0,halves=[[],[]],overflow=[0,0,0,0],sort=function(a,b){return b.y-a.y};if(series.visible&&(options.enabled||series._hasPointLabels)){for(Series.prototype.drawDataLabels.apply(series),each(data,function(point){point.dataLabel&&point.visible&&halves[point.half].push(point)}),i=0;!labelHeight&&data[i];)labelHeight=data[i]&&data[i].dataLabel&&(data[i].dataLabel.getBBox().height||21),i++;for(i=2;i--;){var slotsLength,pos,slotIndex,slots=[],usedSlots=[],points=halves[i],length=points.length;if(series.sortByAngle(points,i-.5),distanceOption>0){for(pos=centerY-radius-distanceOption;centerY+radius+distanceOption>=pos;pos+=labelHeight)slots.push(pos);if(slotsLength=slots.length,length>slotsLength){for(rankArr=[].concat(points),rankArr.sort(sort),j=length;j--;)rankArr[j].rank=j;for(j=length;j--;)points[j].rank>=slotsLength&&points.splice(j,1);length=points.length}for(j=0;length>j;j++){point=points[j],labelPos=point.labelPos;var distance,slotI,closest=9999;for(slotI=0;slotsLength>slotI;slotI++)distance=mathAbs(slots[slotI]-labelPos[1]),closest>distance&&(closest=distance,slotIndex=slotI);if(j>slotIndex&&null!==slots[j])slotIndex=j;else if(length-j+slotIndex>slotsLength&&null!==slots[j])for(slotIndex=slotsLength-length+j;null===slots[slotIndex];)slotIndex++;else for(;null===slots[slotIndex];)slotIndex++;usedSlots.push({i:slotIndex,y:slots[slotIndex]}),slots[slotIndex]=null}usedSlots.sort(sort)}for(j=0;length>j;j++){var slot,naturalY;point=points[j],labelPos=point.labelPos,dataLabel=point.dataLabel,visibility=point.visible===!1?HIDDEN:VISIBLE,naturalY=labelPos[1],distanceOption>0?(slot=usedSlots.pop(),slotIndex=slot.i,y=slot.y,(naturalY>y&&null!==slots[slotIndex+1]||y>naturalY&&null!==slots[slotIndex-1])&&(y=naturalY)):y=naturalY,x=options.justify?seriesCenter[0]+(i?-1:1)*(radius+distanceOption):series.getX(0===slotIndex||slotIndex===slots.length-1?naturalY:y,i),dataLabel._attr={visibility:visibility,align:labelPos[6]},dataLabel._pos={x:x+options.x+({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y-10},dataLabel.connX=x,dataLabel.connY=y,null===this.options.size&&(dataLabelWidth=dataLabel.width,connectorPadding>x-dataLabelWidth?overflow[3]=mathMax(mathRound(dataLabelWidth-x+connectorPadding),overflow[3]):x+dataLabelWidth>plotWidth-connectorPadding&&(overflow[1]=mathMax(mathRound(x+dataLabelWidth-plotWidth+connectorPadding),overflow[1])),0>y-labelHeight/2?overflow[0]=mathMax(mathRound(-y+labelHeight/2),overflow[0]):y+labelHeight/2>plotHeight&&(overflow[2]=mathMax(mathRound(y+labelHeight/2-plotHeight),overflow[2])))}}(0===arrayMax(overflow)||this.verifyDataLabelOverflow(overflow))&&(this.placeDataLabels(),outside&&connectorWidth&&each(this.points,function(point){connector=point.connector,labelPos=point.labelPos,dataLabel=point.dataLabel,dataLabel&&dataLabel._pos?(visibility=dataLabel._attr.visibility,x=dataLabel.connX,y=dataLabel.connY,connectorPath=softConnector?[M,x+("left"===labelPos[6]?5:-5),y,"C",x,y,2*labelPos[2]-labelPos[4],2*labelPos[3]-labelPos[5],labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]]:[M,x+("left"===labelPos[6]?5:-5),y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]],connector?(connector.animate({d:connectorPath}),connector.attr("visibility",visibility)):point.connector=connector=series.chart.renderer.path(connectorPath).attr({"stroke-width":connectorWidth,stroke:options.connectorColor||point.color||"#606060",visibility:visibility}).add(series.group)):connector&&(point.connector=connector.destroy())}))}},seriesTypes.pie.prototype.placeDataLabels=function(){each(this.points,function(point){var _pos,dataLabel=point.dataLabel;dataLabel&&(_pos=dataLabel._pos,_pos?(dataLabel.attr(dataLabel._attr),dataLabel[dataLabel.moved?"animate":"attr"](_pos),dataLabel.moved=!0):dataLabel&&dataLabel.attr({y:-999}))})},seriesTypes.pie.prototype.alignDataLabel=noop,seriesTypes.pie.prototype.verifyDataLabelOverflow=function(overflow){var ret,center=this.center,options=this.options,centerOption=options.center,minSize=options.minSize||80,newSize=minSize;return null!==centerOption[0]?newSize=mathMax(center[2]-mathMax(overflow[1],overflow[3]),minSize):(newSize=mathMax(center[2]-overflow[1]-overflow[3],minSize),center[0]+=(overflow[3]-overflow[1])/2),null!==centerOption[1]?newSize=mathMax(mathMin(newSize,center[2]-mathMax(overflow[0],overflow[2])),minSize):(newSize=mathMax(mathMin(newSize,center[2]-overflow[0]-overflow[2]),minSize),center[1]+=(overflow[0]-overflow[2])/2),newSize<center[2]?(center[2]=newSize,this.translate(center),each(this.points,function(point){point.dataLabel&&(point.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):ret=!0,ret}),seriesTypes.column&&(seriesTypes.column.prototype.alignDataLabel=function(point,dataLabel,options,alignTo,isNew){var chart=this.chart,inverted=chart.inverted,dlBox=point.dlBox||point.shapeArgs,below=point.below||point.plotY>pick(this.translatedThreshold,chart.plotSizeY),inside=pick(options.inside,!!this.options.stacking);dlBox&&(alignTo=merge(dlBox),inverted&&(alignTo={x:chart.plotWidth-alignTo.y-alignTo.height,y:chart.plotHeight-alignTo.x-alignTo.width,width:alignTo.height,height:alignTo.width}),inside||(inverted?(alignTo.x+=below?0:alignTo.width,alignTo.width=0):(alignTo.y+=below?alignTo.height:0,alignTo.height=0))),options.align=pick(options.align,!inverted||inside?"center":below?"right":"left"),options.verticalAlign=pick(options.verticalAlign,inverted||inside?"middle":below?"top":"bottom"),Series.prototype.alignDataLabel.call(this,point,dataLabel,options,alignTo,isNew)}),extend(Highcharts,{Axis:Axis,Chart:Chart,Color:Color,Point:Point,Tick:Tick,Tooltip:Tooltip,Renderer:Renderer,Series:Series,SVGElement:SVGElement,SVGRenderer:SVGRenderer,arrayMin:arrayMin,arrayMax:arrayMax,charts:charts,dateFormat:dateFormat,format:format,pathAnim:pathAnim,getOptions:getOptions,hasBidiBug:hasBidiBug,isTouchDevice:isTouchDevice,numberFormat:numberFormat,seriesTypes:seriesTypes,setOptions:setOptions,addEvent:addEvent,removeEvent:removeEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,splat:splat,extendClass:extendClass,pInt:pInt,wrap:wrap,svg:hasSVG,canvas:useCanVG,vml:!hasSVG&&!useCanVG,product:PRODUCT,version:VERSION})}(),function($){$.fn.htmlarea=function(opts){if(opts&&"string"==typeof opts){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var htmlarea=jHtmlArea(this[0]),f=htmlarea[opts];if(f)return f.apply(htmlarea,args)}return this.each(function(){jHtmlArea(this,opts)})};var jHtmlArea=window.jHtmlArea=function(elem,options){return elem.jquery?jHtmlArea(elem[0]):elem.jhtmlareaObject?elem.jhtmlareaObject:new jHtmlArea.fn.init(elem,options)};jHtmlArea.fn=jHtmlArea.prototype={jhtmlarea:"0.7.5",init:function(elem,options){if("textarea"===elem.nodeName.toLowerCase()){var opts=$.extend({},jHtmlArea.defaultOptions,options);elem.jhtmlareaObject=this;var textarea=this.textarea=$(elem),container=this.container=$("<div/>").addClass("jHtmlArea").width(textarea.width()).insertAfter(textarea),toolbar=this.toolbar=$("<div/>").addClass("ToolBar").appendTo(container);priv.initToolBar.call(this,opts);var iframe=this.iframe=$("<iframe/>").height(textarea.height());iframe.width(textarea.width()-($.browser.msie?0:4));var htmlarea=this.htmlarea=$("<div/>").append(iframe);container.append(htmlarea).append(textarea.hide()),priv.initEditor.call(this,opts),priv.attachEditorEvents.call(this),iframe.height(iframe.height()-toolbar.height()),toolbar.width(textarea.width()-2),opts.loaded&&opts.loaded.call(this)}},dispose:function(){this.textarea.show().insertAfter(this.container),this.container.remove(),this.textarea[0].jhtmlareaObject=null},execCommand:function(a,b,c){this.iframe[0].contentWindow.focus(),this.editor.execCommand(a,b||!1,c||null),this.updateTextArea()},ec:function(a,b,c){this.execCommand(a,b,c)},queryCommandValue:function(a){return this.iframe[0].contentWindow.focus(),this.editor.queryCommandValue(a)},qc:function(a){return this.queryCommandValue(a)},getSelectedHTML:function(){if($.browser.msie)return this.getRange().htmlText;var elem=this.getRange().cloneContents();return $("<p/>").append($(elem)).html()},getSelection:function(){return $.browser.msie?this.editor.selection:this.iframe[0].contentDocument.defaultView.getSelection()},getRange:function(){var s=this.getSelection();return s?s.getRangeAt?s.getRangeAt(0):s.createRange():null},html:function(v){return v?(this.textarea.val(v),void this.updateHtmlArea()):this.toHtmlString()},pasteHTML:function(html){this.iframe[0].contentWindow.focus();var r=this.getRange();$.browser.msie?r.pasteHTML(html):$.browser.mozilla?(r.deleteContents(),r.insertNode($(0!=html.indexOf("<")?$("<span/>").append(html):html)[0])):(r.deleteContents(),r.insertNode($(this.iframe[0].contentWindow.document.createElement("span")).append($(0!=html.indexOf("<")?"<span>"+html+"</span>":html))[0])),r.collapse(!1),r.select()},cut:function(){this.ec("cut")},copy:function(){this.ec("copy")},paste:function(){this.ec("paste")},bold:function(){this.ec("bold")},italic:function(){this.ec("italic")},underline:function(){this.ec("underline")},strikeThrough:function(){this.ec("strikethrough")},image:function(url){$.browser.msie&&!url?this.ec("insertImage",!0):this.ec("insertImage",!1,url||prompt("Image URL:","http://"))},removeFormat:function(){this.ec("removeFormat",!1,[]),this.unlink()},link:function(){$.browser.msie?this.ec("createLink",!0):this.ec("createLink",!1,prompt("Link URL:","http://"))},unlink:function(){this.ec("unlink",!1,[])},orderedList:function(){this.ec("insertorderedlist")},unorderedList:function(){this.ec("insertunorderedlist")},superscript:function(){this.ec("superscript")},subscript:function(){this.ec("subscript")},p:function(){this.formatBlock("<p>")},h1:function(){this.heading(1)},h2:function(){this.heading(2)},h3:function(){this.heading(3)},h4:function(){this.heading(4)},h5:function(){this.heading(5)},h6:function(){this.heading(6)},heading:function(h){this.formatBlock($.browser.msie?"Heading "+h:"h"+h)},indent:function(){this.ec("indent")},outdent:function(){this.ec("outdent")},insertHorizontalRule:function(){this.ec("insertHorizontalRule",!1,"ht")},justifyLeft:function(){this.ec("justifyLeft")},justifyCenter:function(){this.ec("justifyCenter")},justifyRight:function(){this.ec("justifyRight")},increaseFontSize:function(){$.browser.msie?this.ec("fontSize",!1,this.qc("fontSize")+1):$.browser.safari?this.getRange().surroundContents($(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","larger")[0]):this.ec("increaseFontSize",!1,"big")},decreaseFontSize:function(){$.browser.msie?this.ec("fontSize",!1,this.qc("fontSize")-1):$.browser.safari?this.getRange().surroundContents($(this.iframe[0].contentWindow.document.createElement("span")).css("font-size","smaller")[0]):this.ec("decreaseFontSize",!1,"small")},forecolor:function(c){this.ec("foreColor",!1,c||prompt("Enter HTML Color:","#"))},formatBlock:function(v){this.ec("formatblock",!1,v||null)},showHTMLView:function(){this.updateTextArea(),this.textarea.show(),this.htmlarea.hide(),$("ul li:not(li:has(a.html))",this.toolbar).hide(),$("ul:not(:has(:visible))",this.toolbar).hide(),$("ul li a.html",this.toolbar).addClass("highlighted")},hideHTMLView:function(){this.updateHtmlArea(),this.textarea.hide(),this.htmlarea.show(),$("ul",this.toolbar).show(),$("ul li",this.toolbar).show().find("a.html").removeClass("highlighted")},toggleHTMLView:function(){this.textarea.is(":hidden")?this.showHTMLView():this.hideHTMLView()},toHtmlString:function(){return this.editor.body.innerHTML},toString:function(){return this.editor.body.innerText},updateTextArea:function(){this.textarea.val(this.toHtmlString())},updateHtmlArea:function(){this.editor.body.innerHTML=this.textarea.val()}},jHtmlArea.fn.init.prototype=jHtmlArea.fn,jHtmlArea.defaultOptions={toolbar:[["html"],["bold","italic","underline","strikethrough","|","subscript","superscript"],["increasefontsize","decreasefontsize"],["orderedlist","unorderedlist"],["indent","outdent"],["justifyleft","justifycenter","justifyright"],["link","unlink","image","horizontalrule"],["p","h1","h2","h3","h4","h5","h6"],["cut","copy","paste"]],css:null,toolbarText:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strike-Through",cut:"Cut",copy:"Copy",paste:"Paste",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",indent:"Indent",outdent:"Outdent",horizontalrule:"Insert Horizontal Rule",justifyleft:"Left Justify",justifycenter:"Center Justify",justifyright:"Right Justify",increasefontsize:"Increase Font Size",decreasefontsize:"Decrease Font Size",forecolor:"Text Color",link:"Insert Link",unlink:"Remove Link",image:"Insert Image",orderedlist:"Insert Ordered List",unorderedlist:"Insert Unordered List",subscript:"Subscript",superscript:"Superscript",html:"Show/Hide HTML Source View"}};var priv={toolbarButtons:{strikethrough:"strikeThrough",orderedlist:"orderedList",unorderedlist:"unorderedList",horizontalrule:"insertHorizontalRule",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",increasefontsize:"increaseFontSize",decreasefontsize:"decreaseFontSize",html:function(){this.toggleHTMLView()}},initEditor:function(options){var edit=this.editor=this.iframe[0].contentWindow.document;if(edit.designMode="on",edit.open(),edit.write(this.textarea.val()),edit.close(),options.css){var e=edit.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=options.css,edit.getElementsByTagName("head")[0].appendChild(e)}},initToolBar:function(options){function addButtons(arr){for(var ul=$("<ul/>").appendTo(that.toolbar),i=0;i<arr.length;i++){var e=arr[i];if("string"===(typeof e).toLowerCase())if("|"===e)ul.append($('<li class="separator"/>'));else{var f=function(e){var m=priv.toolbarButtons[e]||e;return"function"===(typeof m).toLowerCase()?function(btn){m.call(this,btn)}:function(){this[m](),this.editor.body.focus()}}(e.toLowerCase()),t=options.toolbarText[e.toLowerCase()];ul.append(menuItem(e.toLowerCase(),t||e,f))}else ul.append(menuItem(e.css,e.text,e.action))}}var that=this,menuItem=function(className,altText,action){return $("<li/>").append($("<a href='javascript:void(0);'/>").addClass(className).attr("title",altText).click(function(){action.call(that,$(this))}))};if(0!==options.toolbar.length&&priv.isArray(options.toolbar[0]))for(var i=0;i<options.toolbar.length;i++)addButtons(options.toolbar[i]);else addButtons(options.toolbar)},attachEditorEvents:function(){var t=this,fnHA=function(){t.updateHtmlArea()};this.textarea.click(fnHA).keyup(fnHA).keydown(fnHA).mousedown(fnHA).blur(fnHA);var fnTA=function(){t.updateTextArea()};if($(this.editor.body).click(fnTA).keyup(fnTA).keydown(fnTA).mousedown(fnTA).blur(fnTA),$("form").submit(function(){t.toggleHTMLView(),t.toggleHTMLView()}),window.__doPostBack){var old__doPostBack=__doPostBack;window.__doPostBack=function(){return t&&t.toggleHTMLView&&(t.toggleHTMLView(),t.toggleHTMLView()),old__doPostBack.apply(window,arguments)}}},isArray:function(v){return v&&"object"==typeof v&&"number"==typeof v.length&&"function"==typeof v.splice&&!v.propertyIsEnumerable("length")}}}(jQuery),function($){if(jHtmlArea){var oldForecolor=jHtmlArea.fn.forecolor;jHtmlArea.fn.forecolor=function(c){if(c)oldForecolor.call(this,c);else{var that=this,rng=this.getRange();jHtmlAreaColorPickerMenu($(".forecolor",this.toolbar),{colorChosen:function(color){$.browser.msie?rng.execCommand("ForeColor",!1,color):that.forecolor(color)}})}}}var menu=window.jHtmlAreaColorPickerMenu=function(ownerElement,options){return new jHtmlAreaColorPickerMenu.fn.init(ownerElement,options)};menu.fn=menu.prototype={jhtmlareacolorpickermenu:"0.7.0",init:function(ownerElement,options){var opts=$.extend({},menu.defaultOptions,options),that=this,owner=this.owner=$(ownerElement),position=owner.position();menu.instance&&menu.instance.hide(),jHtmlAreaColorPickerMenu.instance=this;for(var picker=this.picker=$("<div/>").css({position:"absolute",left:position.left+opts.offsetLeft,top:position.top+owner.height()+opts.offsetTop,"z-index":opts["z-index"]}).addClass("jHtmlAreaColorPickerMenu"),i=0;i<opts.colors.length;i++){var c=opts.colors[i];$("<div/>").css("background-color",c).appendTo(picker).click(function(color){return function(){opts.colorChosen&&opts.colorChosen.call(this,color),that.hide()}}(c))}$("<div/>").html("<div></div>Automatic").addClass("automatic").appendTo(picker).click(function(){opts.colorChosen&&opts.colorChosen.call(this,null),that.hide()});var autoHide=!1;picker.appendTo(owner.parent()).show().mouseout(function(){autoHide=!0,that.currentTimeout=window.setTimeout(function(){autoHide===!0&&that.hide()},1e3)}).mouseover(function(){that.currentTimeout&&(window.clearTimeout(that.currentTimeout),that.currentTimeout=null),autoHide=!1})},hide:function(){this.picker.hide(),this.picker.remove()}},menu.fn.init.prototype=menu.fn,menu.defaultOptions={"z-index":0,offsetTop:0,offsetLeft:0,colors:["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99FFFF","#33FFFF","#66CCCC","#00CCCC","#339999","#336666","#003333","#CCFFFF","#66FFFF","#33CCFF","#3366FF","#3333FF","#000099","#000066","#CCCCFF","#9999FF","#6666CC","#6633FF","#6600CC","#333399","#330099","#FFCCFF","#FF99FF","#CC66CC","#CC33CC","#993399","#663366","#330033"],colorChosen:null}}(jQuery),function(d,f,g,b){function j(n,m){this.element=n,this.options=d.extend({},c,m),this._defaults=c,this._name=e,this.init()}function k(){return!!("ontouchstart"in f)}function a(){var m=g.body||g.documentElement,o=m.style,q="transition";if("string"==typeof o[q])return!0;v=["Moz","Webkit","Khtml","O","ms"],q=q.charAt(0).toUpperCase()+q.substr(1);for(var n=0;n<v.length;n++)if("string"==typeof o[v[n]+q])return!0;return!1}var e="tooltipster",c={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(m,n){n()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},l=!0;a()||(l=!1);var h=k();d(f).on("mousemove.tooltipster",function(){h=!1,d(f).off("mousemove.tooltipster")}),j.prototype={init:function(){var s=d(this.element),o=this,r=!0;if(0==o.options.touchDevices&&h&&(r=!1),g.all&&!g.querySelector&&(r=!1),1==r){if(1==this.options.iconDesktop&&!h||1==this.options.iconTouch&&h){var n=s.attr("title");s.removeAttr("title");var q=o.options.iconTheme,p=d('<span class="'+q.replace(".","")+'" title="'+n+'">'+this.options.icon+"</span>");p.insertAfter(s),s.data("tooltipsterIcon",p),s=p}var m=d.trim(o.options.content).length>0?o.options.content:s.attr("title");s.data("tooltipsterContent",m),s.removeAttr("title"),1!=this.options.touchDevices||!h||"click"!=this.options.trigger&&"hover"!=this.options.trigger?("hover"==this.options.trigger&&(s.on("mouseenter.tooltipster",function(){o.showTooltip()}),1==this.options.interactive?s.on("mouseleave.tooltipster",function(){var u=s.data("tooltipster"),w=!1;if(u!==b&&""!==u){u.mouseenter(function(){w=!0}),u.mouseleave(function(){w=!1});{setTimeout(function(){1==w&&u.mouseleave(function(){})},o.options.interactiveTolerance)}}}):s.on("mouseleave.tooltipster",function(){})),"click"==this.options.trigger&&s.on("click.tooltipster",function(){""==s.data("tooltipster")||s.data("tooltipster")==b?o.showTooltip():o.hideTooltip()})):s.bind("touchstart",function(){o.showTooltip()})}},showTooltip:function(){var o=d(this.element),m=this;o.data("tooltipsterIcon")!==b&&(o=o.data("tooltipsterIcon")),o.hasClass("tooltipster-disable")||(d(".tooltipster-base").not(".tooltipster-dying").length>0&&1==m.options.onlyOne&&d(".tooltipster-base").not(".tooltipster-dying").not(o.data("tooltipster")).each(function(){d(this).addClass("tooltipster-kill");var p=d(this).data("origin");p.data("plugin_tooltipster").hideTooltip()}),o.clearQueue().delay(m.options.delay).queue(function(){m.options.functionBefore(o,function(){if(o.data("tooltipster")!==b&&""!==o.data("tooltipster")){var y=o.data("tooltipster");if(!y.hasClass("tooltipster-kill")){var u="tooltipster-"+m.options.animation;if(y.removeClass("tooltipster-dying"),1==l&&y.clearQueue().addClass(u+"-show"),m.options.timer>0){var r=y.data("tooltipsterTimer");clearTimeout(r),r=setTimeout(function(){y.data("tooltipsterTimer",b),m.hideTooltip()
},m.options.timer),y.data("tooltipsterTimer",r)}1==m.options.touchDevices&&h&&d("body").bind("touchstart",function(D){if(1==m.options.interactive){var F=d(D.target),E=!0;F.parents().each(function(){d(this).hasClass("tooltipster-base")&&(E=!1)}),1==E&&(m.hideTooltip(),d("body").unbind("touchstart"))}else m.hideTooltip(),d("body").unbind("touchstart")})}}else{d("body").css("overflow-x","hidden");var z=o.data("tooltipsterContent"),x=m.options.theme,A=x.replace(".",""),u="tooltipster-"+m.options.animation,t="-webkit-transition-duration: "+m.options.speed+"ms; -webkit-animation-duration: "+m.options.speed+"ms; -moz-transition-duration: "+m.options.speed+"ms; -moz-animation-duration: "+m.options.speed+"ms; -o-transition-duration: "+m.options.speed+"ms; -o-animation-duration: "+m.options.speed+"ms; -ms-transition-duration: "+m.options.speed+"ms; -ms-animation-duration: "+m.options.speed+"ms; transition-duration: "+m.options.speed+"ms; animation-duration: "+m.options.speed+"ms;",p=m.options.fixedWidth>0?"width:"+m.options.fixedWidth+"px;":"",B=m.options.maxWidth>0?"max-width:"+m.options.maxWidth+"px;":"",w=1==m.options.interactive?"pointer-events: auto;":"",y=d('<div class="tooltipster-base '+A+" "+u+'" style="'+p+" "+B+" "+w+" "+t+'"></div>'),s=d('<div class="tooltipster-content"></div>');s.html(z),y.append(s),y.appendTo("body"),o.data("tooltipster",y),y.data("origin",o),m.positionTooltip(),m.options.functionReady(o,y),1==l?y.addClass(u+"-show"):y.css("display","none").removeClass(u).fadeIn(m.options.speed);var C=z,q=setInterval(function(){var D=o.data("tooltipsterContent");0==d("body").find(o).length?(y.addClass("tooltipster-dying"),m.hideTooltip()):C!==D&&""!==D&&(C=D,y.find(".tooltipster-content").html(D),1==m.options.updateAnimation&&(a()?(y.css({width:"","-webkit-transition":"all "+m.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+m.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+m.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+m.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+m.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){y.removeClass("tooltipster-content-changing"),setTimeout(function(){y.css({"-webkit-transition":m.options.speed+"ms","-moz-transition":m.options.speed+"ms","-o-transition":m.options.speed+"ms","-ms-transition":m.options.speed+"ms",transition:m.options.speed+"ms"})},m.options.speed)},m.options.speed)):y.fadeTo(m.options.speed,.5,function(){y.fadeTo(m.options.speed,1)})),m.positionTooltip()),(0==d("body").find(y).length||0==d("body").find(o).length)&&clearInterval(q)},200);if(m.options.timer>0){var r=setTimeout(function(){y.data("tooltipsterTimer",b),m.hideTooltip()},m.options.timer+m.options.speed);y.data("tooltipsterTimer",r)}1==m.options.touchDevices&&h&&d("body").bind("touchstart",function(D){if(1==m.options.interactive){var F=d(D.target),E=!0;F.parents().each(function(){d(this).hasClass("tooltipster-base")&&(E=!1)}),1==E&&(m.hideTooltip(),d("body").unbind("touchstart"))}else m.hideTooltip(),d("body").unbind("touchstart")}),y.mouseleave(function(){})}}),o.dequeue()}))},hideTooltip:function(){var q=d(this.element),m=this;q.data("tooltipsterIcon")!==b&&(q=q.data("tooltipsterIcon"));var p=q.data("tooltipster");if(p==b&&(p=d(".tooltipster-dying")),q.clearQueue(),p!==b&&""!==p){var r=p.data("tooltipsterTimer");r!==b&&clearTimeout(r);var o="tooltipster-"+m.options.animation;1==l?p.clearQueue().removeClass(o+"-show").addClass("tooltipster-dying").delay(m.options.speed).queue(function(){p.remove(),q.data("tooltipster",""),d("body").css("verflow-x",""),m.options.functionAfter(q)}):p.clearQueue().addClass("tooltipster-dying").fadeOut(m.options.speed,function(){p.remove(),q.data("tooltipster",""),d("body").css("verflow-x",""),m.options.functionAfter(q)})}},positionTooltip:function(){function x(){var ao=d(f).scrollLeft();if(0>t-ao){var an=t-ao;t=ao,ai.data("arrow-reposition",an)}if(t+am-ao>aj){var an=t-(aj+ao-am);t=aj+ao-am,ai.data("arrow-reposition",an)}}function u(ao,an){aa-d(f).scrollTop()-N-Y-12<0&&an.indexOf("top")>-1&&(ac.options.position=ao,z=an),aa+ah+N+12+Y>d(f).scrollTop()+d(f).height()&&an.indexOf("bottom")>-1&&(ac.options.position=ao,z=an,W=aa-N-Y-12)}var B=d(this.element),ac=this;if(B.data("tooltipsterIcon")!==b&&(B=B.data("tooltipsterIcon")),B.data("tooltipster")!==b&&""!==B.data("tooltipster")){var ai=B.data("tooltipster");ai.css("width","");var aj=d(f).width(),C=B.outerWidth(!1),ah=B.outerHeight(!1),am=ai.outerWidth(!1),n=ai.innerWidth()+1,N=ai.outerHeight(!1),ab=B.offset(),aa=ab.top,w=ab.left,z=b;if(B.is("area")){var U=B.attr("shape"),ag=B.parent().attr("name"),Q=d('img[usemap="#'+ag+'"]'),o=Q.offset().left,M=Q.offset().top,X=B.attr("coords")!==b?B.attr("coords").split(","):b;if("circle"==U){var O=parseInt(X[0]),s=parseInt(X[1]),E=parseInt(X[2]);ah=2*E,C=2*E,aa=M+s-E,w=o+O-E}else if("rect"==U){var O=parseInt(X[0]),s=parseInt(X[1]),r=parseInt(X[2]),K=parseInt(X[3]);ah=K-s,C=r-O,aa=M+s,w=o+O}else if("poly"==U){var I=0,H=0,ae=0,ad=0,ak="even";for(i=0;i<X.length;i++){var G=parseInt(X[i]);"even"==ak?(G>ae&&(ae=G,0==i&&(I=ae)),I>G&&(I=G),ak="odd"):(G>ad&&(ad=G,1==i&&(H=ad)),H>G&&(H=G),ak="even")}ah=ad-H,C=ae-I,aa=M+H,w=o+I}else ah=Q.outerHeight(!1),C=Q.outerWidth(!1),aa=M,w=o}0==ac.options.fixedWidth&&ai.css({width:n+"px","padding-left":"0px","padding-right":"0px"});var t=0,W=0,Y=parseInt(ac.options.offsetY),Z=parseInt(ac.options.offsetX),q="";if("top"==ac.options.position){var R=w+am-(w+C);t=w+Z-R/2,W=aa-N-Y-12,x(),u("bottom","top")}if("top-left"==ac.options.position&&(t=w+Z,W=aa-N-Y-12,x(),u("bottom-left","top-left")),"top-right"==ac.options.position&&(t=w+C+Z-am,W=aa-N-Y-12,x(),u("bottom-right","top-right")),"bottom"==ac.options.position){var R=w+am-(w+C);t=w-R/2+Z,W=aa+ah+Y+12,x(),u("top","bottom")}if("bottom-left"==ac.options.position&&(t=w+Z,W=aa+ah+Y+12,x(),u("top-left","bottom-left")),"bottom-right"==ac.options.position&&(t=w+C+Z-am,W=aa+ah+Y+12,x(),u("top-right","bottom-right")),"left"==ac.options.position){t=w-Z-am-12,myLeftMirror=w+Z+C+12;var L=aa+N-(aa+B.outerHeight(!1));if(W=aa-L/2-Y,0>t&&myLeftMirror+am>aj){var p=2*parseFloat(ai.css("border-width")),m=am+t-p;ai.css("width",m+"px"),N=ai.outerHeight(!1),t=w-Z-m-12-p,L=aa+N-(aa+B.outerHeight(!1)),W=aa-L/2-Y}else 0>t&&(t=w+Z+C+12,ai.data("arrow-reposition","left"))}if("right"==ac.options.position){t=w+Z+C+12,myLeftMirror=w-Z-am-12;var L=aa+N-(aa+B.outerHeight(!1));if(W=aa-L/2-Y,t+am>aj&&0>myLeftMirror){var p=2*parseFloat(ai.css("border-width")),m=aj-t-p;ai.css("width",m+"px"),N=ai.outerHeight(!1),L=aa+N-(aa+B.outerHeight(!1)),W=aa-L/2-Y}else t+am>aj&&(t=w-Z-am-12,ai.data("arrow-reposition","right"))}if(1==ac.options.arrow){var J="tooltipster-arrow-"+ac.options.position;if(ac.options.arrowColor.length<1)var S=ai.css("background-color");else var S=ac.options.arrowColor;var al=ai.data("arrow-reposition");if(al?"left"==al?(J="tooltipster-arrow-right",al=""):"right"==al?(J="tooltipster-arrow-left",al=""):al="left:"+al+"px;":al="","top"==ac.options.position||"top-left"==ac.options.position||"top-right"==ac.options.position)var V=parseFloat(ai.css("border-bottom-width")),A=ai.css("border-bottom-color");else if("bottom"==ac.options.position||"bottom-left"==ac.options.position||"bottom-right"==ac.options.position)var V=parseFloat(ai.css("border-top-width")),A=ai.css("border-top-color");else if("left"==ac.options.position)var V=parseFloat(ai.css("border-right-width")),A=ai.css("border-right-color");else if("right"==ac.options.position)var V=parseFloat(ai.css("border-left-width")),A=ai.css("border-left-color");else var V=parseFloat(ai.css("border-bottom-width")),A=ai.css("border-bottom-color");V>1&&V++;var F="";if(0!==V){var D="",T="border-color: "+A+";";-1!==J.indexOf("bottom")?D="margin-top: -"+V+"px;":-1!==J.indexOf("top")?D="margin-bottom: -"+V+"px;":-1!==J.indexOf("left")?D="margin-right: -"+V+"px;":-1!==J.indexOf("right")&&(D="margin-left: -"+V+"px;"),F='<span class="tooltipster-arrow-border" style="'+D+" "+T+';"></span>'}ai.find(".tooltipster-arrow").remove(),q='<div class="'+J+' tooltipster-arrow" style="'+al+'">'+F+'<span style="border-color:'+S+';"></span></div>',ai.append(q)}ai.css({top:W+"px",left:t+"px"}),z!==b&&(ac.options.position=z)}}},d.fn[e]=function(n){if("string"==typeof n){var p=this,m=arguments[1];if(p.data("plugin_tooltipster")==b){var o=p.find("*");p=d(),o.each(function(){d(this).data("plugin_tooltipster")!==b&&p.push(d(this))})}return p.each(function(){switch(n.toLowerCase()){case"show":d(this).data("plugin_tooltipster").showTooltip();break;case"hide":d(this).data("plugin_tooltipster").hideTooltip();break;case"disable":d(this).addClass("tooltipster-disable");break;case"enable":d(this).removeClass("tooltipster-disable");break;case"destroy":d(this).data("plugin_tooltipster").hideTooltip(),d(this).data("plugin_tooltipster","").attr("title",p.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":if(d(this).data("tooltipsterIcon")==b)d(this).data("tooltipsterContent",m);else{var q=d(this).data("tooltipsterIcon");q.data("tooltipsterContent",m)}break;case"reposition":d(this).data("plugin_tooltipster").positionTooltip()}}),this}return this.each(function(){d.data(this,"plugin_"+e)||d.data(this,"plugin_"+e,new j(this,n));var q=d(this).data("plugin_tooltipster").options;if(1==q.iconDesktop&&!h||1==q.iconTouch&&h){var r=d(this).data("plugin_tooltipster");d(this).next().data("plugin_tooltipster",r)}})},h&&f.addEventListener("orientationchange",function(){d(".tooltipster-base").length>0&&d(".tooltipster-base").each(function(){var m=d(this).data("origin");m.data("plugin_tooltipster").hideTooltip()})},!1),d(f).on("resize.tooltipster",function(){var m=d(".tooltipster-base").data("origin");null!==m&&m!==b&&m.tooltipster("reposition")})}(jQuery,window,document),function($){function setSelection(){var rng,sel,target=document.getElementsByTagName("mark")[0];if(document.createRange)rng=document.createRange(),rng.selectNode(target),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(rng);else{var rng=document.body.createTextRange();rng.moveToElementText(target),rng.select()}}$.fn.contentshare=function(options){var opts=$.extend({},$.fn.contentshare.defaults,options);$.extend($.fn.contentshare,{init:function(shareable){$.fn.contentshare.defaults.shareable=shareable},getContent:function(){for(var content="",i=0;i<opts.shareLinks.length;i++)content+='<a href="'+opts.shareLinks[i]+encodeURIComponent($("mark.contentshare").html().replace(/\&nbsp;/g," ").replace(/(<([^>]+)>)/g,""))+'" '+(opts.newTab?'target="_blank"':"")+'><img src="'+opts.shareIcons[i]+'" '+(0!=i?'style="margin-left:5px"':"")+"/></a>";return content},getSelection:function(option){return window.getSelection?"string"==option?encodeURIComponent($.trim(window.getSelection().getRangeAt(0).toString())):window.getSelection().getRangeAt(0):document.selection?"string"==option?encodeURIComponent($.trim(document.selection.createRange().text)):document.selection.createRange():void 0},showTooltip:function(){if(this.clear(),!(this.getSelection("string").length<opts.minLength)){this.preloadShareIcons(opts.shareIcons);var range=this.getSelection(),newNode=document.createElement("mark");range.surroundContents(newNode),$("mark").addClass(opts.className),$("."+opts.className).tooltipster({trigger:"custom",interactive:!0,content:this.getContent(),animation:opts.animation}),$("."+opts.className).tooltipster("show"),setSelection()}},preloadShareIcons:function(array){for(var i=0;i<array.length;i++){var img=new Image;img.src=array[i]}},clear:function(){$("."+opts.className).tooltipster("hide"),$("mark").contents().unwrap(),$("mark").remove()}}),$.fn.contentshare.init(this)},$.fn.contentshare.defaults={shareable:{},shareIcons:["img/fb.png","img/tw.png"],shareLinks:["http://www.facebook.com/sharer.php?s=100&p[url]="+document.URL+"&p[title]="+document.title+"&p[summary]=","http://twitter.com/intent/tweet?text="],minLength:5,newTab:!0,className:"contentshare",animation:"grow"}}(jQuery),!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c(a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==e.readyState;if(!b.isReady&&!c){b.isReady=!0;for(var d=0,g=f.length;g>d;d++){var h=f[d];h()}}}function d(d){return d.bind(e,"DOMContentLoaded",c),d.bind(e,"readystatechange",c),d.bind(a,"load",c),b}var e=a.document,f=[];b.isReady=!1,"function"==typeof define&&define.amd?(b.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],d)):a.docReady=d(a.eventie)}(this),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function d(a){function d(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var d=f(a);if("none"===d.display)return c();var e={};e.width=a.offsetWidth,e.height=a.offsetHeight;for(var k=e.isBorderBox=!(!j||!d[j]||"border-box"!==d[j]),l=0,m=g.length;m>l;l++){var n=g[l],o=d[n];o=h(a,o);var p=parseFloat(o);e[n]=isNaN(p)?0:p}var q=e.paddingLeft+e.paddingRight,r=e.paddingTop+e.paddingBottom,s=e.marginLeft+e.marginRight,t=e.marginTop+e.marginBottom,u=e.borderLeftWidth+e.borderRightWidth,v=e.borderTopWidth+e.borderBottomWidth,w=k&&i,x=b(d.width);x!==!1&&(e.width=x+(w?0:q+u));var y=b(d.height);return y!==!1&&(e.height=y+(w?0:r+v)),e.innerWidth=e.width-(q+u),e.innerHeight=e.height-(r+v),e.outerWidth=e.width+s,e.outerHeight=e.height+t,e}}function h(a,b){if(e||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,f=a.runtimeStyle,g=f&&f.left;return g&&(f.left=a.currentStyle.left),c.left=b,b=c.pixelLeft,c.left=d,g&&(f.left=g),b}var i,j=a("boxSizing");return function(){if(j){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[j]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var d=f(a);i=200===b(d.width),c.removeChild(a)}}(),d}var e=a.getComputedStyle,f=e?function(a){return e(a,null)}:function(a){return a.currentStyle},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],d):"object"==typeof exports?module.exports=d(require("get-style-property")):a.getSize=d(a.getStyleProperty)}(window),function(a,b){function c(a,b){return a[h](b)}function d(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function e(a,b){d(a);for(var c=a.parentNode.querySelectorAll(b),e=0,f=c.length;f>e;e++)if(c[e]===a)return!0;return!1}function f(a,b){return d(a),c(a,b)}var g,h=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(h){var i=document.createElement("div"),j=c(i,"div");g=j?c:f}else g=e;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return g}):window.matchesSelector=g}(this,Element.prototype),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=a.getComputedStyle,g=f?function(a){return f(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return void(i&&i.error("Bad "+this.constructor.namespace+" element: "+a));this.element=a,this.options=b({},this.constructor.defaults),this.option(c);var d=++r;this.element.outlayerGUID=d,s[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var r=0,s={};return q.namespace="outlayer",q.Item=p,q.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){this.resizeContainer()},q.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){this.isResizeBound&&c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},q.prototype.needsResizeLayout=function(){var a=n(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},q.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];
if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize(),delete this.element.outlayerGUID,j&&j.removeData(this.element,this.constructor.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&s[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,d.defaults=b({},q.defaults),b(d.defaults,c),d.prototype.settings={},d.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){function b(a,b){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):a.Masonry=b(a.Outlayer,a.getSize)}(window),window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){var newarr,args=arguments;args.callee=args.callee.caller,newarr=[].slice.call(args),"object"==typeof console.log?log.apply.call(console.log,console,newarr):console.log.apply(console,newarr)}},function(a){function b(){}for(var d,c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");d=c.pop();)a[d]=a[d]||b}(function(){try{return console.log(),window.console}catch(a){return window.console={}}}()),function($){function both(a){return"object"==typeof a?a:{top:a,left:a}}var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:"xy",duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:!0},h.window=function(){return $(window)._scrollable()},$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||-1!=$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||"BackCompat"==b.compatMode?b.body:b.documentElement})},$.fn.scrollTo=function(e,f,g){return"object"==typeof f&&(g=f,f=0),"function"==typeof g&&(g={onAfter:g}),"max"==e&&(e=9e9),g=$.extend({},h.defaults,g),f=f||g.duration,g.queue=g.queue&&g.axis.length>1,g.queue&&(f/=2),g.offset=both(g.offset),g.over=both(g.over),this._scrollable().each(function(){function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}if(null!=e){var toff,d=this,$elem=$(d),targ=e,attr={},win=$elem.is("html,body");switch(typeof targ){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}if(targ=$(targ,this),!targ.length)return;case"object":(targ.is||targ.style)&&(toff=(targ=$(targ)).offset())}$.each(g.axis.split(""),function(i,a){var b="x"==a?"Left":"Top",pos=b.toLowerCase(),key="scroll"+b,old=d[key],max=h.max(d,a);if(toff)attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]),g.margin&&(attr[key]-=parseInt(targ.css("margin"+b))||0,attr[key]-=parseInt(targ.css("border"+b+"Width"))||0),attr[key]+=g.offset[pos]||0,g.over[pos]&&(attr[key]+=targ["x"==a?"width":"height"]()*g.over[pos]);else{var c=targ[pos];attr[key]=c.slice&&"%"==c.slice(-1)?parseFloat(c)/100*max:c}g.limit&&/^\d+$/.test(attr[key])&&(attr[key]=attr[key]<=0?0:Math.min(attr[key],max)),!i&&g.queue&&(old!=attr[key]&&animate(g.onAfterFirst),delete attr[key])}),animate(g.onAfter)}}).end()},h.max=function(a,b){var c="x"==b?"Width":"Height",scroll="scroll"+c;if(!$(a).is("html,body"))return a[scroll]-$(a)[c.toLowerCase()]();var d="client"+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])}}(jQuery),$(window).load(function(){!function($){function clean(content){if(content&&content.length){var text=content.match(patterns.text)[1],url=text.match(patterns.url);return url?'<img src="'+url[1]+'" />':text}}function inject(prop,elem,content){("after"==prop||"before"==prop)&&(content=clean(elem.currentStyle[prop]))&&$(elem)["before"==prop?"prepend":"append"]($(document.createElement("span")).addClass(prop).html(content))}var patterns={text:/^['"]?(.+?)["']?$/,url:/^url\(["']?(.+?)['"]?\)$/};if($.pseudo=function(elem){inject("before",elem),inject("after",elem),elem.runtimeStyle.behavior=null},document.createStyleSheet){var o=document.createStyleSheet(null,0);o.addRule(".dummy","display: static;"),o.cssText="html, head, head *, body, *.before, *.after, *.before *, *.after * { behavior: none; } * { behavior: expression($.pseudo(this)); }"}}(jQuery)}),function($){$.fn.fileupload=function(){this.each(function(){function HandleChanges(){file=fileInput.value,reWin=/.*\\(.*)/;var fileTitle=file.replace(reWin,"$1");reUnix=/.*\/(.*)/,fileTitle=fileTitle.replace(reUnix,"$1"),fileName.innerHTML=fileTitle;var RegExExt=/.*\.(.*)/,ext=fileTitle.replace(RegExExt,"$1");accept.indexOf("."+ext.toLowerCase())<0&&(fileInput.value="",$(fileName).addClass("error").text("\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430"),window.setTimeout(function(){$(fileName).removeClass("error").text("")},3e3))}var fileInput=$(this).get(0),fileName=$(this).siblings(".cf_file_progress").get(0);fileInput.value="",fileInput.onchange=HandleChanges;var accept=fileInput.accept.split(",")})}}(jQuery),function($){$.fn.formValidator=function(options){var defaults={};this.each(function(){{var form=($.extend(defaults,options),$(this)),inputs=$(":input",form);inputs.length}inputs.removeClass("error").each(function(){var inp=$(this),par=inp.parents(".fieldrow"),val=inp.val();if(gr=inp.data("group"),inp.parent().removeClass("error"),par.find("em.error").css("display","none"),inp.data("validate")||inp.data("required"))if(inp.data("required")&&""==inp.val())inp.addClass("error"),inp.parent().addClass("error"),par.find(".error.required").css("display","block");else{if(gr){var brothers=inputs.filter('[data-group="'+gr+'"]'),vals=!1;brothers.each(function(){var elval=$(this).is('[type="checkbox"]')?$(this)[0].checked:$(this).val();elval&&(vals=!0)}),vals?brothers.removeClass("error").closest("div.fieldrow").find(".error.group").hide():brothers.addClass("error").closest("div.fieldrow").find(".error.group").show()}switch(inp.data("validate")){case"number":if(""!=val)for(var validchars="-+0123456789. ",i=val.length-1;i>=0;i--){var x=new String(val.charAt(i)),checker=validchars.lastIndexOf(x)>-1;if(!checker){inp.addClass("error"),inp.parent().addClass("error"),par.find(".error.validate").css("display","block");break}}break;case"password":""!=val&&val.length<6&&(inp.addClass("error"),par.find(".error.validate").css("display","block"));break;case"email":""!=val&&(/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(val)||(inp.addClass("error"),inp.parent().addClass("error"),par.find(".error.validate").css("display","block")))}if(inp.data("minlength")&&""!=val&&(val.length<1*inp.data("minlength")?(inp.removeClass("ok"),inp.parent().addClass("error"),inp.addClass("error"),par.find(".error.minlength").css("display","block")):(inp.removeClass("error"),par.addClass("ok"))),inp.data("identity")){var idsel=$(inp.data("identity"));idsel.length<1&&alert("\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440 \u0432 \u043f\u043e\u043b\u0435 "+inp.attr("name")),""!=val&&""!=idsel.val()&&val!=idsel.val()&&(inp.addClass("error"),inp.parent().addClass("error"),par.find(".error.identity").css("display","block"))}}}),form.data("valid",0==$(":input.error",form).length)})}}(jQuery),/*
 * jQuery Easing Compatibility v1 - http://gsgd.co.uk/sandbox/jquery.easing.php
 *
 * Adds compatibility for applications that use the pre 1.2 easing names
 *
 * Copyright (c) 2007 George Smith
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 */
jQuery.extend(jQuery.easing,{easeIn:function(x,t,b,c,d){return jQuery.easing.easeInQuad(x,t,b,c,d)},easeOut:function(x,t,b,c,d){return jQuery.easing.easeOutQuad(x,t,b,c,d)},easeInOut:function(x,t,b,c,d){return jQuery.easing.easeInOutQuad(x,t,b,c,d)},expoin:function(x,t,b,c,d){return jQuery.easing.easeInExpo(x,t,b,c,d)},expoout:function(x,t,b,c,d){return jQuery.easing.easeOutExpo(x,t,b,c,d)},expoinout:function(x,t,b,c,d){return jQuery.easing.easeInOutExpo(x,t,b,c,d)},bouncein:function(x,t,b,c,d){return jQuery.easing.easeInBounce(x,t,b,c,d)},bounceout:function(x,t,b,c,d){return jQuery.easing.easeOutBounce(x,t,b,c,d)},bounceinout:function(x,t,b,c,d){return jQuery.easing.easeInOutBounce(x,t,b,c,d)},elasin:function(x,t,b,c,d){return jQuery.easing.easeInElastic(x,t,b,c,d)},elasout:function(x,t,b,c,d){return jQuery.easing.easeOutElastic(x,t,b,c,d)},elasinout:function(x,t,b,c,d){return jQuery.easing.easeInOutElastic(x,t,b,c,d)},backin:function(x,t,b,c,d){return jQuery.easing.easeInBack(x,t,b,c,d)},backout:function(x,t,b,c,d){return jQuery.easing.easeOutBack(x,t,b,c,d)},backinout:function(x,t,b,c,d){return jQuery.easing.easeInOutBack(x,t,b,c,d)}}),function($){$.fn.replaceCheckBox=function(){this.each(function(){{var inp=$(this);$("label[for="+inp.attr("id")+"]")}if(inp.hasClass("custom"))return!1;inp.wrap('<span class="field checkbox" />').wrap("<span />");var par=inp.parents("span.checkbox:eq(0)");inp.prop("checked")&&par.addClass("checked"),par.on("click",function(){return inp.attr("disabled")?!1:void inp.trigger("change")}),inp.on("change",function(){return inp.attr("disabled")?!1:void(inp.prop("checked")?(par.removeClass("checked"),inp.prop("checked",!1)):(par.addClass("checked"),inp.prop("checked",!0)))})})}}(jQuery),function($){$.fn.selectReplace=function(){this.each(function(){var field=$(this),selblock=$('<span class="inpselblock"></span>'),seltxt=$('<span class="inpseltxt"></span>'),w=field.width();if(field.hasClass("custom"))return!1;selblock.parent().width(w),field.wrap(selblock),seltxt.insertBefore(field),seltxt.text($("option:selected",field).text());var selopener=$('<a class="selopener" href="#"></a>').insertBefore(seltxt),optcontainer=$('<div class="optcontainer'+(field.hasClass("round")?" round":"")+'" id="'+field.attr("name")+'opts"></div>').appendTo("body");optcontainer.css("min-width",w).hide(function(){$(this).addClass("hide")}),$("option",field).each(function(k){var opt=$(this),aopt=$('<a href="#" title="'+opt.text()+'">'+opt.text()+"</a>").appendTo(optcontainer);aopt.click(function(){return field.get(0).selectedIndex=k,seltxt.text($("option:eq("+k+")",field).text()),optcontainer.find(".selected").removeClass("selected"),$(this).addClass("selected"),optcontainer.slideUp("fast",function(){$(this).addClass("hide"),selopener.removeClass("open")}),field.change(),!1}),opt.prop("selected")&&aopt.addClass("selected")}),selopener.click(function(){if($(".inpselblock").removeClass("open"),$("div.optcontainer").slideUp("fast",function(){$(this).addClass("hide")}),optcontainer.hasClass("hide")){var pos=$(seltxt).offset(),zi=0;optcontainer.removeClass("hide"),optcontainer.css({left:pos.left+"px",top:pos.top-1+"px","min-width":field.outerWidth()+15}),optcontainer.slideDown("fast",function(){$(document).on("click",function(e){(e.pageX<pos.left||e.pageX>pos.left+optcontainer.width()||e.pageY<pos.top||e.pageY>pos.top+optcontainer.height())&&optcontainer.slideUp("fast",function(){$(this).addClass("hide"),selopener.removeClass("open")})}),selopener.addClass("open")}),optcontainer.siblings().each(function(){var nzi=parseInt($(this).css("z-index"));zi=Math.max(zi,isNaN(nzi)?0:nzi)}),optcontainer.css({"z-index":zi+1})}else optcontainer.slideUp("fast",function(){$(this).addClass("hide"),selopener.removeClass("open")});return!1}),field.addClass("custom")})}}(jQuery),function($){$.fn.radioReplace=function(){this.each(function(){{var inp=$(this),form=($("label[for="+inp.attr("id")+"]"),$(this.form));inp.attr("name")}if(inp.hasClass("custom"))return!1;inp.wrap('<span class="field radio" />').wrap("<span />");var par=inp.parents("span.radio:eq(0)");inp.prop("checked")&&par.addClass("checked"),inp.change(function(){if($(this).attr("disabled"))return!1;var n=$(this).attr("name");$('input[name="'+n+'"]',form).each(function(){var i=$(this),p=i.parents("span.radio:eq(0)");i.prop("checked")?p.addClass("checked"):p.removeClass("checked")})})})}}(jQuery),function($){$.fn.columnize=function(options){var defaults={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,manualBreaks:!1,cssClassPrefix:""};return options=$.extend(defaults,options),"string"==typeof options.width&&(options.width=parseInt(options.width,10),isNaN(options.width)&&(options.width=defaults.width)),this.each(function(){function prefixTheClassName(className,withDot){var dot=withDot?".":"";return cssClassPrefix.length?dot+cssClassPrefix+"-"+className:dot+className}function columnize($putInHere,$pullOutHere,$parentColumn,targetHeight){for(;(manualBreaks||$parentColumn.height()<targetHeight)&&$pullOutHere[0].childNodes.length;){var node=$pullOutHere[0].childNodes[0];if($(node).find(prefixTheClassName("columnbreak",!0)).length)return;if($(node).hasClass(prefixTheClassName("columnbreak")))return;$putInHere.append(node)}if(0!==$putInHere[0].childNodes.length){var kids=$putInHere[0].childNodes,lastKid=kids[kids.length-1];$putInHere[0].removeChild(lastKid);var $item=$(lastKid);if(3==$item[0].nodeType){var oText=$item[0].nodeValue,counter2=options.width/18;options.accuracy&&(counter2=options.accuracy);for(var columnText,latestTextNode=null;$parentColumn.height()<targetHeight&&oText.length;){var indexOfSpace=oText.indexOf(" ",counter2);columnText=-1!=indexOfSpace?oText.substring(0,oText.indexOf(" ",counter2)):oText,latestTextNode=document.createTextNode(columnText),$putInHere.append(latestTextNode),oText=oText.length>counter2&&-1!=indexOfSpace?oText.substring(indexOfSpace):""}if($parentColumn.height()>=targetHeight&&null!==latestTextNode&&($putInHere[0].removeChild(latestTextNode),oText=latestTextNode.nodeValue+oText),!oText.length)return!1;$item[0].nodeValue=oText}return $pullOutHere.contents().length?$pullOutHere.prepend($item):$pullOutHere.append($item),3==$item[0].nodeType}}function split($putInHere,$pullOutHere,$parentColumn,targetHeight){if(!$putInHere.contents(":last").find(prefixTheClassName("columnbreak",!0)).length&&!$putInHere.contents(":last").hasClass(prefixTheClassName("columnbreak"))&&$pullOutHere.contents().length){var $cloneMe=$pullOutHere.contents(":first");if(1!=$cloneMe.get(0).nodeType)return;var $clone=$cloneMe.clone(!0);$cloneMe.hasClass(prefixTheClassName("columnbreak"))?($putInHere.append($clone),$cloneMe.remove()):manualBreaks?($putInHere.append($clone),$cloneMe.remove()):1!=$clone.get(0).nodeType||$clone.hasClass(prefixTheClassName("dontend"))||($putInHere.append($clone),$clone.is("img")&&$parentColumn.height()<targetHeight+20?$cloneMe.remove():!$cloneMe.hasClass(prefixTheClassName("dontsplit"))&&$parentColumn.height()<targetHeight+20?$cloneMe.remove():$clone.is("img")||$cloneMe.hasClass(prefixTheClassName("dontsplit"))?$clone.remove():($clone.empty(),columnize($clone,$cloneMe,$parentColumn,targetHeight)?$cloneMe.addClass(prefixTheClassName("split")):($cloneMe.addClass(prefixTheClassName("split")),$cloneMe.children().length&&split($clone,$cloneMe,$parentColumn,targetHeight)),0===$clone.get(0).childNodes.length&&$clone.remove()))}}function singleColumnizeIt(){if(!$inBox.data("columnized")||1!=$inBox.children().length){if($inBox.data("columnized",!0),$inBox.data("columnizing",!0),$inBox.empty(),$inBox.append($("<div class='"+prefixTheClassName("first")+" "+prefixTheClassName("last")+" "+prefixTheClassName("column")+" ' style='width:100%; float: "+options.columnFloat+";'></div>")),$col=$inBox.children().eq($inBox.children().length-1),$destroyable=$cache.clone(!0),options.overflow){for(targetHeight=options.overflow.height,columnize($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(prefixTheClassName("dontend"))||split($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&checkDontEndColumn($col.contents(":last").get(0));){var $lastKid=$col.contents(":last");$lastKid.remove(),$destroyable.prepend($lastKid)}for(var html="",div=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var kid=$destroyable[0].childNodes[0];if(kid.attributes)for(var i=0;i<kid.attributes.length;i++)0===kid.attributes[i].nodeName.indexOf("jQuery")&&kid.removeAttribute(kid.attributes[i].nodeName);div.innerHTML="",div.appendChild($destroyable[0].childNodes[0]),html+=div.innerHTML}var overflow=$(options.overflow.id)[0];overflow.innerHTML=html}else $col.append($destroyable);$inBox.data("columnizing",!1),options.overflow&&options.overflow.doneFunc&&options.overflow.doneFunc()}}function checkDontEndColumn(dom){return 3==dom.nodeType?/^\s+$/.test(dom.nodeValue)&&dom.previousSibling?checkDontEndColumn(dom.previousSibling):!1:1!=dom.nodeType?!1:$(dom).hasClass(prefixTheClassName("dontend"))?!0:0===dom.childNodes.length?!1:checkDontEndColumn(dom.childNodes[dom.childNodes.length-1])}function columnizeIt(){if(adjustment=0,lastWidth!=$inBox.width()){lastWidth=$inBox.width();var numCols=Math.round($inBox.width()/options.width),optionWidth=options.width,optionHeight=options.height;if(options.columns&&(numCols=options.columns),manualBreaks&&(numCols=$cache.find(prefixTheClassName("columnbreak",!0)).length+1,optionWidth=!1),1>=numCols)return singleColumnizeIt();if(!$inBox.data("columnizing")){$inBox.data("columnized",!0),$inBox.data("columnizing",!0),$inBox.empty(),$inBox.append($("<div style='width:"+Math.floor(100/numCols)+"%; float: "+options.columnFloat+";'></div>")),$col=$inBox.children(":last"),$col.append($cache.clone()),maxHeight=$col.height(),$inBox.empty();var targetHeight=maxHeight/numCols,maxLoops=3,scrollHorizontally=!1;options.overflow?(maxLoops=1,targetHeight=options.overflow.height):optionHeight&&optionWidth&&(maxLoops=1,targetHeight=optionHeight,scrollHorizontally=!0);for(var loopCount=0;maxLoops>loopCount&&20>loopCount;loopCount++){$inBox.empty();var $destroyable,className,$col,$lastKid;try{$destroyable=$cache.clone(!0)}catch(e){$destroyable=$cache.clone()}$destroyable.css("visibility","hidden");for(var i=0;numCols>i;i++)className=0===i?prefixTheClassName("first"):"",className+=" "+prefixTheClassName("column"),className=i==numCols-1?prefixTheClassName("last")+" "+className:className,$inBox.append($("<div class='"+className+"' style='width:"+Math.floor(100/numCols)+"%; float: "+options.columnFloat+";'></div>"));for(i=0;i<numCols-(options.overflow?0:1)||scrollHorizontally&&$destroyable.contents().length;){for($inBox.children().length<=i&&$inBox.append($("<div class='"+className+"' style='width:"+Math.floor(100/numCols)+"%; float: "+options.columnFloat+";'></div>")),$col=$inBox.children().eq(i),scrollHorizontally&&$col.width(optionWidth+"px"),columnize($col,$destroyable,$col,targetHeight),split($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&checkDontEndColumn($col.contents(":last").get(0));)$lastKid=$col.contents(":last"),$lastKid.remove(),$destroyable.prepend($lastKid);i++,0===$col.contents().length&&$destroyable.contents().length?$col.append($destroyable.contents(":first")):i!=numCols-(options.overflow?0:1)||options.overflow||$destroyable.find(prefixTheClassName("columnbreak",!0)).length&&numCols++}if(options.overflow&&!scrollHorizontally){var IE6=!1,IE7=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(IE6||IE7){for(var html="",div=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var kid=$destroyable[0].childNodes[0];for(i=0;i<kid.attributes.length;i++)0===kid.attributes[i].nodeName.indexOf("jQuery")&&kid.removeAttribute(kid.attributes[i].nodeName);div.innerHTML="",div.appendChild($destroyable[0].childNodes[0]),html+=div.innerHTML}var overflow=$(options.overflow.id)[0];overflow.innerHTML=html}else $(options.overflow.id).empty().append($destroyable.contents().clone(!0))}else if(scrollHorizontally)$inBox.children().each(function(i){$col=$inBox.children().eq(i),$col.width(optionWidth+"px"),0===i?$col.addClass(prefixTheClassName("first")):i==$inBox.children().length-1?$col.addClass(prefixTheClassName("last")):($col.removeClass(prefixTheClassName("first")),$col.removeClass(prefixTheClassName("last")))}),$inBox.width($inBox.children().length*optionWidth+"px");else{$col=$inBox.children().eq($inBox.children().length-1),$destroyable.contents().each(function(){$col.append($(this))});var totalH=($col.height(),0),min=1e7,max=0,lastIsMax=!1,numberOfColumnsThatDontEndInAColumnBreak=0;$inBox.children().each(function($inBox){return function($item){var $col=$inBox.children().eq($item),endsInBreak=$col.children(":last").find(prefixTheClassName("columnbreak",!0)).length;if(!endsInBreak){var h=$col.height();lastIsMax=!1,totalH+=h,h>max&&(max=h,lastIsMax=!0),min>h&&(min=h),numberOfColumnsThatDontEndInAColumnBreak++}}}($inBox));var avgH=totalH/numberOfColumnsThatDontEndInAColumnBreak;0===totalH?loopCount=maxLoops:options.lastNeverTallest&&lastIsMax?(adjustment+=30,targetHeight+=30,loopCount==maxLoops-1&&maxLoops++):max-min>30?targetHeight=avgH+30:Math.abs(avgH-targetHeight)>20?targetHeight=avgH:loopCount=maxLoops}$inBox.append($("<br style='clear:both;'>"))}$inBox.find(prefixTheClassName("column",!0)).find(":first"+prefixTheClassName("removeiffirst",!0)).remove(),$inBox.find(prefixTheClassName("column",!0)).find(":last"+prefixTheClassName("removeiflast",!0)).remove(),$inBox.data("columnizing",!1),options.overflow&&options.overflow.doneFunc(),options.doneFunc()}}}var $inBox=$(options.target?options.target:this),maxHeight=$(this).height(),$cache=$("<div></div>"),lastWidth=0,manualBreaks=options.manualBreaks,cssClassPrefix=defaults.cssClassPrefix;"string"==typeof options.cssClassPrefix&&(cssClassPrefix=options.cssClassPrefix);var adjustment=0;if($cache.append($(this).contents().clone(!0)),!options.ignoreImageLoading&&!options.target&&!$inBox.data("imageLoaded")&&($inBox.data("imageLoaded",!0),$(this).find("img").length>0)){var func=function($inBox,$cache){return function(){$inBox.data("firstImageLoaded")||($inBox.data("firstImageLoaded","true"),$inBox.empty().append($cache.children().clone(!0)),$inBox.columnize(options))}}($(this),$cache);return $(this).find("img").one("load",func),void $(this).find("img").one("abort",func)}$inBox.empty(),columnizeIt(),options.buildOnce||$(window).resize(function(){options.buildOnce||($inBox.data("timeout")&&clearTimeout($inBox.data("timeout")),$inBox.data("timeout",setTimeout(columnizeIt,200)))})})}}(jQuery),/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function(b){function d(g,h){if(!(g.originalEvent.touches.length>1)){g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),g.target.dispatchEvent(f)}}if(b.support.touch="ontouchend"in document,b.support.touch){var a,c=b.ui.mouse.prototype,e=c._mouseInit;c._touchStart=function(g){var f=this;!a&&f._mouseCapture(g.originalEvent.changedTouches[0])&&(a=!0,f._touchMoved=!1,d(g,"mouseover"),d(g,"mousemove"),d(g,"mousedown"))},c._touchMove=function(f){a&&(this._touchMoved=!0,d(f,"mousemove"))},c._touchEnd=function(f){a&&(d(f,"mouseup"),d(f,"mouseout"),this._touchMoved||d(f,"click"),a=!1)},c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd")),e.call(f)}}}(jQuery),/*
 * jPlayer Plugin for jQuery JavaScript Library
 * http://www.jplayer.org
 *
 * Copyright (c) 2009 - 2013 Happyworm Ltd
 * Licensed under the MIT license.
 * http://opensource.org/licenses/MIT
 *
 * Author: Mark J Panaghiston
 * Version: 2.5.0
 * Date: 7th November 2013
 */
function(b,f){"function"==typeof define&&define.amd?define(["jquery"],f):f(b.jQuery?b.jQuery:b.Zepto)}(this,function(b,f){b.fn.jPlayer=function(a){var c="string"==typeof a,d=Array.prototype.slice.call(arguments,1),e=this;return a=!c&&d.length?b.extend.apply(null,[!0,a].concat(d)):a,c&&"_"===a.charAt(0)?e:(this.each(c?function(){var c=b(this).data("jPlayer"),h=c&&b.isFunction(c[a])?c[a].apply(c,d):c;return h!==c&&h!==f?(e=h,!1):void 0}:function(){var c=b(this).data("jPlayer");c?c.option(a||{}):b(this).data("jPlayer",new b.jPlayer(a,this))}),e)},b.jPlayer=function(a,c){if(arguments.length){this.element=b(c),this.options=b.extend(!0,{},this.options,a);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()}),this._init()}},"function"!=typeof b.fn.stop&&(b.fn.stop=function(){}),b.jPlayer.emulateMethods="load play pause",b.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",b.jPlayer.emulateOptions="muted volume",b.jPlayer.reservedEvent="ready flashreset resize repeat error warning",b.jPlayer.event={},b.each("ready flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){b.jPlayer.event[this]="jPlayer_"+this}),b.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough".split(" "),b.jPlayer.pause=function(){b.each(b.jPlayer.prototype.instances,function(a,c){c.data("jPlayer").status.srcSet&&c.jPlayer("pause")})},b.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var m=function(){this.init()};m.prototype={init:function(){this.options={timeFormat:b.jPlayer.timeFormat}},time:function(a){var c=new Date(1e3*(a&&"number"==typeof a?a:0)),b=c.getUTCHours();return a=this.options.timeFormat.showHour?c.getUTCMinutes():c.getUTCMinutes()+60*b,c=this.options.timeFormat.showMin?c.getUTCSeconds():c.getUTCSeconds()+60*a,b=this.options.timeFormat.padHour&&10>b?"0"+b:b,a=this.options.timeFormat.padMin&&10>a?"0"+a:a,c=this.options.timeFormat.padSec&&10>c?"0"+c:c,b=""+(this.options.timeFormat.showHour?b+this.options.timeFormat.sepHour:""),b+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"",b+=this.options.timeFormat.showSec?c+this.options.timeFormat.sepSec:""}};var n=new m;b.jPlayer.convertTime=function(a){return n.time(a)},b.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var c=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,e=/(mozilla)(?:.*? rv:([\w.]+))?/;return a=/(webkit)[ \/]([\w.]+)/.exec(a)||c.exec(a)||b.exec(a)||0>a.indexOf("compatible")&&e.exec(a)||[],{browser:a[1]||"",version:a[2]||"0"}},b.jPlayer.uaPlatform=function(a){var c=a.toLowerCase(),b=/(android)/,e=/(mobile)/;return a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(c)||[],c=/(ipad|playbook)/.exec(c)||!e.exec(c)&&b.exec(c)||[],a[1]&&(a[1]=a[1].replace(/\s/g,"_")),{platform:a[1]||"",tablet:c[1]||""}},b.jPlayer.browser={},b.jPlayer.platform={};var k=b.jPlayer.uaBrowser(navigator.userAgent);k.browser&&(b.jPlayer.browser[k.browser]=!0,b.jPlayer.browser.version=k.version),k=b.jPlayer.uaPlatform(navigator.userAgent),k.platform&&(b.jPlayer.platform[k.platform]=!0,b.jPlayer.platform.mobile=!k.tablet,b.jPlayer.platform.tablet=!!k.tablet),b.jPlayer.getDocMode=function(){var a;return b.jPlayer.browser.msie&&(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7))),a},b.jPlayer.browser.documentMode=b.jPlayer.getDocMode(),b.jPlayer.nativeFeatures={init:function(){var g,h,a=document,c=a.createElement("video"),b={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" ")},e=["w3c","moz","webkit","webkitVideo"];for(this.fullscreen=c={support:{w3c:!!a[b.w3c[0]],moz:!!a[b.moz[0]],webkit:"function"==typeof a[b.webkit[3]],webkitVideo:"function"==typeof c[b.webkitVideo[2]]},used:{}},g=0,h=e.length;h>g;g++){var f=e[g];if(c.support[f]){c.spec=f,c.used[f]=!0;break}}if(c.spec){var l=b[c.spec];c.api={fullscreenEnabled:!0,fullscreenElement:function(c){return c=c?c:a,c[l[1]]},requestFullscreen:function(a){return a[l[2]]()},exitFullscreen:function(c){return c=c?c:a,c[l[3]]()}},c.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else c.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},c.event={}}},b.jPlayer.nativeFeatures.init(),b.jPlayer.focus=null,b.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var p=function(a){var d,c=b.jPlayer.focus;c&&(b.each(b.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(c,b){return a.target.nodeName.toUpperCase()===b.toUpperCase()?(d=!0,!1):void 0}),d||b.each(c.options.keyBindings,function(d,g){return g&&a.which===g.key&&b.isFunction(g.fn)?(a.preventDefault(),g.fn(c),!1):void 0}))};b.jPlayer.keys=function(a){b(document.documentElement).unbind("keydown.jPlayer"),a&&b(document.documentElement).bind("keydown.jPlayer",p)},b.jPlayer.keys(!0),b.jPlayer.prototype={count:0,version:{script:"2.5.0",needFlash:"2.5.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(a){a.jPlayer.options.loop?b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){b(this).jPlayer("play")}):b(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:32,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:13,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:8,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:38,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:40,fn:function(a){a.volume(a.options.volume-.1)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;if(this.element.empty(),this.status=b.extend({},this.status),this.internal=b.extend({},this.internal),this.options.timeFormat=b.extend({},b.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=b.jPlayer.platform.ipad||b.jPlayer.platform.iphone||b.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!b.jPlayer.focus&&(b.jPlayer.focus=this),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),b.each(this.options.supplied.toLowerCase().split(","),function(c,d){var e=d.replace(/^\s+|\s+$/g,"");if(a.format[e]){var f=!1;b.each(a.formats,function(a,c){return e===c?(f=!0,!1):void 0}),f||a.formats.push(e)}}),b.each(this.options.solution.toLowerCase().split(","),function(c,d){var e=d.replace(/^\s+|\s+$/g,"");if(a.solution[e]){var f=!1;b.each(a.solutions,function(a,c){return e===c?(f=!0,!1):void 0}),f||a.solutions.push(e)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=b.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=b.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:f}),this.internal.video=b.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:f}),this.internal.flash=b.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:f,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")}),this.internal.poster=b.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:f}),b.each(b.jPlayer.event,function(c,b){a.options[c]!==f&&(a.element.bind(b+".jPlayer",a.options[c]),a.options[c]=f)}),this.require.audio=!1,this.require.video=!1,b.each(this.formats,function(c,b){a.require[a.format[b].media]=!0}),this.options=this.require.video?b.extend(!0,{},this.optionsVideo,this.options):b.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),b.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=b("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){a._trigger(b.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.flash.canPlay={},b.each(this.formats,function(c,b){a.html.canPlay[b]=a.html[a.format[b].media].available&&""!==a.htmlElement[a.format[b].media].canPlayType(a.format[b].codec),a.flash.canPlay[b]=a.format[b].flashCanPlay&&a.flash.available}),this.html.desired=!1,this.flash.desired=!1,b.each(this.solutions,function(c,d){if(0===c)a[d].desired=!0;else{var e=!1,f=!1;b.each(a.formats,function(c,b){a[a.solutions[0]].canPlay[b]&&("video"===a.format[b].media?f=!0:e=!0)}),a[d].desired=a.require.audio&&!e||a.require.video&&!f}}),this.html.support={},this.flash.support={},b.each(this.formats,function(c,b){a.html.support[b]=a.html.canPlay[b]&&a.html.desired,a.flash.support[b]=a.flash.canPlay[b]&&a.flash.desired}),this.html.used=!1,this.flash.used=!1,b.each(this.solutions,function(c,d){b.each(a.formats,function(c,b){return a[d].support[b]?(a[d].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:b.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SOLUTION,hint:b.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var c,d="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(b.jPlayer.browser.msie&&(9>Number(b.jPlayer.browser.version)||9>b.jPlayer.browser.documentMode)){d=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+d+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'],c=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var e=0;e<d.length;e++)c.appendChild(document.createElement(d[e]))}else e=function(a,c,b){var d=document.createElement("param");d.setAttribute("name",c),d.setAttribute("value",b),a.appendChild(d)},c=document.createElement("object"),c.setAttribute("id",this.internal.flash.id),c.setAttribute("name",this.internal.flash.id),c.setAttribute("data",this.internal.flash.swf),c.setAttribute("type","application/x-shockwave-flash"),c.setAttribute("width","1"),c.setAttribute("height","1"),c.setAttribute("tabindex","-1"),e(c,"flashvars",d),e(c,"allowscriptaccess","always"),e(c,"bgcolor",this.options.backgroundColor),e(c,"wmode",this.options.wmode);this.element.append(c),this.internal.flash.jq=b(c)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=b("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=b("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){a._trigger(b.jPlayer.event.click)}))),this.options.emulateHtml&&this._emulateHtmlBridge(),this.html.used&&!this.flash.used&&setTimeout(function(){a.internal.ready=!0,a.version.flash="n/a",a._trigger(b.jPlayer.event.repeat),a._trigger(b.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),b.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),b.each(this.css.jq,function(a,c){c.length&&c.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===b.jPlayer.focus&&(b.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(c){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"==typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(c){return!1}},_uaBlocklist:function(a){var c=navigator.userAgent.toLowerCase(),d=!1;return b.each(a,function(a,b){return b&&b.test(c)?(d=!0,!1):void 0}),d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(a,c){var d=this;a.preload=this.options.preload,a.muted=this.options.muted,a.volume=this.options.volume,this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate),a.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&0<this.readyState&&(d.internal.cmdsIgnored=!1),d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.progress))},!1),a.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.timeupdate))},!1),a.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.durationchange))},!1),a.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(b.jPlayer.event.play))},!1),a.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(b.jPlayer.event.playing))},!1),a.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(b.jPlayer.event.pause))},!1),a.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.waiting))},!1),a.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.seeking))},!1),a.addEventListener("seeked",function(){c.gate&&(d._seeked(),d._trigger(b.jPlayer.event.seeked))},!1),a.addEventListener("volumechange",function(){c.gate&&(d.options.volume=a.volume,d.options.muted=a.muted,d._updateMute(),d._updateVolume(),d._trigger(b.jPlayer.event.volumechange))},!1),a.addEventListener("ratechange",function(){c.gate&&(d.options.defaultPlaybackRate=a.defaultPlaybackRate,d.options.playbackRate=a.playbackRate,d._updatePlaybackRate(),d._trigger(b.jPlayer.event.ratechange))},!1),a.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(b.jPlayer.event.suspend))},!1),a.addEventListener("ended",function(){c.gate&&(b.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(a,!0),d._updateInterface(),d._trigger(b.jPlayer.event.ended))},!1),a.addEventListener("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:b.jPlayer.error.URL,context:d.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1),b.each(b.jPlayer.htmlEvent,function(e,g){a.addEventListener(this,function(){c.gate&&d._trigger(b.jPlayer.event[g])},!1)})},_getHtmlStatus:function(a,c){var b=0,e=0,g=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration),b=a.currentTime,e=0<this.status.duration?100*b/this.status.duration:0,"object"==typeof a.seekable&&0<a.seekable.length?(g=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100,f=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(g=100,f=e),c&&(e=f=b=0),this.status.seekPercent=g,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=e,this.status.currentTime=b,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=a.readyState,this.status.networkState=a.networkState,this.status.playbackRate=a.playbackRate,this.status.ended=a.ended},_resetStatus:function(){this.status=b.extend({},this.status,b.jPlayer.prototype.status)},_trigger:function(a,c,d){a=b.Event(a),a.jPlayer={},a.jPlayer.version=b.extend({},this.version),a.jPlayer.options=b.extend(!0,{},this.options),a.jPlayer.status=b.extend(!0,{},this.status),a.jPlayer.html=b.extend(!0,{},this.html),a.jPlayer.flash=b.extend(!0,{},this.flash),c&&(a.jPlayer.error=b.extend({},c)),d&&(a.jPlayer.warning=b.extend({},d)),this.element.trigger(a)},jPlayerFlashEvent:function(a,c){if(a===b.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var d=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),d>0&&(e?this.pause(d):this.play(d))}this._trigger(b.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:b.jPlayer.error.VERSION,context:this.version.flash,message:b.jPlayer.errorMsg.VERSION+this.version.flash,hint:b.jPlayer.errorHint.VERSION}),this._trigger(b.jPlayer.event.repeat),this._trigger(a);if(this.flash.gate)switch(a){case b.jPlayer.event.progress:this._getFlashStatus(c),this._updateInterface(),this._trigger(a);break;case b.jPlayer.event.timeupdate:this._getFlashStatus(c),this._updateInterface(),this._trigger(a);break;case b.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(a);break;case b.jPlayer.event.pause:this._updateButtons(!1),this._trigger(a);break;case b.jPlayer.event.ended:this._updateButtons(!1),this._trigger(a);break;case b.jPlayer.event.click:this._trigger(a);break;case b.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:b.jPlayer.error.URL,context:c.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL});break;case b.jPlayer.event.seeking:this._seeking(),this._trigger(a);break;case b.jPlayer.event.seeked:this._seeked(),this._trigger(a);break;case b.jPlayer.event.ready:break;default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent,this.status.currentPercentRelative=a.currentPercentRelative,this.status.currentPercentAbsolute=a.currentPercentAbsolute,this.status.currentTime=a.currentTime,this.status.duration=a.duration,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(a){a===f?a=!this.status.paused:this.status.paused=!a,this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%")),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(this._convertTime(this.status.duration))},_convertTime:m.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var c=document.createElement("div");return c.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>',c.firstChild.href},_absoluteMediaUrls:function(a){var c=this;return b.each(a,function(b,e){c.format[b]&&(a[b]=c._qualifyURL(e))}),a},setMedia:function(a){var c=this,d=!1,e=this.status.media.poster!==a.poster;this._resetMedia(),this._resetGate(),this._resetActive(),a=this._absoluteMediaUrls(a),b.each(this.formats,function(e,f){var k="video"===c.format[f].media;return b.each(c.solutions,function(b,e){if(c[e].support[f]&&c._validString(a[f])){var g="html"===e;return k?(g?(c.html.video.gate=!0,c._html_setVideo(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(g?(c.html.audio.gate=!0,c._html_setAudio(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setAudio(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1),d=!0,!1}}),d?!1:void 0}),d?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||(e?this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show()),this.status.srcSet=!0,this.status.media=b.extend({},a),this._updateButtons(!1),this._updateInterface()):this._error({type:b.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SUPPORT,hint:b.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(b.jPlayer.focus=this)},play:function(a){a="number"==typeof a?a:0/0,this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a="number"==typeof a?a:0/0,this.status.srcSet?this.html.active?this._html_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,c){var d=this,e="function"==typeof c,g=Array.prototype.slice.call(arguments);"string"==typeof a&&(e&&g.splice(1,1),b.each(this.instances,function(){d.element!==this&&(e&&!c.call(this.data("jPlayer"),d)||this.jPlayer.apply(this,g))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100),this.status.srcSet?this.html.active?this._html_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a,this.html.used&&this._html_setProperty("muted",a),this.flash.used&&this._flash_mute(a),this.html.video.gate||this.html.audio.gate||(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(b.jPlayer.event.volumechange))},mute:function(a){a=a===f?!0:!!a,this._muted(a)},unmute:function(a){a=a===f?!0:!!a,this._muted(!a)},_updateMute:function(a){a===f&&(a=this.options.muted),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1),this.options.volume=a,this.html.used&&this._html_setProperty("volume",a),this.flash.used&&this._flash_volume(a),this.html.video.gate||this.html.audio.gate||(this._updateVolume(a),this._trigger(b.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var c=b(a.currentTarget),d=c.offset(),e=a.pageX-d.left,g=c.width();a=c.height()-a.pageY+d.top,c=c.height(),this.volume(this.options.verticalVolume?a/c:e/g)}this.options.muted&&this._muted(!1)},volumeBarValue:function(){},_updateVolume:function(a){a===f&&(a=this.options.volume),a=this.options.muted?0:a,this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var c=this;this.options.cssSelectorAncestor=a,this._removeUiClass(),this.ancestorJq=a?b(a):[],a&&1!==this.ancestorJq.length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),b.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)
}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(a,c){var d=this;"string"==typeof c?b.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=c,this.css.cs[a]=this.options.cssSelectorAncestor+" "+c,this.css.jq[a]=c?b(this.css.cs[a]):[],this.css.jq[a].length&&this.css.jq[a].bind("click.jPlayer",function(c){c.preventDefault(),d[a](c),b(this).blur()}),c&&1!==this.css.jq[a].length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:b.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:b.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:b.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(a){if(this.css.jq.seekBar.length){var c=b(a.currentTarget),d=c.offset();a=a.pageX-d.left,c=c.width(),this.playHead(100*a/c)}},playBar:function(){},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var c=b(a.currentTarget),d=c.offset(),e=a.pageX-d.left,g=c.width();a=c.height()-a.pageY+d.top,c=c.height(),this.playbackRate((this.options.verticalPlaybackRate?a/c:e/g)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},playbackRateBarValue:function(){},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==a&&(this.options.loop=a,this._updateButtons(),this._trigger(b.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(a,c){var d=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"==typeof a){var e=a.split(".");if(c===f){for(var d=b.extend(!0,{},this.options),g=0;g<e.length;g++){if(d[e[g]]===f)return this._warning({type:b.jPlayer.warning.OPTION_KEY,context:a,message:b.jPlayer.warningMsg.OPTION_KEY,hint:b.jPlayer.warningHint.OPTION_KEY}),f;d=d[e[g]]}return d}for(var g=d={},h=0;h<e.length;h++)h<e.length-1?(g[e[h]]={},g=g[e[h]]):g[e[h]]=c}return this._setOptions(d),this},_setOptions:function(a){var c=this;return b.each(a,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,c){var d=this;switch(a){case"volume":this.volume(c);break;case"muted":this._muted(c);break;case"globalVolume":this.options[a]=c;break;case"cssSelectorAncestor":this._cssSelectorAncestor(c);break;case"cssSelector":b.each(c,function(a,c){d._cssSelector(a,c)});break;case"playbackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",c),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",c),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[a]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[a]=c=this._limitValue(c,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[a]!==c){var e=b.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!e||e&&!this.status.waitForPlay)&&(e||(this.options[a]=c),c?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",c))}break;case"fullWindow":this.options[a]!==c&&(this._removeUiClass(),this.options[a]=c,this._refreshSize());break;case"size":this.options.fullWindow||this.options[a].cssClass===c.cssClass||this._removeUiClass(),this.options[a]=b.extend({},this.options[a],c),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass(),this.options[a]=b.extend({},this.options[a],c),this._refreshSize();break;case"autohide":this.options[a]=b.extend({},this.options[a],c),this._updateAutohide();break;case"loop":this._loop(c);break;case"nativeVideoControls":this.options[a]=b.extend({},this.options[a],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[a]=b.extend({},this.options[a],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[a]=b.extend({},this.options[a],c),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[a]!==c&&((this.options[a]=c)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[a]=b.extend({},this.options[a],c);break;case"keyEnabled":this.options[a]=c,c||this!==b.jPlayer.focus||(b.jPlayer.focus=null);break;case"keyBindings":this.options[a]=b.extend(!0,{},this.options[a],c);break;case"audioFullScreen":this.options[a]=c}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(b.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,c=function(){a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId),a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",c),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var a=this,c=b.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=b.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.addEventListener(a.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!b.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=b.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(a=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.requestFullscreen(a)},_exitFullscreen:function(){var c,a=b.jPlayer.nativeFeatures.fullscreen;a.used.webkitVideo&&(c=this.htmlElement.video),a.api.fullscreenEnabled&&a.api.exitFullscreen(c)},_html_initMedia:function(a){var c=b(this.htmlElement.media).empty();b.each(a.track||[],function(a,b){var g=document.createElement("track");g.setAttribute("kind",b.kind?b.kind:""),g.setAttribute("src",b.src?b.src:""),g.setAttribute("srclang",b.srclang?b.srclang:""),g.setAttribute("label",b.label?b.label:""),b.def&&g.setAttribute("default",b.def),c.append(g)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(b.jPlayer.event.timeupdate)},_html_setFormat:function(a){var c=this;b.each(this.formats,function(b,e){return c.html.support[e]&&a[e]?(c.status.src=a[e],c.status.format[e]=!0,c.status.formatType=e,!1):void 0})},_html_setAudio:function(a){this._html_setFormat(a),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,d=this.htmlElement.media;if(this._html_load(),isNaN(a))d.play();else{this.internal.cmdsIgnored&&d.play();try{if(d.seekable&&!("object"==typeof d.seekable&&0<d.seekable.length))throw 1;d.currentTime=a,d.play()}catch(e){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250))}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,d=this.htmlElement.media;if(a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),d.pause(),!isNaN(a))try{if(d.seekable&&!("object"==typeof d.seekable&&0<d.seekable.length))throw 1;d.currentTime=a}catch(e){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250))}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,d=this.htmlElement.media;this._html_load();try{if("object"==typeof d.seekable&&0<d.seekable.length)d.currentTime=a*d.seekable.end(d.seekable.length-1)/100;else{if(!(0<d.duration)||isNaN(d.duration))throw"e";d.currentTime=a*d.duration/100}}catch(e){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b),this.html.video.available&&(this.htmlElement.video[a]=b)},_flash_setAudio:function(a){var c=this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case"m4a":case"fla":c._getMovie().fl_setAudio_m4a(a[d]);break;case"mp3":c._getMovie().fl_setAudio_mp3(a[d]);break;case"rtmpa":c._getMovie().fl_setAudio_rtmp(a[d])}return c.status.src=a[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_setVideo:function(a){var c=this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case"m4v":case"flv":c._getMovie().fl_setVideo_m4v(a[d]);break;case"rtmpv":c._getMovie().fl_setVideo_rtmp(a[d])}return c.status.src=a[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(0/0)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}a>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var b,a=0;if(window.ActiveXObject)try{if(b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var d=b.GetVariable("$version");d&&(d=d.split(" ")[1].split(","),a=parseInt(d[0],10)+"."+parseInt(d[1],10))}}catch(e){}else navigator.plugins&&0<navigator.mimeTypes.length&&(b=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var b=!1;return this._getFlashPluginVersion()>=a&&(b=!0),b},_validString:function(a){return a&&"string"==typeof a},_limitValue:function(a,b,d){return b>a?b:a>d?d:a},_urlNotSetError:function(a){this._error({type:b.jPlayer.error.URL_NOT_SET,context:a,message:b.jPlayer.errorMsg.URL_NOT_SET,hint:b.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:b.jPlayer.error[c],context:this.internal.flash.swf,message:b.jPlayer.errorMsg[c]+a.message,hint:b.jPlayer.errorHint[c]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(b.jPlayer.event.error,a),this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(b.jPlayer.event.warning,f,a),this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a,this.options.consoleAlerts?console&&console.log&&console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;b.each(b.jPlayer.emulateMethods.split(/\s+/g),function(b,d){a.internal.domNode[d]=function(b){a[d](b)}}),b.each(b.jPlayer.event,function(c,d){var e=!0;b.each(b.jPlayer.reservedEvent.split(/\s+/g),function(a,b){return b===c?e=!1:void 0}),e&&a.element.bind(d+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var b=document.createEvent("Event");b.initEvent(c,!1,!0),a.internal.domNode.dispatchEvent(b)})})},_emulateHtmlUpdate:function(){var a=this;b.each(b.jPlayer.emulateStatus.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.status[d]}),b.each(b.jPlayer.emulateOptions.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.options[d]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml"),b.each((b.jPlayer.emulateMethods+" "+b.jPlayer.emulateStatus+" "+b.jPlayer.emulateOptions).split(/\s+/g),function(b,d){delete a.internal.domNode[d]})}},b.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},b.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+b.jPlayer.prototype.version.script+" needs Jplayer.swf version "+b.jPlayer.prototype.version.needFlash+" but found "},b.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},b.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},b.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},b.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}),/*!
 * zeroclipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie, and a JavaScript interface.
 * Copyright 2013 Jon Rohan, James M. Greene, .
 * Released under the MIT license
 * http://zeroclipboard.github.io/ZeroClipboard/
 * v1.2.0-beta.4
 */
function(){"use strict";var p,a=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),b=function(b,c){var d,e,f,g,h,i;if(window.getComputedStyle?d=window.getComputedStyle(b,null).getPropertyValue(c):(e=a(c),d=b.currentStyle?b.currentStyle[e]:b.style[e]),"cursor"===c&&(!d||"auto"===d))for(f=b.tagName.toLowerCase(),g=["a"],h=0,i=g.length;i>h;h++)if(f===g[h])return"pointer";return d},c=function(a){if(o.prototype._singleton){a||(a=window.event);var b;this!==window?b=this:a.target?b=a.target:a.srcElement&&(b=a.srcElement),o.prototype._singleton.setCurrent(b)}},d=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},e=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},f=function(a,b){if(a.addClass)return a.addClass(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},g=function(a,b){if(a.removeClass)return a.removeClass(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},h=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(b/c*100)/100),d},i=function(a){var c={left:0,top:0,width:0,height:0,zIndex:999999999},d=b(a,"z-index");if(d&&"auto"!==d&&(c.zIndex=parseInt(d,10)),a.getBoundingClientRect){var f,g,i,e=a.getBoundingClientRect();"pageXOffset"in window&&"pageYOffset"in window?(f=window.pageXOffset,g=window.pageYOffset):(i=h(),f=Math.round(document.documentElement.scrollLeft/i),g=Math.round(document.documentElement.scrollTop/i));var j=document.documentElement.clientLeft||0,k=document.documentElement.clientTop||0;c.left=e.left+f-j,c.top=e.top+g-k,c.width="width"in e?e.width:e.right-e.left,c.height="height"in e?e.height:e.bottom-e.top}return c},j=function(a){var b=o.prototype._singleton;return b.options.useNoCache?(a.indexOf("?")>=0?"&nocache=":"?nocache=")+(new Date).getTime():""},k=function(a){var b=[];if(a.trustedDomains){var c;"string"==typeof a.trustedDomains&&a.trustedDomains?c=[a.trustedDomains]:"length"in a.trustedDomains&&(c=a.trustedDomains),b.push("trustedDomain="+encodeURIComponent(c.join(",")))}return"string"==typeof a.amdModuleId&&a.amdModuleId&&b.push("amdModuleId="+encodeURIComponent(a.amdModuleId)),"string"==typeof a.cjsModuleId&&a.cjsModuleId&&b.push("cjsModuleId="+encodeURIComponent(a.cjsModuleId)),b.join("&")},l=function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},m=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},n=function(a,b,c,d,e){e?window.setTimeout(function(){a.call(b,c,d)},0):a.call(b,c,d)},o=function(a,b){if(a&&(o.prototype._singleton||this).glue(a),o.prototype._singleton)return o.prototype._singleton;o.prototype._singleton=this,this.options={};for(var c in s)this.options[c]=s[c];for(var d in b)this.options[d]=b[d];this.handlers={},o.detectFlashSupport()&&v()},q=[];o.prototype.setCurrent=function(a){p=a,this.reposition();var c=a.getAttribute("title");c&&this.setTitle(c);var d=this.options.forceHandCursor===!0||"pointer"===b(a,"cursor");r.call(this,d)},o.prototype.setText=function(a){a&&""!==a&&(this.options.text=a,this.ready()&&this.flashBridge.setText(a))},o.prototype.setTitle=function(a){a&&""!==a&&this.htmlBridge.setAttribute("title",a)},o.prototype.setSize=function(a,b){this.ready()&&this.flashBridge.setSize(a,b)},o.prototype.setHandCursor=function(a){a="boolean"==typeof a?a:!!a,r.call(this,a),this.options.forceHandCursor=a};var r=function(a){this.ready()&&this.flashBridge.setHandCursor(a)};o.version="1.2.0-beta.4";var s={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};o.setDefaults=function(a){for(var b in a)s[b]=a[b]},o.destroy=function(){o.prototype._singleton.unglue(q);var a=o.prototype._singleton.htmlBridge;a.parentNode.removeChild(a),delete o.prototype._singleton},o.detectFlashSupport=function(){var a=!1;if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}return!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0),a};var t=null,u=null,v=function(){var a=o.prototype._singleton,b=document.getElementById("global-zeroclipboard-html-bridge");if(!b){var c={};for(var d in a.options)c[d]=a.options[d];c.amdModuleId=t,c.cjsModuleId=u;var e=k(c),f='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+a.options.moviePath+j(a.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+a.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+e+'"/>         <embed src="'+a.options.moviePath+j(a.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+e+'"           scale="exactfit">         </embed>       </object>';b=document.createElement("div"),b.id="global-zeroclipboard-html-bridge",b.setAttribute("class","global-zeroclipboard-container"),b.setAttribute("data-clipboard-ready",!1),b.style.position="absolute",b.style.left="-9999px",b.style.top="-9999px",b.style.width="15px",b.style.height="15px",b.style.zIndex="9999",b.innerHTML=f,document.body.appendChild(b)}a.htmlBridge=b,a.flashBridge=document["global-zeroclipboard-flash-bridge"]||b.children[0].lastElementChild};o.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),g(p,this.options.activeClass),p=null,this.options.text=null},o.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===a||a===!0},o.prototype.reposition=function(){if(!p)return!1;var a=i(p);this.htmlBridge.style.top=a.top+"px",this.htmlBridge.style.left=a.left+"px",this.htmlBridge.style.width=a.width+"px",this.htmlBridge.style.height=a.height+"px",this.htmlBridge.style.zIndex=a.zIndex+1,this.setSize(a.width,a.height)},o.dispatch=function(a,b){o.prototype._singleton.receiveEvent(a,b)},o.prototype.on=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++)a=c[d].toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=b);this.handlers.noflash&&!o.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)},o.prototype.addEventListener=o.prototype.on,o.prototype.off=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++){a=c[d].toLowerCase().replace(/^on/,"");for(var e in this.handlers)e===a&&this.handlers[e]===b&&delete this.handlers[e]}},o.prototype.removeEventListener=o.prototype.off,o.prototype.receiveEvent=function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");var c=p,d=!0;switch(a){case"load":if(b&&parseFloat(b.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10)return void this.receiveEvent("onWrongFlash",{flashVersion:b.flashVersion});this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":f(c,this.options.hoverClass);break;case"mouseout":g(c,this.options.hoverClass),this.resetBridge();break;case"mousedown":f(c,this.options.activeClass);break;case"mouseup":g(c,this.options.activeClass);break;case"datarequested":var e=c.getAttribute("data-clipboard-target"),h=e?document.getElementById(e):null;if(h){var i=h.value||h.textContent||h.innerText;i&&this.setText(i)}else{var j=c.getAttribute("data-clipboard-text");j&&this.setText(j)}d=!1;break;case"complete":this.options.text=null}if(this.handlers[a]){var k=this.handlers[a];"string"==typeof k&&"function"==typeof window[k]&&(k=window[k]),"function"==typeof k&&n(k,c,this,b,d)}},o.prototype.glue=function(a){a=m(a);for(var b=0;b<a.length;b++)-1==l(a[b],q)&&(q.push(a[b]),d(a[b],"mouseover",c))},o.prototype.unglue=function(a){a=m(a);for(var b=0;b<a.length;b++){e(a[b],"mouseover",c);var d=l(a[b],q);-1!=d&&q.splice(d,1)}},"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return t=c&&c.id||null,o}):"undefined"!=typeof module&&module?(u=module.id||null,module.exports=o):window.ZeroClipboard=o}(),$.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"&#x3c;\u041f\u0440\u0435\u0434",nextText:"\u0421\u043b\u0435\u0434&#x3e;",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],monthNamesShort:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0432\u0441\u043a","\u043f\u043d\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043f\u0442\u043d","\u0441\u0431\u0442"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],weekHeader:"\u041d\u0435",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru),/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}return absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null},getLineHeight:function(elem){return parseInt($(elem)["offsetParent"in $.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var c,l,s,u,f,h;return!t&&this.length>0?(c=e(this[0]),c.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,s=[],u=h=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(h--,u=e):l[t]?(s.push(RegExp(l[t])),null===f&&(f=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function c(e){for(;h>++e&&!s[e];);return e}function d(e){for(;--e>=0&&!s[e];);return e}function m(e,t){var n,a;if(!(0>e)){for(n=e,a=c(t);h>n;n++)if(s[n]){if(!(h>a&&s[n].test(R[a])))break;R[n]=R[a],R[a]=r.placeholder,a=c(a)}b(),x.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;h>t;t++)if(s[t]){if(a=c(t),i=R[t],R[t]=n,!(h>a&&s[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=x.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?d(n):a=c(n-1),a=46===r?c(a):a),k(n,a),m(n,a-1),e.preventDefault()):27==r&&(x.val(S),x.caret(0,y()),e.preventDefault())}function v(t){var n,a,i,l=t.which,u=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(k(u.begin,u.end),m(u.begin,u.end-1)),n=c(u.begin-1),h>n&&(a=String.fromCharCode(l),s[n].test(a)&&(p(n),R[n]=a,b(),i=c(n),o?setTimeout(e.proxy(e.fn.caret,x,i),0):x.caret(i),r.completed&&i>=h&&r.completed.call(x))),t.preventDefault())}function k(e,t){var n;for(n=e;t>n&&h>n;n++)s[n]&&(R[n]=r.placeholder)}function b(){x.val(R.join(""))}function y(e){var t,n,a=x.val(),i=-1;for(t=0,pos=0;h>t;t++)if(s[t]){for(R[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),s[t].test(n)){R[t]=n,i=t;break}if(pos>a.length)break}else R[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?b():u>i+1?(x.val(""),k(0,h)):(b(),x.val(x.val().substring(0,i+1))),u?t:f}var x=e(this),R=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),S=x.val();x.data(e.mask.dataName,function(){return e.map(R,function(e,t){return s[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;S=x.val(),e=y(),n=setTimeout(function(){b(),e==t.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){y(),x.val()!=S&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){var e=y(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),y()}))}})}(jQuery),function($){$.fn.audionota=function(){this.each(function(){var mainplayer=$(this),audioplayer=$('<div class="audioplayer"></div>').prependTo(mainplayer),title=mainplayer.find(".title").text(),setMedia={},supplied="",id=mainplayer.attr("id")?mainplayer.attr("id"):"a"+(new Date).getTime();mainplayer.find(".media a").each(function(i){var a=$(this);supplied+=i>0?","+a.attr("rel"):a.attr("rel"),setMedia[a.attr("rel")]=a.attr("href")});var duration,volume,swfpath=(mainplayer.data("width")?mainplayer.data("width"):625,mainplayer.data("autoplay")?mainplayer.data("autoplay"):!1,mainplayer.data("mute")?mainplayer.data("mute"):!1,mainplayer.data("swf")?mainplayer.data("swf"):"/assets");mainplayer.data("volume")?(volume=mainplayer.data("volume"),null!=localStorage.getItem("volume")&&(console.log(localStorage.getItem("volume")),volume=localStorage.getItem("volume"))):volume=.5;var tpl='<div id="container_'+id+'" class="nota_audio"><div class="nota_type-single"><div id="notaplayer_'+id+'" class="nota_jplayer"></div><div class="nota_gui"><div class="nota_interface"><div class="nota_title-container"><div class="nota_title">'+title+'</div></div><div class="nota_progress-container"><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a><div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div></div></div></div><div class="errorlayer"><div class="errorstatus"></div></div><div class="waitinglayer"><div class="waitingstatus">\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0430\u0443\u0434\u0438\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div>';$(tpl).appendTo(audioplayer);var playerstatus,errorcurrentpos=0,currentPercentRelative=0,currentPercentAbsolute=0,currentTime=0,duration=0,remaining=0,errorlayer=audioplayer.find(".errorlayer"),errorstatus=errorlayer.find(".errorstatus"),waitinglayer=audioplayer.find(".waitinglayer");"apready"!=audioplayer.data("apready")&&$("#notaplayer_"+id).jPlayer({ready:function(){var player=$(this);player.jPlayer("setMedia",setMedia),audioplayer.data("apready","apready")},loadedmetadata:function(){},timeupdate:function(){},error:function(e){var player=$(this);void 0!=e.jPlayer.status.currentTime&&e.jPlayer.status.currentTime>0&&(errorcurrentpos=e.jPlayer.status.currentTime,currentPercentRelative=e.jPlayer.status.currentPercentRelative,currentPercentAbsolute=e.jPlayer.status.currentPercentAbsolute,currentTime=e.jPlayer.status.currentTime,duration=e.jPlayer.status.duration,remaining=e.jPlayer.status.remaining),"play"==playerstatus&&(window.setTimeout(function(){e.jPlayer.status.currentPercentRelative=currentPercentRelative,e.jPlayer.status.currentPercentAbsolute=currentPercentAbsolute,e.jPlayer.status.currentTime=currentTime,e.jPlayer.status.duration=duration,e.jPlayer.status.remaining=remaining,errorlayer.css("display",""),player.jPlayer("play",errorcurrentpos)},1e4),errorlayer.css("display","block"),errorstatus.html("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e.<br>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f..."))},play:function(){playerstatus="play";var player=$(this);errorcurrentpos>0&&player.jPlayer("play",errorcurrentpos)},pause:function(){playerstatus="pause"},stop:function(){playerstatus="stop"},waiting:function(){waitinglayer.css("display","block")},canplay:function(){waitinglayer.css("display","")},seeking:function(e){errorcurrentpos=e.jPlayer.status.currentTime},swfPath:swfpath,errorAlerts:!1,cssSelectorAncestor:"#container_"+id,cssSelector:{play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},volumechange:function(e){var v=e.jPlayer.options.volume;localStorage.setItem("volume",v)},volume:volume,supplied:supplied,wmode:"window",smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery),function($){$.fn.notaplayer=function(){this.each(function(){function sendstat(start,end){if(!mainplayer.data("stat"))return!1;abortstat();var t=300*(end-start);ssT=window.setTimeout(function(){var fragment;$(".playlist a",mainplayer).each(function(){var a=$(this);a.data("cutstart")==start&&a.data("cutend")==end&&(fragment=a.data("fragment"))}),$.ajax({url:mainplayer.data("stat"),dataType:"text",type:"GET",data:{videoid:mainplayer.data("videoid"),fragment:fragment,start:start,end:end},complete:function(){}})},t)}function abortstat(){window.clearTimeout(ssT)}var mainplayer=$(this),videoplayer=$('<div class="videoplayer"></div>').prependTo(mainplayer),setMedia={},supplied="",id=mainplayer.attr("id")?mainplayer.attr("id"):"v"+(new Date).getTime();mainplayer.find(".media a").each(function(i){var a=$(this);supplied+=i>0?","+a.attr("rel"):a.attr("rel"),setMedia[a.attr("rel")]=a.attr("href")}),setMedia.poster=mainplayer.find(".preview img").attr("src");var currenttime,duration,cutstart,cutend,inpcutstart,inpcutend,inpcuttime,cutslider,cutslideractivecontrol,notaloader,largeplaybutton,timetooltip,timetooltiptext,isMobile={Android:function(){return navigator.userAgent.match(/Android/i)?!0:!1},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?!0:!1},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?!0:!1},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?!0:!1},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}},width=mainplayer.data("width")?mainplayer.data("width"):590,height=mainplayer.data("height")?mainplayer.data("height"):396,autoplay=mainplayer.data("autoplay")?mainplayer.data("autoplay"):!1,volume=mainplayer.data("volume")?mainplayer.data("volume"):.6,mute=mainplayer.data("mute")?mainplayer.data("mute"):!1,swfpath=mainplayer.data("swf")?mainplayer.data("swf"):"/assets",firststart=!1,seeking=!1,playing=!1,tpl='<div id="container_'+id+'" class="nota_video" style="width:'+width+'px;"><div class="nota_type-single"><div id="notaplayer_'+id+'" class="nota_jplayer"></div><div class="nota_video-play"><a href="javascript:;" class="nota_video-play-icon" tabindex="1">\u0432\u043e\u0441\u043f\u0440.</a></div><div class="nota_gui"><div class="nota_interface"><div class="nota_progress-container"><div class="nota_time-cut"></div><div class="nota_progress"><div class="nota_seek-bar"><div class="nota_play-bar"></div><div class="nota_time-container"><span class="nota_current-time"></span> / <span class="nota_duration"></span></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_previous" tabindex="1"><span>\u043f\u0440\u0435\u0434.</span></a><a href="javascript:;" class="nota_play" tabindex="1"><span>\u0432\u043e\u0441\u043f\u0440.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span>\u043f\u0430\u0443\u0437\u0430</span></a><a href="javascript:;" class="nota_next" tabindex="1"><span>\u0441\u043b\u0435\u0434.</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span>\u0441\u0442\u043e\u043f</span></a><div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="\u0432\u044b\u043a\u043b."><span>\u0432\u044b\u043a\u043b.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="\u0432\u043a\u043b."><span>\u0432\u043a\u043b.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span>\u0432\u0436\u0430\u0440\u0438\u0442\u044c</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i><i></i></div></div></div></div><div class="nota_controls_row2"><div class="nota_toggles"><a href="javascript:;" class="nota_full-screen" tabindex="1" title="\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d">\u0432\u0435\u0441\u044c \u044d\u043a\u0440\u0430\u043d</a><a href="javascript:;" class="nota_restore-screen" tabindex="1" title="\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440">\u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440</a><a href="javascript:;" class="nota_repeat" tabindex="1" title="\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c">\u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c</a><a href="javascript:;" class="nota_repeat-off" tabindex="1" title="\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c">\u043d\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c</a><a href="javascript:;" class="nota_shuffle" tabindex="1" title="\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439">\u0432\u0440\u0430\u0437\u043d\u043e\u0431\u043e\u0439</a><a href="javascript:;" class="nota_shuffle-off" tabindex="1" title="\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443">\u043f\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u0443</a></div><div class="nota_speed"><a href="javascript:;" class="nota_speed-up" tabindex="1" title="\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c">\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c</a></div><div class="nota_jump"><a href="javascript:;" class="nota_jump-back" tabindex="1" title="\u0447\u0443\u0442\u044c \u043d\u0430\u0437\u0430\u0434">-</a><span class="nota_jump-step">10</span><a href="javascript:;" class="nota_jump-forward" tabindex="1" title="\u0447\u0443\u0442\u044c \u0432\u043f\u0435\u0440\u0435\u0434">+</a></div><div class="nota_cut-control"><a href="javascript:;" class="nota_cut-start" tabindex="1" title="\u043e\u0442 \u0441\u0438\u0445">\u043e\u0442 \u0441\u0438\u0445</a><a href="javascript:;" class="nota_cut-cancel" tabindex="1" title="\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"><i></i><span>\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c</span></a><a href="javascript:;" class="nota_cut-end" tabindex="1" title="\u0434\u043e \u0441\u0438\u0445">\u0434\u043e \u0441\u0438\u0445</a></div></div><div class="nota_share-control"><a href="javascript:;" class="nota_share-button" tabindex="1" title="\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"><i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span></a></div></div></div></div><div class="nota_no-solution"><span>\u041d\u0443\u0436\u0435\u043d \u043f\u043b\u0430\u0433\u0438\u043d</span>\u0414\u043b\u044f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0435\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div><div class="nota_share-panel"><a href="#" class="nota_close_share">\u0437\u0430\u043a\u0440\u044b\u0442\u044c</a><form action="." method="post"><div class="nota_sp-getlink"><span class="nota_code-field"><label for="getlink_'+id+'">\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0440\u043e\u043b\u0438\u043a</label><input type="text" id="getlink_'+id+'" name="getlink" readonly="readonly" /><button type="button" value="getlink" data-clipboard-target="getlink_'+id+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443</button></span></div><div class="nota_sp-embed"><div class="nota_sp-size"><span class="nota_title">\u0420\u0430\u0437\u043c\u0435\u0440\u044b \u0432\u0438\u0434\u0435\u043e</span><span class="nota_radio nota_checked"><input type="radio" id="vsize_'+id+'_1" name="vsize" value="large" checked="checked" /><label for="vsize_'+id+'_1">(590x396)<i></i>\u0411\u043e\u043b\u044c\u0448\u043e\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+id+'_2" name="vsize" value="medium" /><label for="vsize_'+id+'_2">(420x282)<i></i>\u0421\u0440\u0435\u0434\u043d\u0435\u0435</label></span><span class="nota_radio"><input type="radio" id="vsize_'+id+'_3" name="vsize" value="small" /><label for="vsize_'+id+'_3">(180x120)<i></i>\u041c\u0430\u043b\u043e\u0435</label></span></div><div class="nota_sp-getcode"><span class="nota_code-field"><label for="getcode_'+id+'">\u0412\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0440\u043e\u043b\u0438\u043a \u043d\u0430 \u0432\u0430\u0448 \u0441\u0430\u0439\u0442</label><input type="text" id="getcode_'+id+'" name="getcode" readonly="readonly" /><button type="button" value="getcode" data-clipboard-target="getcode_'+id+'">\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434</button></span></div><div class="nota_sp-cutsettings"><div class="nota_sp-cutset"><span class="nota_radio"><input type="radio" id="vcut_'+id+'_1" name="vcut" value="full" /><label for="vcut_'+id+'_1"><i><i></i></i>\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e</label></span><span class="nota_radio nota_checked"><input type="radio" id="vcut_'+id+'_2" name="vcut" value="cut" checked="checked" /><label for="vcut_'+id+'_2"><i><i></i></i>\u041e\u0442\u0440\u044b\u0432\u043e\u043a</label></span></div><div class="nota_sp-cutstart"><span class="nota_cut-field"><label for="cutstart_'+id+'">\u041d\u0430\u0447\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutstart_'+id+'" name="cutstart" readonly="readonly" /></span></div><div class="nota_sp-cutend"><span class="nota_cut-field"><label for="cutend_'+id+'">\u041a\u043e\u043d\u0435\u0446 \u0432\u0440\u0435\u043c\u0435\u043d\u0438</label><input type="text" id="cutend_'+id+'" name="cutend" readonly="readonly" /></span></div><div class="nota_sp-cuttime"><span class="nota_cut-field"><label for="cuttime_'+id+'">\u041f\u043e\u043b\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f</label><input type="text" id="cuttime_'+id+'" name="cuttime" readonly="readonly" /></span></div><div class="nota_sp-cutbut"><div><button type="button" value="preview">\u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440</button></div><div><button type="button" value="reset">\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043b\u0438\u043f</button></div></div></div></div></form></div><div class="nota_loader"></div></div></div>';$(tpl).appendTo(videoplayer);var ssT;$("#notaplayer_"+id).jPlayer({ready:function(){var player=$(this);player.jPlayer("setMedia",setMedia);var gui=mainplayer.find(".nota_gui");mainplayer.find(".prepare").hide(),mainplayer.find(".nota_video-play").css({"margin-top":"-"+height+"px",height:height+"px"}),autoplay&&player.jPlayer("play"),notaloader=mainplayer.find(".nota_loader"),largeplaybutton=mainplayer.find(".nota_video-play"),isMobile.any()&&notaloader.hide(),timetooltip=mainplayer.find(".nota_time-tooltip"),timetooltiptext=$("span",timetooltip);var seekbar=mainplayer.find(".nota_progress"),seekbarpos=seekbar.offset(),seekbarW=seekbar.width();seekbar.mouseenter(function(e){timetooltip.show(),seekbarpos=seekbar.offset(),timetooltip.css({left:e.pageX-seekbarpos.left+"px",top:e.pageY-seekbarpos.top+"px"})}).mouseleave(function(){timetooltip.hide()}).mousemove(function(e){var l=e.pageX-seekbarpos.left;timetooltip.css({left:l+"px",top:e.pageY-seekbarpos.top+"px"}),timetooltiptext.text($.jPlayer.convertTime(100*l/seekbarW*duration/100))}).click(function(){});var jpsharebutton=mainplayer.find(".nota_share-button"),jpsharepanel=mainplayer.find(".nota_share-panel");jpsharepanel.css("opacity",0),jpsharebutton.click(function(e){e.preventDefault(),$(this).blur(),jpsharebutton.hasClass("opened")?jpsharepanel.stop().animate({opacity:0},function(){jpsharebutton.removeClass("opened").html("<i></i><span>\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span>"),jpsharepanel.css("display","none")}):jpsharepanel.stop().css("display","block").animate({opacity:1},function(){jpsharebutton.addClass("opened").html("<i></i><span>\u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443</span>")})}),mainplayer.find(".nota_close_share").click(function(e){e.preventDefault(),$(this).blur(),jpsharebutton.click()}),mainplayer.find(".nota_radio").each(function(){var cont=$(this),par=cont.parent(),inp=cont.find(":radio");inp.bind("change",function(){$(this).prop("checked")&&(par.find(".nota_checked").removeClass("nota_checked"),cont.addClass("nota_checked"))})}),mainplayer.find(".nota_jump-back").click(function(e){e.preventDefault(),$(this).blur(),abortstat(),player.jPlayer("play",currenttime-10)}),mainplayer.find(".nota_jump-forward").click(function(e){e.preventDefault(),$(this).blur(),abortstat(),player.jPlayer("play",currenttime+10)}),inpcutstart=$(':input[name="cutstart"]',mainplayer),inpcutend=$(':input[name="cutend"]',mainplayer),inpcuttime=$(':input[name="cuttime"]',mainplayer);var getcode=$(':input[name="getcode"]',mainplayer);""!=mainplayer.data("permalink")?$(':input[name="getlink"]',mainplayer).val(mainplayer.data("permalink")):mainplayer.find(".nota_sp-getlink").remove(),mainplayer.data("embed")||mainplayer.find(".nota_sp-embed").remove(),$(".nota_sp-cutbut button[value=reset]",mainplayer).click(function(){$(':input[name="vcut"]:eq(0),:input[name="vsize"]:eq(0)',mainplayer).click(),mainplayer.trigger("cutchange"),$(this).blur()}),$(".nota_sp-cutbut button[value=preview]",mainplayer).click(function(){mainplayer.find(".nota_share-button").click(),player.jPlayer("play",cutstart),$(this).blur()}),$(':input[name="vcut"],:input[name="vsize"]',mainplayer).bind("change",function(e){var inp=$(e.target);"vcut"==inp.attr("name")&&("full"==inp.val()?(cutslider.slider({values:[0,100]}),cutstart=0,cutend=duration):(cutstart=currenttime,cutslider.slider("values",0,100*cutstart/duration))),mainplayer.trigger("cutchange")});var linkbutton=$('button[value="getlink"]',mainplayer),getlinkbutton=new ZeroClipboard(linkbutton,{moviePath:mainplayer.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});getlinkbutton.on("noFlash",function(){linkbutton.hide()}),getlinkbutton.on("complete",function(){});var codebutton=$('button[value="getcode"]',mainplayer),getcodebutton=new ZeroClipboard(codebutton,{moviePath:mainplayer.data("swf")+"/ZeroClipboard.swf",hoverClass:"hover",forceHandCursor:!0});getcodebutton.on("noFlash",function(){codebutton.hide()}),getcodebutton.on("complete",function(){}),mainplayer.bind("cutchange",function(e){if(inpcutstart.val($.jPlayer.convertTime(cutstart)),inpcutend.val($.jPlayer.convertTime(cutend)),inpcuttime.val($.jPlayer.convertTime(cutend-cutstart)),""!=mainplayer.data("embed")){var href=mainplayer.data("embed"),vcut=$(':input:checked[name="vcut"]',mainplayer).val(),vsize=$(':input:checked[name="vsize"]',mainplayer).val();href=href.indexOf("?")>-1?href+"&":href+"?";var s="full"==vcut?0:cutstart,e="full"==vcut?duration:cutend,w=590,h=396;"medium"==vsize&&(w=420,h=282),"small"==vsize&&(w=180,h=120),(cutstart>0||duration>cutend)&&$(':input[name="vcut"][value="cut"]',mainplayer).click(),getcode.val('<object data="'+href+"s="+Math.round(s)+"&e="+Math.round(e)+"&w="+w+"&h="+h+'" width="'+w+'" height="'+h+'"></object>')}}),mainplayer.data("permalink")||mainplayer.data("embed")||mainplayer.find(".nota_share-control").remove();var T;mainplayer.mouseenter(function(){window.clearTimeout(T),gui.css("opacity","")}).mouseleave(function(){T=window.setTimeout(function(){jpsharebutton.hasClass("opened")||gui.css("opacity","0")},2e3)}),500>width&&mainplayer.addClass("sizesmall"),300>width&&mainplayer.addClass("sizelite")},loadedmetadata:function(e){var player=$(this),cutcontrol=mainplayer.find(".nota_cut-control");cutslider=mainplayer.find(".nota_time-cut"),duration=e.jPlayer.status.duration,cutstart=mainplayer.data("cutstart")?mainplayer.data("cutstart"):0,cutend=mainplayer.data("cutend")?mainplayer.data("cutend"):duration,cutslider.slider({range:!0,step:.01,values:[100*cutstart/duration,100*cutend/duration],slide:function(){timetooltip.css({display:"block",left:+cutslider.slider("values",cutslideractivecontrol.data("index"))+"%",top:"-10px"}),timetooltiptext.text($.jPlayer.convertTime(cutslider.slider("values",cutslideractivecontrol.data("index"))*duration/100))},stop:function(event,ui){var currpercent=100*currenttime/duration;ui.values[0]>=currpercent?(cutslider.slider({values:[currpercent,ui.values[1]]}),cutstart=currenttime):cutstart=ui.values[0]*duration/100,ui.values[1]<=currpercent?(player.jPlayer("pause",currenttime),cutslider.slider({values:[ui.values[0],currpercent]}),cutend=currenttime):cutend=ui.values[1]*duration/100,mainplayer.trigger("cutchange"),timetooltip.css("display","none")},start:function(){cutslideractivecontrol=cutslider.find(".ui-slider-handle.ui-state-hover, .ui-slider-handle.ui-state-active")},create:function(){cutslider.hide(),cutcontrol.find(".nota_cut-start").click(function(e){e.preventDefault(),$(this).blur(),cutstart=currenttime,cutslider.slider("values",0,100*cutstart/duration),mainplayer.trigger("cutchange")}),cutcontrol.find(".nota_cut-end").click(function(e){e.preventDefault(),$(this).blur(),cutend=currenttime,cutslider.slider("values",1,100*cutend/duration),mainplayer.trigger("cutchange")}),cutcontrol.find(".nota_cut-cancel").click(function(e){e.preventDefault(),$(this).blur(),cutstart=0,cutend=duration,cutslider.slider({values:[100*cutstart/duration,100*cutend/duration]}),mainplayer.trigger("cutchange")}),cutslider.find(".ui-slider-handle").each(function(i){$(this).data("index",i)}),mainplayer.trigger("cutchange");var playlist=mainplayer.find(".playlist");if(playlist.length>0){playlist.find(".fullplay").data("cutstart",0).data("cutend",duration),$("a",playlist).click(function(e){e.preventDefault();var a=$(this);cutstart=a.data("cutstart"),cutend=a.data("cutend"),cutslider.slider({values:[100*cutstart/duration,100*cutend/duration]}),mainplayer.trigger("cutchange"),player.jPlayer("play",cutstart),a.blur()}),$(".nota_previous, .nota_next",mainplayer).click(function(){var curr,button=$(this);if($(".fragments a",playlist).each(function(){var a=$(this);a.data("cutstart")<=currenttime&&a.data("cutend")>=currenttime&&(curr=a.parent(".fragment"))}),curr&&curr.length>0){var newli=button.hasClass("nota_next")?curr.next():curr.prev();newli.length<1&&(newli=button.hasClass("nota_next")?$(".fragment:eq(0)",playlist):$(".fragment:last",playlist)),$("a",newli).click()}else $(".fragments a:eq(0)",playlist).click();button.blur()});var firstcut=$(".fragments a:eq(0)",playlist);cutstart=firstcut.data("cutstart"),cutend=firstcut.data("cutend"),cutstart>0&&!autoplay&&player.jPlayer("pause",cutstart),cutslider.slider({values:[100*cutstart/duration,100*cutend/duration]}),mainplayer.trigger("cutchange")}else mainplayer.addClass("no_prev").addClass("no_next")}}),largeplaybutton.show(),firststart=!0},loadeddata:function(){notaloader.hide()},seeked:function(){currenttime>cutend&&(cutend=duration,cutslider.slider("values",1,100),mainplayer.trigger("cutchange")),cutstart>currenttime&&(cutstart=currenttime,cutslider.slider("values",0,100*cutstart/duration),mainplayer.trigger("cutchange")),firststart?(notaloader.hide(100,function(){notaloader.css({"background-color":"transparent",opacity:1})}),cutslider.show(),firststart=!1):(largeplaybutton.hide(),notaloader.hide()),seeking=!1},seeking:function(){seeking=!0,isMobile.any()||notaloader.show()},waiting:function(){},timeupdate:function(e){currenttime=e.jPlayer.status.currentTime,!seeking&&playing&&currenttime>=cutend&&$(this).jPlayer("pause",cutend)},play:function(){var player=$(this);player.jPlayer("pauseOthers"),(cutstart>=currenttime||currenttime>=cutend)&&player.jPlayer("play",cutstart),playing=!0,largeplaybutton.hide()},playing:function(){notaloader.hide(),largeplaybutton.hide(),playing=!0,sendstat(cutstart,cutend)},pause:function(){playing=!1,largeplaybutton.show(),abortstat()},cssSelectorAncestor:"#container_"+id,cssSelector:{videoPlay:".nota_video-play",play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},swfPath:swfpath,preload:"metadata",solution:"html,flash",volume:volume,muted:mute,supplied:supplied,size:{width:width+"px",height:height+"px",cssClass:"nota_video-"+width+"p"},smoothPlayBar:!1,keyEnabled:!1})})}}(jQuery);var _columns=4,WND,DOC,BODY,CONT,touchdevice=!1,echoears=!1,main={total:{fb_cnt:null,vk_cnt:null,tw_cnt:null},init:function(){pageuri=window.location},display_block:function(container){$(container).show()}},social={fb_count:function(){main.total.fb_cnt=0},vk_count:function(container){VK={},VK.Share={},VK.Share.count=function(index,count){$("span",container).text(count),main.total.vk_cnt=parseInt(count)},$.getJSON("https://vk.com/share.php?act=count&index=1&url="+pageuri+"&format=json&callback=?")},click_button:function(container){var click=!1;$(container).click(function(){if(!click){var social_box=$(this).parent("div"),count=parseInt($("span",social_box).text());isNaN(count)||(count+=1,$("span",social_box).text(count)),click=!0}return window.open($(this).attr("href"),"displayWindow","width=700,height=400,left=200,top=100,location=no, directories=no,status=no,toolbar=no,menubar=no"),!1})}};$(function(){WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$("html").hasClass("no-touch")||(touchdevice=!0),$(".echoears").length>0&&(echoears=!0),bodyclassName(WND,BODY,CONT);var Tcol;WND.on("resize",function(){window.clearTimeout(Tcol),Tcol=window.setTimeout(function(){bodyclassName(WND,BODY,CONT),BODY.trigger("changecolumns")},150)}),DOC.trigger("pagechange")}),$(document).bind("pagechange",function(){WND=$(window),DOC=$(document),BODY=$("body"),CONT=BODY.find(".content"),$(".iblock, .mainmenu a, .secondmenu a").cleanWS(),$(".supermaincarousel").supermaincarousel(),$(".liveaudioplayer").initLive(),$(".toair").on("click",function(){$.scrollTo($(this).attr("href"),500,{easing:"easeOut"})}),$(".echotop").echotop(),$(".echoleft, .echoright").echoleftright(),$(".icsearch").showSearch(),$(".open_auth").authForm(),$(".authorized").logoutForm(),$(".imgcarousel").mediacarousel(),$(".fragments").columnize({columns:3,lastNeverTallest:!0}),$(".mainpreview").mainpreview(),$(".mainpeoples").mainpeoples(),$(".notaplayer").notaplayer(),$(".audionota").audionota(),$(".multimedia").mmtabs(),$(".bonustabs").bonustabs(),$(".commentList").comFunc(),$(".shareBlock").sharePopup(),$(".custom_check").replaceCheckBox(),$(".custom_radio").radioReplace(),$(".votescharts").votescharts(),$(".piechart").piechart(),$(".carousel").notacarousel(),$("#onair").onaircarousel(),$(".title_info .open").footOpen(),$(".programm_info").descrOpen(),$(".search_result .c_select").selectReplace(),$(".faq").faq(),$(".ajax_comments").click(function(e){e.preventDefault();var a=$(this),COMMENTSBLOCK=$(".answform");return $.ajax({url:a.attr("href"),method:"GET",success:function(html){$(html).insertBefore(COMMENTSBLOCK).fadeIn("slow"),a.parent().remove()}}),!1}),$(".abc a").click(function(e){e.preventDefault();var a=$(this),list=$(".broadcast_list, .person_list");return $(".abc a").removeClass("cur"),$.ajax({url:a.attr("href"),method:"GET",success:function(html){list.html(html),a.addClass("cur"),$(".iblock").cleanWS(),list.trigger("update",[])
}}),!1}),$("#searchList").letterlist({inp:"#quicksearch",spn:".author .name, .guestst b, .title h2 a"}),function(){var $suggestCover=$(".js-suggest"),$search=$("#psearch",$suggestCover),$suggest=$(".js-suggest-list",$suggestCover),url=$suggestCover.data("src");$search.on("keyup",function(){var val=$search.val();return val.length<3?void $suggest.addClass("_hidden"):void $suggest.load(url+"?val="+val,function(){$suggest.removeClass("_hidden")})})}(),$(".calendar").each(function(){$(this).calendar()}),pageUp(),popularblFunc(),touchdevice||DOC.on("mouseenter",".preview",function(){var block=$(this);if(block.hasClass("mouseenter")||block.hasClass("previewclone")||block.parents(".mainpeoples").length>0||block.hasClass("voicepreview"))return!1;$(".mouseenter").removeClass("mouseenter"),$(".previewclone").remove();var clone=block.clone(!0);clone.addClass("previewclone"),block.hasClass("bdjhot")&&clone.addClass("bdjhot"),block.hasClass("bdjnew")&&clone.addClass("bdjnew"),block.addClass("mouseenter");var pos=block.offset(),cls="clone"+(new Date).getTime();clone.appendTo("body"),clone.css({opacity:0,position:"absolute",top:pos.top,left:pos.left,margin:0,"z-index":10}).addClass("hover").addClass(cls),clone.stop().animate({opacity:1},250),clone.on("mouseleave",function(e){return $(e.tagret).parents("."+cls).length>0?!1:void clone.stop().animate({opacity:0},100,function(){block.removeClass("mouseenter"),clone.remove()})})}),DOC.on("click",".js-expandtxt",function(){$(this).toggleClass("op")}),DOC.on("click",".js-popup",function(){return $(this).popupList(),!1}),$(".uipopup").uipopup(),$(".connect_bl").tabs(),$(".typical ul:not([class]), .typical ol:not([class])").each(function(){var list=$(this);list.addClass("norm"),$("li",list).wrapInner('<div class="dark"></div>')}),$(".typical table:not([class]) tr:gt(0)").mouseenter(function(){$(this).addClass("hover")}).mouseleave(function(){$(this).removeClass("hover")}),$(".typicalform").each(function(){var form=$(this);$(":checkbox",form).replaceCheckBox(),$(":radio",form).radioReplace(),$("select",form).selectReplace(),form.find(".birthdate").on("change",function(){form.find(".setbirthdate").val($(this).val())}).mask("99.99.9999"),form.find(".setbirthdate").on("change",function(){form.find(".birthdate").val($(this).val())}).on("focus",function(){$.scrollTo($(this),{offset:{left:0,top:-150}})})}),$(".calend").click(function(){return!1}),$(".calendarmonth").each(function(){$(this).calendarmonth()}),$(".calendaryear").each(function(){$(this).calendaryear()}),$(".calendarweek").each(function(){$(this).calendarweek()}),$("#mainsidebar").each(function(){function ajustHeight(){aside.height("").removeClass("asideheightajust");var asideH=aside.outerHeight(),contH=0;cont.each(function(){contH+=$(this).outerHeight(!0)}),asideH>contH&&aside.height(contH).addClass("asideheightajust")}var aside=$(this),par=aside.parent();cont=par.children("section"),cont.length>0&&ajustHeight(),WND.on("resize load",ajustHeight)}),$(".open_auth_link, .open_reg_link").on("click",function(e){e.preventDefault();var a=$(this),authpopup=$(".auth_popup");authpopup.find(".open").removeClass("open"),authpopup.children(a.hasClass("open_auth_link")?".reg":".auth").addClass("open"),authpopup.find(a.hasClass("open_auth_link")?".authform, .socialblock":".regform").addClass("open"),DOC.scrollTo(0,600,{easing:"easeOutQuad",onAfter:function(){$(".header .open_auth").trigger("click")}})}),$(".mainmenu").submenuOpen()}),$(window).load(function(){WND=$(window),BODY=$("body"),CONT=BODY.find(".content"),bodyclassName(WND,BODY,CONT),$(".mainbanner_box").fadeIn()}),$(function(){var i=0;main.init(),social.click_button(".fb_btn"),social.click_button(".vk_btn"),social.click_button(".tw_btn"),social.fb_count(".fb_sharer"),social.vk_count(".vk_sharer"),interval=setInterval(function(){i++,null!==main.total.fb_cnt&&null!==main.total.vk_cnt&&null!==main.total.tw_cnt?(main.display_block(".social_block"),clearInterval(interval)):i>30&&clearInterval(interval)},100)}),function($){$.fn.cleanWS=function(){this.each(function(){for(var iblock=this,par=iblock.parentNode,prev=iblock.previousSibling,next=iblock.nextSibling;prev;){var newprev=prev.previousSibling;if(3==prev.nodeType&&prev.nodeValue)for(var i=prev.nodeValue.length-1;i>-1;i--){var cc=prev.nodeValue.charCodeAt(i);if(9!=cc&&10!=cc&&32!=cc)break;prev.nodeValue=prev.nodeValue.slice(0,i)}8==prev.nodeType&&par.removeChild(prev),prev=newprev}for(;next;){var newnext=next.nextSibling;if(3==next.nodeType&&next.nodeValue)for(;next.nodeValue.length;){var cc=next.nodeValue.charCodeAt(0);if(9!=cc&&10!=cc&&32!=cc)break;next.nodeValue=next.nodeValue.slice(1)}8==next.nodeType&&par.removeChild(next),next=newnext}})}}(jQuery),function($){$.fn.notacarousel=function(options){this.each(function(){function init(){var curr=cont.find(".current");items.wrapAll('<div class="carouselwrapper"><div class="carouselslide"></div></div>');var W=0;if(items.each(function(){W+=$(this).outerWidth(!0)}),cont.find(".carouselslide").width(W),setNav("init"),curr.length>0){curr.nextAll(".preview").addClass("later");var val=100*(curr.index()+1)/size;cont.find(".carouselslider").slider({value:val}),moveBySlider(val,!0)}}function reinit(){o.slider=cont.find(".carouselslider").length>0?!0:!1,cont.find(".carouselnav").remove(),setNav("reinit")}function moveBySlider(val,bychange){var block=Math.round(val*size/100),ind=Math.ceil(block/_columns),nav=cont.find(".carouselnav"),navslides=$("li.slide",nav);if(bychange){var slide=cont.find(".carouselslide"),wrapper=cont.find(".carouselwrapper"),W=0,sw=slide.width(),ww=wrapper.width();if(nav.find(".current").removeClass("current"),navslides.eq(ind-1).addClass("current"),block-2>0){for(var n=0;block-2>n;n++){var item=items.eq(n);item.length>0&&(W+=Math.ceil(item.outerWidth(!0)))}ww>sw-W&&(W=sw-ww-parseInt(items.last().css("margin-right")))}slide.css({"margin-left":-W})}else navslides.eq(ind-1>0?ind-1:0).trigger("click",["slide"])}function setNav(evtype){for(var nav=$('<ul class="carouselnav"/>').appendTo(cont),i=0;size>i;i++)i%_columns==0&&nav.append('<li class="slide"><i class="num">'+i+"</i></li>");nav.append('<li class="toleft"><i class="wsico">&#x0033;</i></li><li class="toright"><i class="wsico">&#x0034;</i></li>'),$("li.toleft,li.toright",nav).on("click",function(){var li=$(this),curr=nav.find(".current"),newli=li.hasClass("toleft")?curr.prev(".slide"):curr.next(".slide");newli.length>0&&newli.trigger("click")});for(var curr=0,i=0;i<items.length;i++){var pos=items.eq(i).position();if(pos.left>=0)break;i%_columns==0&&curr++}var linav=$("li.slide",nav),linavsize=linav.length;linav.each(function(i){var navli=$(this);navli.addClass(i==curr?"current":"gtcurrent"),navli.bind("dblclick",function(e){e.preventDefault()}),navli.children("i").text(i+1),navli.click(function(e,esource){e.preventDefault();var li=$(this),wrapper=cont.find(".carouselwrapper"),slide=cont.find(".carouselslide");if(li.hasClass("current")||cont.hasClass("inaction"))return!1;"slide"!=esource?(T=o.T,A=o.A,cont.addClass("inaction")):(T=0,A="linear");for(var current=nav.find(".current"),ind=li.index(),W=0,num=ind*_columns,sw=slide.width(),ww=wrapper.width(),n=0;num>n;n++){var item=items.eq(n);item.length>0&&(W+=Math.ceil(item.outerWidth(!0)))}if(ww>sw-W&&(W=sw-ww-parseInt(items.last().css("margin-right"))),slide.stop().animate({"margin-left":-W},T,A,function(){current.removeClass("current"),li.addClass("current"),cont.removeClass("inaction"),$("li.gtcurrent",nav).removeClass("gtcurrent"),$("li.slide:gt("+ind+")",nav).addClass("gtcurrent");var ind=$("li.current",nav).index();$("li.toleft,li.toright",nav).removeClass("disabled"),0==ind&&$("li.toleft",nav).addClass("disabled"),ind==linavsize-1&&$("li.toright",nav).addClass("disabled")}),o.slider){var val=100*num/size;0==ind&&(val=0),ind==linavsize-1&&(val=100),cont.find(".carouselslider").slider({value:val})}});var ind=$("li.current",nav).index();$("li.toleft,li.toright",nav).removeClass("disabled"),0==ind&&$("li.toleft",nav).addClass("disabled"),ind==linavsize-1&&$("li.toright",nav).addClass("disabled")});var W=0,slide=cont.find(".carouselslide"),sw=slide.width(),ww=cont.find(".carouselwrapper").width(),ML=parseInt(slide.css("margin-left"));if(ww-sw>ML&&(W=sw-ww-parseInt(items.last().css("margin-right")),slide.stop().animate({"margin-left":-W},T/10,A,function(){})),"init"==evtype&&o.slider){var slider=$('<div class="carouselslider" />').appendTo(cont);slider.slider({step:100/size,slide:function(event,ui){moveBySlider(ui.value)},stop:function(event,ui){moveBySlider(ui.value)},change:function(){}})}}var o,defaults={T:touchdevice?350:800,A:touchdevice?"easeOutQuad":"easeOutQuad",slider:!1};o="string"!=typeof options?$.extend(defaults,options):defaults;var cont=$(this),items=cont.find(".iblock.preview"),size=items.length,T=o.T,A=o.A;"reinit"==options?reinit():init(),$("body").bind("changecolumns",function(){reinit()})})}}(jQuery),function($){$.fn.mainpeoples=function(options){this.each(function(){function init(){fake_showcase=showcase.clone(),fake_showcase.find(".freshentry").remove(),fake_showcase.addClass("fake").appendTo(cont),prepare("init")}function reinit(){prepare("reinit")}function prepare(evtype){var W=showcase.width(),w=4*W/9;showcase.children(".iblock").each(function(){{var column=$(this),pos=column.position();column.width()}pos.left<w?column.removeClass("tol").addClass("tor"):column.removeClass("tor").addClass("tol"),"init"==evtype&&(column.find(".mainperson").each(function(){var person=$(this),freshentry=person.find(".freshentry"),photo=person.children(".photo"),freshphoto=freshentry.find(".photo");freshentry.children().wrapAll('<div class="fe_bg"><div class="fe_cont"></div></div>');var txt=$(".author, .when, .txt, .meta, .mediamenu",freshentry);person.find(".mediamenu").length>0&&person.addClass("wmarg"),txt.css("opacity",0),photo.on("mouseenter",function(){photo.css("z-index",100),person.css("z-index",99),showcase.find(".vis").each(function(){var vis=$(this);vis.children(".photo").css("z-index",""),vis.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),vis.removeClass("vis").find(".freshentry").stop().animate({width:0},300,"easeOutQuad")});parseInt(freshphoto.css("border-top-width"));freshphoto.css("top",photo.position().top),freshentry.css(column.hasClass("tor")?{right:"auto",left:column.position().left-parseInt(freshphoto.css("left"))}:{left:"auto",right:showcase.width()-column.position().left-column.width()-parseInt(freshphoto.css("right"))-parseInt(freshphoto.css("border-right-width"))});var fw=person.hasClass("wmarg")?"41.625em":"36.625em";column.hasClass("type2")&&(fw=person.hasClass("wmarg")?"33.125em":"28.125em"),column.hasClass("type3")&&(fw=person.hasClass("wmarg")?"28.4375em":"23.4375em"),freshentry.stop().animate({width:fw},300,"easeOutQuad",function(){txt.animate({opacity:1},500,function(){photo.css("z-index","")})}),person.addClass("vis"),$(document).off("mousemove.closefreshentry").on("mouseout.closefreshentry",function(e){$(e.target).parents(".vip_showcase").length<1&&showcase.find(".vis").each(function(){var vis=$(this);vis.children(".photo").css("z-index",""),vis.css("z-index","").find(".author, .when, .txt, .meta, .mediamenu").stop().animate({opacity:0},100,"easeInCubic"),vis.removeClass("vis").find(".freshentry").stop().animate({width:0},100,"easeOutQuad")})})}).on("mouseout",function(){}).on("click dblclick",function(e){e.preventDefault()})}),showcase.addClass("mp_ready"))})}var cont=$(this),showcase=(cont.find(".vip_sign"),cont.find(".vip_showcase"));"reinit"==options?reinit():init(),$("body").bind("changecolumns",function(){reinit()})})}}(jQuery),function($){$.fn.mainpreview=function(options){this.each(function(){function setHeight(columns){morebutt.css("margin-top","0");for(var maxh=0,maxbh=0,i=0;i<columns.length;i++){var col=columns[i][columns[i].length-1];maxh=Math.max(col.sum,maxh),i>0&&i<columns.length-1&&(maxbh=Math.max(col.sum,maxbh))}rel.height(maxh);var bott=maxbh-maxh+20;morebutt.css({"margin-top":bott}),cont.css({"margin-bottom":0});var absbott=Math.abs(bott);absbott-60>0&&cont.css({"margin-bottom":absbott-60})}function testImagesLoad(htmlcode,loader){var IMGS=htmlcode.find('img[src!=""]'),img=[];IMGS.each(function(){if($(this).attr("src")){var pic=new Image;pic.src=$(this).attr("src"),img.push(pic)}});var count=0;htmlcode.off("updatestat").on("updatestat",function(){count++,count>=img.length&&(prepare("reinit"),loader&&loader.length>0&&loader.remove(),$("a",morebutt).removeClass("onload"))});for(var i=0;i<img.length;i++)$(img[i]).bind("load abort error",function(){htmlcode.trigger("updatestat")})}function init(){$("a",morebutt).click(function(e){e.preventDefault();var a=$(this);if(a.hasClass("onload"))return!1;a.addClass("onload");var loader=$('<div class="loader" style="margin-left:-15px;"><img src="/i/ajax-loader_.gif" alt="\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"></div>').prependTo(a.parent());$.ajax({url:a.attr("href"),method:"GET",success:function(html){var htmlcode=$($(html).html());rel.height(""),rel.append(htmlcode),cont.find(".iblock").cleanWS(),testImagesLoad(rel,loader),prepare("reinit"),cont.trigger("change")}})}),prepare("init")}function reinit(){prepare("reinit")}function lineUp(columns,N,second){if(!reinitflag&&!runflag){runflag=!0;for(var maxtopblock,mintopblock,maxpos=0,minpos=0,mincol=0,maxcol=0,minH=0,minHCol=0,i=0;i<columns.length;i++){var col=columns[i][columns[i].length-1],bottom=col.sum;0==i?(minpos=bottom,maxpos=bottom,mincol=0,maxcol=0,mintopblock=col.obj,maxtopblock=col.obj):(minpos>bottom&&(minpos=bottom,mincol=i,mintopblock=col.obj),bottom>maxpos&&(maxpos=bottom,maxcol=i,maxtopblock=col.obj))}var oldcol=columns[maxcol][columns[maxcol].length-1],newcol=columns[mincol][columns[mincol].length-1],needreconstruct=!1;if(oldcol.sum-oldcol.H>newcol.sum&&"mainsidebar"!=oldcol.obj.attr("id")&&(needreconstruct=!0),!needreconstruct&&"mainsidebar"!=newcol.obj.attr("id")){for(var i=0;i<columns.length;i++){var col=columns[i][columns[i].length-1],top=col.sum-col.H;0==i?(minH=col.H,minHCol=0):top>minpos&&(minHCol=i)}var newHcol=columns[minHCol][columns[minHCol].length-1];newHcol.H<oldcol.sum-newcol.sum&&newHcol.sum-newHcol.H>newcol.sum&&(oldcol=newHcol,maxtopblock=oldcol.obj,mintopblock=newcol.obj,maxcol=minHCol,needreconstruct=!0)}if(needreconstruct){var h=Math.abs(parseInt(mintopblock.css("margin-bottom")));maxtopblock.css({left:240*(mincol-maxcol),top:mintopblock.offset().top-maxtopblock.offset().top+mintopblock.outerHeight()+h});var removed=columns[maxcol].splice(columns[maxcol].length-1,1),oldsum=columns[mincol][columns[mincol].length-1].sum;removed[0].sum=oldsum+removed[0].H,columns[mincol]?columns[mincol][columns[mincol].length]=removed[0]:columns[mincol]=removed}if(!needreconstruct&&"mainsidebar"!=oldcol.obj.attr("id")&&"mainsidebar"!=newcol.obj.attr("id")&&"mainnewscolumn"!=oldcol.obj.attr("id")&&"mainnewscolumn"!=newcol.obj.attr("id")&&oldcol.H>newcol.H){var oldtmp=columns[maxcol].splice(columns[maxcol].length-1,1),newtmp=columns[mincol].splice(columns[mincol].length-1,1),h=Math.abs(parseInt(newtmp[0].obj.css("margin-bottom"))),l=parseInt(oldtmp[0].obj.css("left"))+240*(mincol-maxcol),t=parseInt(oldtmp[0].obj.css("top"))+((columns[mincol].length>0?columns[mincol][columns[mincol].length-1].sum:0)-(columns[maxcol].length>0?columns[maxcol][columns[maxcol].length-1].sum:0));oldtmp[0].obj.css({left:l,top:t});var h=Math.abs(parseInt(oldtmp[0].obj.css("margin-bottom"))),l=parseInt(newtmp[0].obj.css("left"))+240*(maxcol-mincol),t=parseInt(newtmp[0].obj.css("top"))+((columns[maxcol].length>0?columns[maxcol][columns[maxcol].length-1].sum:0)-(columns[mincol].length>0?columns[mincol][columns[mincol].length-1].sum:0));newtmp[0].obj.css({left:l,top:t}),oldtmp[0].sum=(columns[mincol].length>0?columns[mincol][columns[mincol].length-1].sum:0)+oldtmp[0].H,newtmp[0].sum=(columns[maxcol].length>0?columns[maxcol][columns[maxcol].length-1].sum:0)+newtmp[0].H,columns[mincol]?columns[mincol][columns[mincol].length]=oldtmp[0]:columns[mincol]=oldtmp,columns[maxcol]?columns[maxcol][columns[maxcol].length]=newtmp[0]:columns[maxcol]=newtmp}runflag=!1,N++,N<columns.length?lineUp(columns,N,second):second||(N=0)}}function prepare(evtype){var preview=cont.find(".preview, .infinityitem");if(preview.length<5)return!1;"reinit"==evtype&&preview.css({"margin-top":""});var rowtop=0,columns=[],W=cont.width(),cc=Math.ceil(W/240),sidebar=$("#mainsidebar"),column=$("#mainnewscolumn");cont.closest("section").hasClass("content")||(columns[cc-1]=new Array({obj:sidebar,H:sidebar.outerHeight()-relpos.top+20,sum:sidebar.outerHeight()-relpos.top+20}),columns[cc-2]=new Array({obj:column,H:column.outerHeight()-relpos.top+20,sum:column.outerHeight()-relpos.top+20})),preview.css({position:"static",top:"",left:""}).each(function(){var block=$(this);if(!block.hasClass("preview"))return!1;block.css("position","relative");var pos=block.position(),H=block.outerHeight(!0);pos.top>rowtop&&(rowtop=pos.top);var ind=Math.round(pos.left/240),sum=columns[ind]&&columns[ind][columns[ind].length-1]?columns[ind][columns[ind].length-1].sum:0;columns[ind]?columns[ind].push({obj:block,id:block.data("maxid"),H:H,sum:sum+H}):columns[ind]=new Array({obj:block,id:block.data("maxid"),H:H,sum:sum+H}),block.css({"margin-top":-(pos.top-sum)})}),reinitflag=!1,lineUp(columns,0),setHeight(columns),$(window).load(function(){setHeight(columns)})}var cont=$(this),rel=cont.children(".rel"),relpos=rel.position(),morebutt=cont.find(".moregiant");morebutt.css({position:"relative","margin-top":0,clear:"none","margin-bottom":0,width:500,left:"50%","margin-left":-250}),cont.addClass("clearfix").css({"margin-bottom":0});var reinitflag=!1,runflag=!1;"reinit"==options?reinit():init(),testImagesLoad(rel,!1),testImagesLoad($("#mainnewscolumn"),!1),testImagesLoad($("#mainsidebar"),!1),$(window).bind("load",function(){window.setTimeout(function(){reinit()},1e3)}),$("body").bind("changecolumns",function(){reinit()})})}}(jQuery),function($){$.fn.bonustabs=function(){this.each(function(){var cont=$(this),nav=cont.find(".tabopener"),T=450,A="easeOutQuad";nav.on("click",function(e){if(e.preventDefault(),!$(this).hasClass("inaction")){var a=$(this),href=a.attr("href"),tab=$(href),txt=tab.find(".cont");if(a.addClass("inaction"),tab.hasClass("opened"))txt.css("opacity",0),tab.stop().animate({height:0},T,A,function(){$(this).removeClass("opened"),a.removeClass("inaction")});else{txt.css("opacity",0),tab.height("auto");var H=tab.height();tab.height(0),cont.find(".opened").stop().animate({height:0},T/10,A,function(){$(this).removeClass("opened")}),tab.stop().animate({height:H},T,A,function(){tab.addClass("opened").height("auto"),a.removeClass("inaction")}),window.setTimeout(function(){txt.animate({opacity:1},T/3,function(){})},T/4)}}}),cont.find(".form").submit(function(e){var form=$(this);return form.data("valid",!1),form.formValidator(),form.data("valid")?!0:(e.preventDefault(),!1)})})}}(jQuery),function($){$.fn.supermaincarousel=function(options){this.each(function(){function init(){prepare("init")}function reinit(){prepare("reinit")}function scatter(mask,delta){mask.find(".iblock").each(function(i){var B=$(this),storage=cont.find(".slidestorage"),block=$(".iblock:eq("+(i+delta)+")",storage),clone=block.children(".slide").clone(!0);clone.addClass("opened").appendTo(B);B.find(".opened .info").on("mouseenter",function(){B.addClass("hover"),B.find(".text").stop().slideDown(300)}).on("mouseleave",function(){B.find(".text").stop().slideUp(200,function(){B.removeClass("hover")})})})}function setmask(mask,emergency){mask.html(""),emergency?($('<div class="iblock type0" data-type="type0" />').appendTo(mask),5>_columns?$('<div class="iblock type4" data-type="type4" />').appendTo(mask):$('<div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(mask)):5>_columns?$('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type4" data-type="type4" />').appendTo(mask):$('<div class="iblock type1" data-type="type1" /><div class="iblock type2" data-type="type2" /><div class="iblock type3" data-type="type3" /><div class="iblock type4" data-type="type4" />').appendTo(mask)}function prepare(evtype){if("init"==evtype){var mask=$('<div class="slidesmask" />').appendTo(cont),blocks=cont.children(".iblock"),storage=$('<div class="slidestorage" />').appendTo(cont);blocks.appendTo(storage),$(".iblock:first",storage).hasClass("emergency")?setmask(mask,!0):setmask(mask,!1),scatter(mask,0);var nav=$('<div class="slidenav"><a href="#" class="toleft"><span class="wsico">&#x0033;</span></a><a href="#" class="toright"><span class="wsico">&#x0034;</span></a></div>').appendTo(cont);nav.find(".toright").on("click",function(e){if(e.preventDefault(),!cont.hasClass("inaction")){cont.addClass("inaction");var scrollD=4==_columns?2:3,moveblock=$(".iblock",storage).slice(0,scrollD);moveblock.appendTo(storage);var mask=cont.find(".slidesmask"),newmask=$('<div class="slidesmask" />');mask.before(newmask),$(".iblock:eq(0)",storage).hasClass("emergency")?setmask(newmask,!0):setmask(newmask,!1),scatter(newmask,0),newmask.css({opacity:0,position:"absolute",top:0,left:0,"z-index":10});var iblock=newmask.find(".iblock"),oldiblock=mask.find(".iblock"),oldtxt=$(".section, .info",oldiblock),oldphoto=oldiblock.find(".photo"),newphoto=iblock.find(".photo");newtxt=$(".section, .info",iblock),newphoto.css("margin-left","100%"),newtxt.css("opacity",0),oldtxt.stop().animate({opacity:0},100,function(){newmask.stop().animate({opacity:1},100,A),iblock.each(function(i){var B=$(this),slide=B.find(".slide"),photo=slide.find(".photo"),txt=$(".section, .info",slide),ml=photo.data(B.data("type"))?photo.data(B.data("type")):0;slide.removeClass("opened"),window.setTimeout(function(){photo.stop().animate({"margin-left":ml+"px"},550,A,function(){window.setTimeout(function(){txt.stop().animate({opacity:1},300,A,function(){i==iblock.length-1&&(newmask.css({position:"","z-index":"",left:"",top:""}),i==iblock.length-1&&(cont.removeClass("inaction"),mask.remove()))})},100)}),0==i&&oldphoto.each(function(){var photo=$(this);photo.animate({"margin-left":-photo.width()},550,A,function(){})})},150)})})}}),nav.find(".toleft").on("click",function(e){if(e.preventDefault(),!cont.hasClass("inaction")){cont.addClass("inaction");var scrollD=4==_columns?2:3,moveblock=$(".iblock",storage).slice(-scrollD);moveblock.length>0&&moveblock.prependTo(storage);var mask=cont.find(".slidesmask"),newmask=$('<div class="slidesmask" />');mask.before(newmask),$(".iblock:eq(0)",storage).hasClass("emergency")?setmask(newmask,!0):setmask(newmask,!1),scatter(newmask,0),newmask.css({opacity:.5,position:"absolute",top:0,left:0,"z-index":10});var iblock=newmask.find(".iblock"),oldiblock=mask.find(".iblock"),oldtxt=$(".section, .info",oldiblock),oldphoto=oldiblock.find(".photo"),newphoto=iblock.find(".photo");newtxt=$(".section, .info",iblock),newtxt.css("opacity",0),newphoto.each(function(){var photo=$(this);photo.css("margin-left",-photo.width())}),oldtxt.stop().animate({opacity:0},100,function(){newmask.stop().animate({opacity:1},100,A),iblock.each(function(i){var B=$(this),slide=B.find(".slide"),photo=slide.find(".photo"),txt=$(".section, .info",slide),ml=photo.data(B.data("type"))?photo.data(B.data("type")):0;slide.removeClass("opened"),window.setTimeout(function(){photo.stop().animate({"margin-left":ml+"px"},550,A,function(){window.setTimeout(function(){txt.stop().animate({opacity:1},300,A,function(){i==iblock.length-1&&newmask.css({position:"","z-index":"",left:"",top:""}),i==iblock.length-1&&(cont.removeClass("inaction"),mask.remove())})},150)}),0==i&&oldphoto.stop().animate({"margin-left":"100%"},550,A,function(){})},150)})})}})}else{var mask=cont.find(".slidesmask"),blocks=cont.children(".iblock"),storage=cont.find(".slidestorage");$(".iblock:first",storage).hasClass("emergency")?setmask(mask,!0):setmask(mask,!1),scatter(mask,0)}}var cont=$(this),A="easeInOutQuad";"reinit"==options?reinit():init(),$("body").bind("changecolumns",function(){reinit()})})}}(jQuery),function($){$.fn.onaircarousel=function(options){this.each(function(){function init(){prepare("init")}function reinit(){prepare("reinit")}function prepare(evtype){var x=new Date,timezone=x.getTimezoneOffset()/60;$.ajax({url:cont.data("url"),type:"get",data:{timezone:timezone},cache:!1}).done(function(html){return $(html).appendTo(cont),cont.find(".iblock").cleanWS(),cont.find(".carousel").notacarousel({slider:!0}),$("#fulldayswitcher a").on("click",function(e){e.preventDefault();var id=$(this).attr("href"),ind=Math.floor(($(id).index()+_columns)/_columns);$(".carouselnav .slide:eq("+(ind-1>0?ind-1:0)+")",cont).trigger("click")}),!1})}var cont=$(this);"reinit"==options?reinit():init()})}}(jQuery),function($){$.fn.initLive=function(){this.each(function(){var livewnd,live=$(this),play=live.find(".playerbutton");play.on("click.firstclick",function(e){e.preventDefault();var a=$(this);livewnd=window.open(a.attr("href"),"echoliveplayer","location=no,locationbar=no,chrome=yes,titlebar=yes,menubar=no,toolbar=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,status=no,width=800,height=820"),livewnd.focus()})})}}(jQuery),function($){$.fn.footOpen=function(){this.each(function(){var a=$(this),texts=["\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c","\u0441\u043a\u0440\u044b\u0442\u044c"],cont=$(".info_partner_block");cont.hide(),a.on("click",function(e){return e.preventDefault(),a.hasClass("show")?(a.find("span:last-child").text(texts[0]),a.removeClass("show"),a.closest(".footer").height(400).prev().css({"padding-bottom":"450px"}),cont.slideUp()):(a.find("span:last-child").text(texts[1]),a.addClass("show"),a.closest(".footer").height(750).prev().css({"padding-bottom":"800px"}),cont.slideDown()),popularblFunc(),!1})})}}(jQuery),function($){$.fn.showSearch=function(){this.each(function(){function hideSearch(){cont.removeClass("show")}function showSearch(){cont.addClass("show"),cont.find("#searchq").focus(),window.clearTimeout(TO),cont.one("mouseleave.opened",function(){TC=window.setTimeout(function(){hideSearch()},3e3)})}var TO,TC,a=$(this),cont=$(this).parent().find("form");cont.find("#searchq").on("focus",function(){cont.off("mouseleave.opened"),window.clearTimeout(TC)}).on("blur",function(){var inp=$(this);TC=window.setTimeout(function(){""==$.trim(inp.val())&&hideSearch()},3e3)}),a.on("mouseenter",function(e){e.preventDefault(),window.clearTimeout(TO),TO=window.setTimeout(function(){showSearch()},500)}).on("mouseleave",function(){window.clearTimeout(TO)}).on("click",function(e){e.preventDefault(),window.clearTimeout(TO),showSearch()}),cont.find(".icmenu").on("click",function(e){return e.preventDefault(),hideSearch(),!1})})}}(jQuery),function($){$.fn.logoutForm=function(){this.each(function(){var that=$(this),a=$(".open_logout"),cont=$(".logout-cont");that.on("click",function(){cont.toggleClass("show"),a.toggleClass("show")})})}}(jQuery),function($){passwordSwitcher(),$.fn.authForm=function(){this.each(function(){var a=$(this),cont=$(".auth_popup");a.on("click",function(e){e.preventDefault(),cont.addClass("show"),a.addClass("show");var reg=cont.find(".reg");return reg.hasClass("open")?cont.find(".formsholder").css("min-width",""):cont.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em"),!1}),cont.find(".close").on("click",function(e){return e.preventDefault(),cont.removeClass("show"),a.removeClass("show"),!1}),cont.find(".open_form").bind("click",function(e){e.preventDefault(),cont.find(".form").removeClass("open"),cont.find("form"+$(this).attr("href")).addClass("open");var par=$(this).parent();return par.hasClass("reg")&&(par.removeClass("open"),cont.find(".auth").addClass("open"),cont.find(".socialblock").removeClass("open"),cont.find(".formsholder").css("min-width",BODY.hasClass("widescreen")?"47.85em":"46.65em")),par.hasClass("auth")&&(par.removeClass("open"),cont.find(".reg").addClass("open"),cont.find(".socialblock").addClass("open"),cont.find(".formsholder").css("min-width","")),!1}),cont.find(".form").submit(function(e){var form=$(this);return form.formValidator(),form.data("valid")?!0:(e.preventDefault(),!1)})})}}(jQuery),function($){$.fn.sharePopup=function(){this.each(function(){function appendShareBlock(a){if(!a.hasClass("show")){var clone=block.clone(!0),par=a.parent();par.append(clone),clone.show().addClass("shareClone"),a.addClass("show"),clone.find("a").attr("href",a.data("url")),clone.find("a").attr("title",a.data("title")),DOC.on("mouseover.share",function(e){var targ=$(e.target);!targ.hasClass("meta")&&!targ.hasClass("shareClone")&&targ.parents(".shareClone").length+targ.parents(".share").length<1&&removeAllOtherShare()})}}function removeAllOtherShare(){$(".shareClone").each(function(){var sClone=$(this);sClone.siblings(".share").removeClass("show"),sClone.remove()}),DOC.off("mouseover.share")}var t,block=$(this);if(!block.hasClass("ready")){var tt="http://twitter.com/home?status=%title% %url%",fb="http://www.facebook.com/share.php?u=%url%&t=%title%",mail="http://connect.mail.ru/share?url=%url%&title=%title&description=%description%",vk="https://vk.com/share.php?url=%url%&title=%title%",lj="http://www.livejournal.com/update.bml?subject=%title%&event=%description%<br><a>%url%</a>";block.find(".twitter").on("click",function(e){e.preventDefault(),window.open(encodeURI(tt.replace(/\%url\%/,$(this).attr("href")).replace(/%title%/,""+$(this).attr("title"))))}),block.find(".facebook").on("click",function(e){e.preventDefault(),window.open(encodeURI(fb.replace(/\%url\%/,$(this).attr("href")).replace(/%title%/,""+$(this).attr("title"))))}),block.find(".mailru").on("click",function(e){e.preventDefault(),window.open(encodeURI(mail.replace(/\%url\%/,$(this).attr("href")).replace(/%title%/,""+$(this).attr("title"))))}),block.find(".vk").on("click",function(e){e.preventDefault(),window.open(encodeURI(vk.replace(/\%url\%/,$(this).attr("href")).replace(/%title%/,""+$(this).attr("title"))))}),block.find(".lj").on("click",function(e){e.preventDefault(),window.open(encodeURI(lj.replace(/\%url\%/,$(this).attr("href")).replace(/%title%/,""+$(this).attr("title"))))}),block.addClass("ready")}DOC.off(".share").on("mouseenter.share click.share",".share",function(e){e.preventDefault();var a=$(this);a.siblings(".shareClone").length>0||(window.clearTimeout(t),removeAllOtherShare(),"click"!=e.type?t=window.setTimeout(function(){appendShareBlock(a)},1e3):appendShareBlock(a))}).on("mouseleave",".share",function(){window.clearTimeout(t)})})}}(jQuery),function($){$.fn.comFunc=function(){this.each(function(){{var cont=$(this),obj=($(".answform",cont),$(".commBlock",cont));$(".answ",obj)}obj.filter(".commBlock").first().find("form").each(function(){var but=$(this).find(".add-btn"),txtarea=$(this).find("textarea");txtarea.val().length<5&&but.hide(),txtarea.focus(function(){txtarea.height("12.5em"),txtarea.bind("keyup",function(){txtarea.val().length>=5?but.slideDown(300):but.slideUp(300)})}).focusout(function(){txtarea.val().length<5&&(but.slideUp(300),txtarea.height("3.5em"))})}),cont.find(".c_select").selectReplace()})}}(jQuery),function($){$.fn.mmtabs=function(){this.each(function(){var cont=$(this),nav=cont.children(".mediamenu"),mm=cont.children(".mmcontainer"),T=700,A="easeOutCubic",action=!1;$("a.clicked",nav).click(function(e){e.preventDefault();var a=$(this);if(!a.hasClass(".current")&&!action){action=!0,$(".nota_jplayer").jPlayer("pause");var id=a.attr("href"),oldcurr=mm.find(".current");oldcurr.find(".mmplayer").stop().slideUp(T,A,function(){oldcurr.removeClass("current")}),$(id).addClass("current").find(".mmplayer").stop().slideDown(T,A,function(){action=!1}),nav.find(".current").removeClass("current"),a.addClass("current")}});var hash=window.location.hash;hash&&hash.length>0&&($("a[href="+hash+"]",nav).trigger("click"),$(window).scrollTo(".multimedia"))})}}(jQuery),function($){$.fn.mediacarousel=function(options){this.each(function(){var o,defaults={T:600,A:"easeOutQuad",A_:"easeInQuad",pic:"img",title:"b",author:"i",prefix:"img",navvis:5};o="string"!=typeof options?$.extend(defaults,options):defaults;var cont=$(this),imgs=$("img",cont),k=0;cont.css("opacity",0),cont.wrap('<div class="'+o.prefix+'carouselwnd"><div class="'+o.prefix+'carouselwrp"><div class="'+o.prefix+'carouselfrm"></div></div></div>');var wnd=cont.parents("."+o.prefix+"carouselwnd"),wrp=wnd.find("."+o.prefix+"carouselwrp"),navcont=$('<div class="'+o.prefix+'carouselnav" />').appendTo(wnd),navlist=cont.clone(),loader=$('<div class="loader" />').appendTo(wnd);cont.bind("loaded",function(){function showCarousel(){loader.remove(),navlist.css("opacity",1),cont.css("opacity",1),$("li",navlist).each(function(i){var li=$(this);
window.setTimeout(function(){$("img",li).animate({top:0},o.T/2,o.A,function(){$(this).removeClass("loading"),0==li.index()&&navLI.eq(0).trigger("click")})},200+150*i)})}var sign=$('<div class="'+o.prefix+'sign"></div>').appendTo(wrp),title=$('<div class="'+o.prefix+'title"></div>').appendTo(sign),author=$('<div class="'+o.prefix+'author"></div>').appendTo(sign);navlist.appendTo(navcont);var navLI=$("li",navlist);if($("img",navLI).addClass("loading"),navLI.each(function(i){var li=$(this);li.wrapInner('<span class="'+o.prefix+'previewframe" />'),li.data("LI",$("li:eq("+i+")",cont)),li.bind("click",function(e){return e.preventDefault(),"run"==cont.data("action")?!1:(cont.data("action","run"),sign.animate({opacity:0},o.T/2,o.A,function(){title.text(li.find(o.title).text()),author.text(li.find(o.author).text()),sign.animate({opacity:1},o.T/2,o.A_,function(){cont.data("action","stop")})}),cont.add(navcont).find(".current").removeClass("current"),li.addClass("current"),void li.data("LI").addClass("current"))})}),navlist.children().length>o.navvis){navlist.addClass("full"),navLI.last().prependTo(navlist),showCarousel();var prev=$('<span class="'+o.prefix+'prev" />').appendTo(navcont),next=$('<span class="'+o.prefix+'next" />').appendTo(navcont);prev.bind("click",function(e){if(e.preventDefault(),"run"==cont.data("action"))return!1;cont.data("action","run");var navLI=$("li",navlist),mslice=o.navvis>1?navLI.slice(navLI.length-o.navvis,navLI.length-1):navLI.last(),mclone=mslice.clone(!0),h=0,pos=navlist.position();mslice.each(function(){h+=$(this).outerHeight(!0)}),mslice.prependTo(navlist),mclone.appendTo(navlist),navlist.css("top",pos.top-h).animate({top:pos.top},1.5*o.T,o.A,function(){mclone.remove(),navlist.css("top",""),cont.data("action","stop")})}),next.bind("click",function(e){if(e.preventDefault(),"run"==cont.data("action"))return!1;cont.data("action","run");var navLI=$("li",navlist),mslice=o.navvis>1?navLI.slice(0,o.navvis-1):navLI.first(),mclone=mslice.clone(!0),h=0,pos=navlist.position();mslice.each(function(){h+=$(this).outerHeight(!0)}),mslice.appendTo(navlist),mclone.prependTo(navlist),navlist.animate({top:pos.top-h},1.5*o.T,o.A,function(){mclone.remove(),navlist.css("top",""),cont.data("action","stop")})})}else showCarousel();wrp.on("DOMMouseScroll mousewheel",function(e){e.preventDefault();var curr=navlist.find(".current");e.originalEvent.detail>0?(next=curr.next(),next.length||(next=$("li:first",navlist))):(next=curr.prev(),next.length||(next=$("li:last",navlist))),next.length>0&&next.trigger("click")}),navcont.on("DOMMouseScroll mousewheel",function(e){e.preventDefault(),next=navcont.find(e.originalEvent.detail<0?"."+o.prefix+"prev":"."+o.prefix+"next"),next.length>0&&next.trigger("click")})}),cont.bind("checkload",function(){k++,k==imgs.length&&(cont.unbind("checkload"),cont.trigger("loaded"))}),imgs.each(function(){var img=$(this),fleximg=new Image;fleximg.src=img.attr("src"),$(fleximg).bind("load",function(){img.data("loaded")||(img.data("w",img.width()).data("h",img.height()).data("loaded",!0),cont.trigger("checkload"))});try{fleximg.complete&&!img.data("loaded")&&$(fleximg).trigger("load")}catch(e){}})})}}(jQuery),function($){$.fn.letterlist=function(options){var defaults={inp:!1,spn:!1},o=$.extend(defaults,options);this.each(function(){function filter(val){val=val.toLowerCase();for(var i=0;i<cache.length;i++){cache[i].li.data("hide",0);for(var k=0;k<cache[i].words.length;k++){var w=cache[i].words[k];w.span.data("title").indexOf(val)>-1?w.hide&&(w.span.removeClass("hidden"),w.hide=!1):(cache[i].li.data("hide",1*cache[i].li.data("hide")+1),w.hide=!0)}cache[i].li.data("hide")==cache[i].words.length?(cache[i].li.addClass("hidden"),cache[i].li.next().addClass("hidden")):(cache[i].li.removeClass("hidden"),cache[i].li.next().removeClass("hidden"))}0==ll.children('div:not(".hidden")').length?(ll.hide(),$(".noresult").show()):(ll.show(),$(".noresult").hide())}if(!o.inp)return!1;if(o.inp=$(o.inp),!o.spn)return!1;var ll=$(this),cache=[];ll.find("> div").each(function(){var li=$(this),words=[];$(this).find(o.spn).each(function(){var span=$(this),a=span.children("a"),t=a.length>0?t=a.text():span.text();span.data("title",t.toLowerCase()),words.push({span:span,hide:!1})}),li.data("hide",0),cache.push({li:li,words:words})}),filter(o.inp.val()),o.inp.bind("keyup",function(){filter($(this).val()),setSlider($("#personList"))}),o.inp.bind("keypress",function(e){return 13==e.keyCode?(o.inp.focus(),filter($(this).val()),setSlider($("#personList")),!1):void 0})})}}(jQuery),function($){$.fn.calendar=function(options){return this.each(function(){function initDatepicker(){cont.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,maxDate:cont.data("maxdate")||"+0d",beforeShow:function(){cont.offset();setTimeout(function(){init()},100)},onChangeMonthYear:function(){setTimeout(function(){init()},100)}}),DP=$("#ui-datepicker-div")}function init(){appendCustom(),updateMonth(),updateYear(),customHandlers()}function appendCustom(){$(".b-calendar_month").length<1&&($(".ui-datepicker-header").append(customMarkup),month=$(".b-calendar_month",cont),monthNext=$(".b-calendar_month-next",cont),monthPrev=$(".b-calendar_month-prev",cont),monthName=$(".b-calendar_month-name"),year=$(".b-calendar_year"),yearNext=$(".b-calendar_year-next",cont),yearPrev=$(".b-calendar_year-prev",cont),yearName=$(".b-calendar_year-name"))}function updateMonth(){monthString=$(".ui-datepicker-month :selected",DP).text(),monthName.text(monthString)}function updateYear(){yearString=$(".ui-datepicker-year :selected",DP).text(),yearName.text(yearString)}function customHandlers(){{var month=$(".b-calendar_month"),monthNext=$(".b-calendar_month-next"),monthPrev=$(".b-calendar_month-prev"),yearNext=($(".b-calendar_month-name"),$(".b-calendar_year"),$(".b-calendar_year-next")),yearPrev=$(".b-calendar_year-prev");$(".b-calendar_year-name")}monthNext.off("click.calendar").on("click.calendar",cont,function(){var month=$(".ui-datepicker-month",DP),val=1*month.val();month.get(0).selectedIndex=val<$("option",month).length-1?val+1:0,month.trigger("change"),init()}),monthPrev.off("click.calendar").on("click.calendar",cont,function(){var month=$(".ui-datepicker-month",DP),val=1*month.val();month.get(0).selectedIndex=val>0?val-1:$("option",month).length-1,month.trigger("change"),init()}),yearNext.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year option:selected",DP).next().length<1)return!1;var m=$(".ui-datepicker-year option:selected",DP).next().attr("value");$(".ui-datepicker-year",DP).val(m).change(),month.trigger("change"),init()}),yearPrev.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year option:selected",DP).prev().length<1)return!1;var m=$(".ui-datepicker-year option:selected",DP).prev().attr("value");$(".ui-datepicker-year",DP).val(m).change(),month.trigger("change"),init()})}var year,yearPrev,yearNext,yearName,yearString,DP,month,monthPrev,monthNext,monthName,monthString,cont=$(this),customMarkup=($.extend({},$.fn.calendar.defaults,options),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');initDatepicker(),init()})},$.fn.calendar.defaults={}}(jQuery),function($){$.fn.descrOpen=function(){this.each(function(){var cont=$(this),a=cont.find(".hide"),descr=a.closest(cont).find(".liveprogrammes");a.click(function(e){return e.preventDefault(),$(this).hasClass("show")?(descr.slideDown(600),$(this).removeClass("show")):(descr.slideUp(600),$(this).addClass("show")),!1})})}}(jQuery),function($){$.fn.votescharts=function(){this.each(function(){var cont=$(this);cont.find(".fill").each(function(i){var f=$(this);window.setTimeout(function(){f.width(f.data("size"))},200+2*i)})})}}(jQuery),function($){$.fn.piechart=function(){this.each(function(){var cont=$(this),legend=cont.siblings(".legend"),half=cont.hasClass("halfpie")?!0:!1,dataArray=[];$("li",legend).each(function(i){dataArray.push([""+(i+1),$(this).data("percent")])}),cont.highcharts({colors:["#ea171e","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a","#1d191a"],chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},credits:{enabled:!1},title:{text:""},tooltip:{enabled:!1,pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-70,style:{fontWeight:"bold",color:"white",fontSize:"18px",fontWeight:"bold",fontFamily:'"ProximaNova-Bold", sans-serif',textShadow:"0px 1px 2px black"}},size:half?"175%":"100%",endAngle:half?180:360,center:[half?0:"50%","50%"]}},series:[{type:"pie",data:dataArray}]})})}}(jQuery),function($){$.fn.calendarmonth=function(options){return this.each(function(){function initDatepicker(){cont.datepicker({dateFormat:"mm.yy",showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){cont.offset();setTimeout(function(){init()},100)},onChangeMonthYear:function(){setTimeout(function(){init()},100)}}),DPm=$("#ui-datepicker-div")}function init(){appendCustom(),updateMonth(),updateYear(),customHandlers()}function appendCustom(){if(0===$(".b-calendar_month").length){$(".ui-datepicker-header").append(customMarkup),$(".ui-datepicker").append(customMonth);var monthName="";$(".ui-datepicker-month option").each(function(){monthName+='<div class="b-calendar_month-name" data-event="click" data-handler="selectMonth"><a href="#" class="ui-state-default">'+$(this).text()+"</a></div>"}),$("<div>"+monthName+"</div>").appendTo(".b-calendar_month"),$(".ui-datepicker-calendar").hide(),$(".ui-datepicker").css({"z-index":"11"}),$(".ui-datepicker").addClass("calendarmonth-datepicker"),year=$(".b-calendar_year"),yearNext=$(".b-calendar_year-next",cont),yearPrev=$(".b-calendar_year-prev",cont),yearName=$(".b-calendar_year-name",DPm)}}function updateMonth(){$(".b-calendar_month-name:eq("+$(".ui-datepicker-month :selected",DPm).index()+")",DPm).find("a").addClass("ui-state-highlight")}function updateYear(){yearString=$(".ui-datepicker-year :selected",DPm).text(),$(".b-calendar_year-name",DPm).text(yearString)}function customHandlers(){{var month=$(".b-calendar_month"),monthName=$(".b-calendar_month-name"),yearNext=($(".b-calendar_year"),$(".b-calendar_year-next")),yearPrev=$(".b-calendar_year-prev");$(".b-calendar_year-name",DPm)}monthName.off("click.calendar").on("click.calendar",cont,function(){var ind=($(".ui-datepicker-month",DPm),$(this).index());$(".b-calendar_month-name a",DPm).removeClass("active"),$(this).find("a").addClass("active");var m=$(".ui-datepicker-month option:eq("+ind+")",DPm).attr("value");$(".ui-datepicker-month",DPm).val(m).change(),$('.ui-datepicker-calendar td[data-month="'+m+'"]:eq(0)',DPm).click(),init()}),yearNext.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year option:selected",DPm).next().length<1)return!1;var m=$(".ui-datepicker-year option:selected",DPm).next().attr("value");$(".ui-datepicker-year",DPm).val(m).change(),month.trigger("change"),init()}),yearPrev.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year option:selected",DPm).prev().length<1)return!1;var m=$(".ui-datepicker-year option:selected",DPm).prev().attr("value");$(".ui-datepicker-year",DPm).val(m).change(),month.trigger("change"),init()})}var year,yearPrev,yearNext,yearName,yearString,DPm,cont=$(this),customMarkup=($.extend({},$.fn.calendarmonth.defaults,options),'<div class="b-calendar_year changeyear"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>'),customMonth='<div class="b-calendar_month changemonth"></div>';return initDatepicker(),init(),!1})},$.fn.calendarmonth.defaults={}}(jQuery),function($){$.fn.calendaryear=function(options){return this.each(function(){function initDatepicker(){cont.datepicker({dateFormat:"yy",changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){cont.offset();setTimeout(function(){init()},100)},onChangeMonthYear:function(){setTimeout(function(){init()},100)}}),DPy=$("#ui-datepicker-div")}function init(){appendCustom(),updateYear(),customHandlers()}function appendCustom(){if(0===$(".b-calendar_year").length){$(".ui-datepicker").append(customMarkup),$(".ui-datepicker-header").hide(),$(".ui-datepicker-calendar").hide(),year=$(".b-calendar_year",cont),yearName=$(".b-calendar_year-name",cont);var yearName2="";$(".ui-datepicker-year option").each(function(){yearName2+='<div class="b-calendar_year-name" data-event="click" data-handler="selectYear"><a href="#" class="ui-state-default">'+$(this).text()+"</a></div>"}),$("<div>"+yearName2+"</div>").insertBefore(".b-calendar_year-name"),$(".b-calendar_year div").find(".b-calendar_year-name:eq(14)").nextAll().remove();var cl=$(".b-calendar_year > .b-calendar_year-name").clone();cl.appendTo(".b-calendar_year > div"),$(".b-calendar_year > .b-calendar_year-name").remove(),$(".ui-datepicker").css({"z-index":"11"}),$(".ui-datepicker").addClass("calendaryear-datepicker")}}function updateYear(){yearString=$(".ui-datepicker-year :selected",DPy).index(),$(".b-calendar_year-name").eq(yearString).find("a").addClass("ui-state-highlight")}function customHandlers(){var month=($(".b-calendar_year"),$(".b-calendar_year-name"),$(".ui-datepicker-month"));DOC.off("click.calendar").on("click.calendar",".b-calendar_year-name",function(){$(".b-calendar_year-name a").removeClass("active"),$(this).find("a").addClass("active");var ind=$(this).index(),m=$(".ui-datepicker-year option:eq("+ind+")",DPy).attr("value");$(".ui-datepicker-year",DPy).val(m).change(),cont.val(m).change(),cont.datepicker("hide"),month.trigger("change"),init()})}var year,yearName,yearString,yearName,DPy,cont=$(this),customMarkup=($.extend({},$.fn.calendaryear.defaults,options),'<div class="b-calendar_year year_calendar"><div class="b-calendar_year-name"><a href="#" class="ui-state-default">. . .</a></div></div>');initDatepicker(),init()})},$.fn.calendaryear.defaults={}}(jQuery),function($){$.fn.calendarweek=function(options){return this.each(function(){function initDatepicker(){cont.datepicker({showOtherMonths:!0,changeMonth:!0,changeYear:!0,firstDay:new Date,maxDate:new Date,beforeShow:function(){cont.offset();setTimeout(function(){init()},100)},onChangeMonthYear:function(){setTimeout(function(){init()},100)}}),DPw=$("#ui-datepicker-div")}function init(){appendCustom(),updateMonth(),updateYear(),customHandlers()}function appendCustom(){0===$(".b-calendar_month").length&&($(".ui-datepicker-header").append(customMarkup),month=$(".b-calendar_month",cont),monthNext=$(".b-calendar_month-next",cont),monthPrev=$(".b-calendar_month-prev",cont),monthName=$(".b-calendar_month-name"),year=$(".b-calendar_year"),yearNext=$(".b-calendar_year-next",cont),yearPrev=$(".b-calendar_year-prev",cont),yearName=$(".b-calendar_year-name"),$(".ui-datepicker-calendar").hide(),$.ajax({url:cont.data("ajax"),method:"GET",success:function(html){$(html).insertAfter($(".ui-datepicker-calendar")).fadeIn("slow")}}),weekName=$(".b-calendar_week-name"),$(".ui-datepicker").css({"z-index":"11"}),$(".ui-datepicker").addClass("calendarweek-datepicker"))}function updateMonth(){monthString=$(".ui-datepicker-month :selected",DPw).text();var monthStringPrev=$(".ui-datepicker-month :selected",DPw).prev().text();monthName.text(monthStringPrev.length>0?monthStringPrev+" - "+monthString:monthString)}function updateYear(){yearString=$(".ui-datepicker-year :selected",DPw).text(),yearName.text(yearString)}function customHandlers(){{var month=$(".b-calendar_month"),monthNext=$(".b-calendar_month-next"),monthPrev=$(".b-calendar_month-prev"),yearNext=($(".b-calendar_month-name"),$(".b-calendar_year"),$(".b-calendar_year-next")),yearPrev=$(".b-calendar_year-prev");$(".b-calendar_year-name"),$(".b-calendar_week-name")}monthNext.off("click.calendar").on("click.calendar",cont,function(){var month=$(".ui-datepicker-month",DPw),val=1*month.val();month.get(0).selectedIndex=val<$("option",month).length-1?val+1:0,month.trigger("change"),init()}),DOC.off("click.calendar").on("click.calendar",".b-calendar_week-name",function(){$(".b-calendar_week-name a").removeClass("active"),$(this).find("a").addClass("active");var yearv=$(".ui-datepicker-year :selected",DPw).val(),weekv=$(this).text();cont.val(""+yearv+". "+weekv),cont.trigger("change"),cont.datepicker("hide"),init()}),monthPrev.off("click.calendar").on("click.calendar",cont,function(){var month=$(".ui-datepicker-month",DPw),val=1*month.val();month.get(0).selectedIndex=val>0?val-1:$("option",month).length-1,month.trigger("change"),init()}),yearNext.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year :selected",DPw).next().length<1)return!1;var m=$(".ui-datepicker-year :selected",DPw).next().attr("value");$(".ui-datepicker-year",DPw).val(m).change(),month.trigger("change"),init()}),yearPrev.off("click.calendar").on("click.calendar",cont,function(){if($(".ui-datepicker-year :selected",DPw).prev().length<1)return!1;var m=$(".ui-datepicker-year :selected",DPw).prev().attr("value");$(".ui-datepicker-year",DPw).val(m).change(),month.trigger("change"),init()})}var year,yearPrev,yearNext,yearName,yearString,DPw,month,monthPrev,monthNext,monthName,monthString,weekName,cont=$(this),customMarkup=($.extend({},$.fn.calendarweek.defaults,options),'<div class="b-calendar_month"><div class="b-calendar_month-prev"></div><div class="b-calendar_month-name"></div><div class="b-calendar_month-next"></div></div><div class="b-calendar_year"><div class="b-calendar_year-prev"></div><div class="b-calendar_year-name"></div><div class="b-calendar_year-next"></div></div>');initDatepicker(),init()})},$.fn.calendarweek.defaults={}}(jQuery),function($){$.fn.uipopup=function(){this.each(function(){$(this).on("click",function(e){e.preventDefault();var lnk=$(this),popup=$(".uipopupcontainer");popup.length<1&&(popup=$('<div class="uipopupcontainer hidden"></div>').appendTo("body")),popup.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:lnk.data("title"),open:function(){$.ajax({url:lnk.attr("href"),method:"GET",success:function(html){popup.html(html)}}),popup.removeClass("hidden"),window.setTimeout(function(){popup.dialog("option","position",{my:"center",at:"center",of:window})},250)},close:function(){popup.dialog("destroy").remove()}})})})}}(jQuery),function($){$.fn.popupList=function(){this.each(function(){var lnk=$(this);$("body").append('<div class="popupList hidden"></div>');var popup=$(".popupList"),form='<form class="searchform form" action="." method="get"><fieldset><input type="search" value="" id="psearch" name="q" placeholder="\u043f\u043e\u0438\u0441\u043a \u043f\u0435\u0440\u0441\u043e\u043d\u044b \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438 (\u0438\u043b\u0438) \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"><button value="1" disabled="disabled" type="submit"><span class="wsico lite">&#x21;</span></button></fieldset></form>';return popup.append(form),$.ajax({url:lnk.attr("href"),method:"GET",success:function(html){popup.append($(html)),$("#personList").letterlist({inp:"#psearch",spn:".about .name, .about .post "}),setSlider($("#personList"))}}),popup.dialog({heigth:595,width:700,modal:!0,draggable:!1,resizable:!1,dialogClass:"popup2",title:lnk.data("title"),open:function(){popup.removeClass("hidden"),popup.dialog("option","position",{my:"center",at:"center",of:window})},close:function(){popup.dialog().remove()}}),!1})}}(jQuery),function($){$.fn.faq=function(){this.each(function(){var cont=$(this);cont.find(".qa_q a").on("click",function(e){e.preventDefault(),$(this).parents(".qa_question:eq(0)").toggleClass("qa_open")}),cont.find(".all").on("click",function(e){e.preventDefault(),cont.find(".qa_question").addClass("qa_open")})})}}(jQuery),function(){var $likeBtns=$(".js-like-button");$likeBtns.each(function(i,likeBtn){var $likeBtn=$(likeBtn),$count=$(".js-like-button-count",$likeBtn),state=$likeBtn.data("active"),src=$likeBtn.data("src");state&&$likeBtn.addClass("_active"),$likeBtn.on("click",function(e){e.preventDefault(),$.getJSON(src,function(data){data.activated?$likeBtn.addClass("_active"):$likeBtn.removeClass("_active"),$count.text(data.count)})})})}(),function(){var $recomBtns=$(".js-recom-button");$recomBtns.each(function(i,recomBtn){var $recomBtn=$(recomBtn),$text=$(".js-recom-button-text",$recomBtn),state=$recomBtn.data("active"),src=$recomBtn.data("src"),textActive=$recomBtn.data("recom-active-text"),textUnactive=$recomBtn.data("recom-unactive-text");state?($recomBtn.addClass("_active"),$text.text(textActive)):$text.text(textUnactive),$recomBtn.on("click",function(e){e.preventDefault(),$.getJSON(src,function(data){data.activated?($recomBtn.addClass("_active"),$text.text(textUnactive)):($recomBtn.removeClass("_active"),$text.text(textActive))})})})}(),function($){$.fn.echotop=function(){this.each(function(){function recenter(){f.removeClass("fullwidth"),WND.width()>chld.width()&&f.addClass("fullwidth"),f.css("margin-left",-chld.width()/2)}var cont=$(this),f=cont.children(".f"),chld=f.children();recenter(),WND.on("load resize",function(){recenter()}),cont.find("img").each(function(){$(this).on("load",recenter)})})}}(jQuery),function($){$.fn.echoleftright=function(){this.each(function(){function recenter(){f.removeClass("fullwidth"),f.width()>chld.width()&&f.addClass("fullwidth"),chld.css("margin-left",-chld.width()/2)}var cont=$(this),f=cont.children(".f"),chld=f.children();recenter(),WND.on("load resize",function(){recenter()}),cont.find("img").each(function(){$(this).on("load",recenter)})})}}(jQuery),function($){$.fn.submenuOpen=function(){this.each(function(){var cont=$(this),a=cont.find(".menusection > a");touchdevice&&a.each(function(){var lock=!1;$(this).click(function(e){return lock?void 0:(e.preventDefault(),$(this).css({background:"#000"}),$(this).parent().find(".submenu").css({height:"auto",overflow:"visible",padding:"7px 8px 16px 5px",opacity:1}),lock=!0,!1)})})})}}(jQuery),$(function(){$(".settings").settingsform(),$(".removeentry").removeentry()}),function($){$.fn.settingsform=function(){this.each(function(){var form=$(this);$(".fieldspopup").each(function(){var cont=$(this),opener=$('a[href="#'+cont.attr("id")+'"]');cont.css("display","none"),opener.on("click",function(e){e.preventDefault(),cont.find(".success").remove(),cont.slideDown(200,function(){$(":input",cont).prop("disabled",!1),$(document).off(".fieldspopup").on("click.fieldspopup",function(e){$(e.target).parents("#"+cont.attr("id")).length<1&&(cont.css("display","none"),cont.find(".success").remove(),$(":input",cont).prop("disabled",!0),$(document).off(".fieldspopup"))})})}),cont.hasClass("changepassword")&&(cont.find(".error").css("display","none"),cont.find(".button").on("click",function(e){e.preventDefault(),cont.find(".error").css("display","none"),cont.find(".success").remove();var inp=cont.find(".inpresetpassword"),val=inp.val();val.length<1?cont.find(".required").css("display","block"):val.length<6?cont.find(".validate").css("display","block"):(cont.find(".error").css("display","none"),$.ajax({url:cont.data("path"),data:$(":input",cont).serialize(),method:"POST",success:function(html){var success=$(html);inp.after(success)}}))})),cont.hasClass("changeemail")&&(cont.find(".error").css("display","none"),cont.find(".button").on("click",function(e){e.preventDefault(),cont.find(".error").css("display","none"),cont.find(".success").remove();var inp=cont.find(".inpresetemail"),val=inp.val();val.length<1?cont.find(".required").css("display","block"):/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(val)?(cont.find(".error").css("display","none"),$.ajax({url:cont.data("path"),data:$(":input",cont).serialize(),method:"POST",success:function(html){var success=$(html);inp.after(success)}})):cont.find(".validate").css("display","block")}))}),form.on("submit",function(){var form=$(this);return form.formValidator(),form.data("valid")?!0:($.scrollTo(form),!1)})})}}(jQuery),function($){$.fn.removeentry=function(){this.each(function(){var cont=$(this),a=cont.children("a"),confirm=cont.children(".confirm"),bcancel=cont.find(".cancel"),bok=cont.find(".ok"),entry=cont.parents(".entry:eq(0)");a.on("click",function(e){e.preventDefault(),confirm.slideDown(200,function(){$(document).off(".confirm").on("click.confirm",function(e){$(e.target).parents(".confirm").length<1&&(confirm.css("display","none"),$(document).off(".confirm"))})})}),bcancel.on("click",function(e){e.preventDefault(),confirm.css("display","none"),$(document).off(".confirm")}),bok.on("click",function(e){e.preventDefault(),$.ajax({url:$(this).attr("href"),method:"GET",success:function(){entry.addClass("remove").animate({opacity:0},400,function(){entry.remove()})}}),confirm.css("display","none"),$(document).off(".confirm")})})}}(jQuery),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.firebase=e()}(this,function(){"use strict";function e(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(t,this)}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void i(e.promise,t)}o(e.promise,n)}else(1===t._state?o:i)(e.promise,t._value)})):t._deferreds.push(e)}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void a((o=n,u=e,function(){o.apply(u,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){i(t,e)}var o,u}function i(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;o>e;e++)n(t,t._deferreds[e]);t._deferreds=null}function a(t,e){var r=!1;try{t(function(t){r||(r=!0,o(e,t))},function(t){r||(r=!0,i(e,t))})}catch(t){if(r)return;r=!0,i(e,t)}}function c(t,e){return t(e={exports:{}},e.exports),e.exports}function Ye(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=Ye(t[r],e[r]));return t}function Xe(t,e,r){t[e]=r}function rr(t,e){var r=new nr(t,e);return r.subscribe.bind(r)}function or(){}function cr(t,e){throw fr.create(t,e)}!function(t){function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function f(t){this.map={},t instanceof f?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function p(t){var e=new FileReader,r=l(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,r,n=h(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=l(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var r,n,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),i.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};f.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];this.map[t]=r?r+","+e:e},f.prototype.delete=function(t){delete this.map[a(t)]},f.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},f.prototype.set=function(t,e){this.map[a(t)]=u(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),c(t)},f.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},f.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),c(t)},e.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];
v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];m.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=v,t.Response=m,t.fetch=function(t,r){return new Promise(function(n,o){var i=new v(t,r),s=new XMLHttpRequest;s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new m(o,r))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var t=setTimeout;r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,r){var o=new this.constructor(e);return n(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,r,o)),o},r.prototype.finally=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})},r.all=function(t){return new r(function(e,r){function i(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(t,e)},r)}n[t]=s,0==--o&&e(n)}catch(t){r(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;s<n.length;s++)i(s,n[s])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,r){r(t)})},r.race=function(t){return new r(function(e,r){for(var n=0,o=t.length;o>n;n++)t[n].then(e,r)})},r._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(e){t(e,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();u.Promise||(u.Promise=r);var f=c(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),h=c(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),l=(h.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),p=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},y=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=f.document,b=l(v)&&l(v.createElement),m=function(t){return b?v.createElement(t):{}},_=!y&&!d(function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a}),g=function(t,e){if(!l(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!l(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,O={f:y?Object.defineProperty:function(t,e,r){if(p(t),e=g(e,!0),p(r),_)try{return w(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},E=y?function(t,e,r){return O.f(t,e,S(1,r))}:function(t,e,r){return t[e]=r,t},A={}.hasOwnProperty,j=function(t,e){return A.call(t,e)},P=0,T=Math.random(),k=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++P+T).toString(36))},x=c(function(t){var e=k("src"),r=Function.toString,n=(""+r).split("toString");h.inspectSource=function(t){return r.call(t)},(t.exports=function(t,r,o,i){var s="function"==typeof o;s&&(j(o,"name")||E(o,"name",r)),t[r]!==o&&(s&&(j(o,e)||E(o,e,t[r]?""+t[r]:n.join(String(r)))),t===f?t[r]=o:i?t[r]?t[r]=o:E(t,r,o):(delete t[r],E(t,r,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||r.call(this)})}),F=function(t,e,r){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},L=function(t,e,r){var n,o,i,s,a=t&L.F,u=t&L.G,c=t&L.S,l=t&L.P,p=t&L.B,d=u?f:c?f[e]||(f[e]={}):(f[e]||{}).prototype,y=u?h:h[e]||(h[e]={}),v=y.prototype||(y.prototype={});for(n in u&&(r=e),r)i=((o=!a&&d&&void 0!==d[n])?d:r)[n],s=p&&o?F(i,f):l&&"function"==typeof i?F(Function.call,i):i,d&&x(d,n,i,t&L.U),y[n]!=i&&E(y,n,s),l&&v[n]!=i&&(v[n]=i)};f.core=h,L.F=1,L.G=2,L.S=4,L.P=8,L.B=16,L.W=32,L.U=64,L.R=128;var N=L,D={}.toString,I=function(t){return D.call(t).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==I(t)?t.split(""):Object(t)},B=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},C=function(t){return Object(B(t))},U=Math.ceil,M=Math.floor,z=function(t){return isNaN(t=+t)?0:(t>0?M:U)(t)},G=Math.min,W=function(t){return t>0?G(z(t),9007199254740991):0},H=Array.isArray||function(t){return"Array"==I(t)},V=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),q=function(t){return V[t]||(V[t]={})},K=c(function(t){var e=q("wks"),r=f.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:k)("Symbol."+t))}).store=e}),$=K("species"),J=function(t,e){return new(function(t){var e;return H(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!H(e.prototype)||(e=void 0),l(e)&&null===(e=e[$])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Y=function(t,e){var r=1==t,n=2==t,o=3==t,i=4==t,s=6==t,a=5==t||s,u=e||J;return function(e,c,f){for(var h,l,p=C(e),d=R(p),y=F(c,f,3),v=W(d.length),b=0,m=r?u(e,v):n?u(e,0):void 0;v>b;b++)if((a||b in d)&&(l=y(h=d[b],b,p),t))if(r)m[b]=l;else if(l)switch(t){case 3:return!0;case 5:return h;case 6:return b;case 2:m.push(h)}else if(i)return!1;return s?-1:o||i?i:m}},X=K("unscopables"),Q=Array.prototype;void 0==Q[X]&&E(Q,X,{});var Z=function(t){Q[X][t]=!0},tt=Y(5),et=!0;"find"in[]&&Array(1).find(function(){et=!1}),N(N.P+N.F*et,"Array",{find:function(t){return tt(this,t,arguments.length>1?arguments[1]:void 0)}}),Z("find"),h.Array.find;var rt=Y(6),nt=!0;"findIndex"in[]&&Array(1).findIndex(function(){nt=!1}),N(N.P+N.F*nt,"Array",{findIndex:function(t){return rt(this,t,arguments.length>1?arguments[1]:void 0)}}),Z("findIndex"),h.Array.findIndex;var ot,it=function(t){return R(B(t))},st=Math.max,at=Math.min,ut=q("keys"),ct=function(t){return ut[t]||(ut[t]=k(t))},ft=(ot=!1,function(t,e,r){var n,o=it(t),i=W(o.length),s=function(t,e){return(t=z(t))<0?st(t+e,0):at(t,e)}(r,i);if(ot&&e!=e){for(;i>s;)if((n=o[s++])!=n)return!0}else for(;i>s;s++)if((ot||s in o)&&o[s]===e)return ot||s||0;return!ot&&-1}),ht=ct("IE_PROTO"),lt=function(t,e){var r,n=it(t),o=0,i=[];for(r in n)r!=ht&&j(n,r)&&i.push(r);for(;e.length>o;)j(n,r=e[o++])&&(~ft(i,r)||i.push(r));return i},pt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),dt=Object.keys||function(t){return lt(t,pt)},yt={f:Object.getOwnPropertySymbols},vt={f:{}.propertyIsEnumerable},bt=Object.assign,mt=!bt||d(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=bt({},t)[r]||Object.keys(bt({},e)).join("")!=n})?function(t){for(var r=C(t),n=arguments.length,o=1,i=yt.f,s=vt.f;n>o;)for(var a,u=R(arguments[o++]),c=i?dt(u).concat(i(u)):dt(u),f=c.length,h=0;f>h;)s.call(u,a=c[h++])&&(r[a]=u[a]);return r}:bt;N(N.S+N.F,"Object",{assign:mt}),h.Object.assign;var _t=K("match"),gt=function(t,e,r){if(l(n=e)&&(void 0!==(o=n[_t])?o:"RegExp"==I(n)))throw TypeError("String#"+r+" doesn't accept regex!");var n,o;return String(B(t))},wt=K("match"),Ot="".startsWith;N(N.P+N.F*function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[wt]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=gt(this,t,"startsWith"),r=W(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Ot?Ot.call(e,n,r):e.slice(r,r+n.length)===n}}),h.String.startsWith,N(N.P,"String",{repeat:function(t){var e=String(B(this)),r="",n=z(t);if(0>n||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r}}),h.String.repeat;var St=c(function(t){var e=k("meta"),r=O.f,n=0,o=Object.isExtensible||function(){return!0},i=!d(function(){return o(Object.preventExtensions({}))}),s=function(t){r(t,e,{value:{i:"O"+ ++n,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!l(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!j(t,e)){if(!o(t))return"F";if(!r)return"E";s(t)}return t[e].i},getWeak:function(t,r){if(!j(t,e)){if(!o(t))return!0;if(!r)return!1;s(t)}return t[e].w},onFreeze:function(t){return i&&a.NEED&&o(t)&&!j(t,e)&&s(t),t}}}),Et=(St.KEY,St.NEED,St.fastKey,St.getWeak,St.onFreeze,O.f),At=K("toStringTag"),jt=function(t,e,r){t&&!j(t=r?t:t.prototype,At)&&Et(t,At,{configurable:!0,value:e})},Pt={f:K},Tt=O.f,kt=function(t){var e=h.Symbol||(h.Symbol=f.Symbol||{});"_"==t.charAt(0)||t in e||Tt(e,t,{value:Pt.f(t)})},xt=y?Object.defineProperties:function(t,e){p(t);for(var r,n=dt(e),o=n.length,i=0;o>i;)O.f(t,r=n[i++],e[r]);return t},Ft=f.document,Lt=Ft&&Ft.documentElement,Nt=ct("IE_PROTO"),Dt=function(){},It=function(){var t,e=m("iframe"),r=pt.length;for(e.style.display="none",Lt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</script>"),t.close(),It=t.F;r--;)delete It.prototype[pt[r]];return It()},Rt=Object.create||function(t,e){var r;return null!==t?(Dt.prototype=p(t),r=new Dt,Dt.prototype=null,r[Nt]=t):r=It(),void 0===e?r:xt(r,e)},Bt=pt.concat("length","prototype"),Ct={f:Object.getOwnPropertyNames||function(t){return lt(t,Bt)}},Ut=Ct.f,Mt={}.toString,zt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gt={f:function(t){return zt&&"[object Window]"==Mt.call(t)?function(t){try{return Ut(t)}catch(t){return zt.slice()}}(t):Ut(it(t))}},Wt=Object.getOwnPropertyDescriptor,Ht={f:y?Wt:function(t,e){if(t=it(t),e=g(e,!0),_)try{return Wt(t,e)}catch(t){}return j(t,e)?S(!vt.f.call(t,e),t[e]):void 0}},Vt=St.KEY,qt=Ht.f,Kt=O.f,$t=Gt.f,Jt=f.Symbol,Yt=f.JSON,Xt=Yt&&Yt.stringify,Qt=K("_hidden"),Zt=K("toPrimitive"),te={}.propertyIsEnumerable,ee=q("symbol-registry"),re=q("symbols"),ne=q("op-symbols"),oe=Object.prototype,ie="function"==typeof Jt,se=f.QObject,ae=!se||!se.prototype||!se.prototype.findChild,ue=y&&d(function(){return 7!=Rt(Kt({},"a",{get:function(){return Kt(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=qt(oe,e);n&&delete oe[e],Kt(t,e,r),n&&t!==oe&&Kt(oe,e,n)}:Kt,ce=function(t){var e=re[t]=Rt(Jt.prototype);return e._k=t,e},fe=ie&&"symbol"==typeof Jt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Jt},he=function(t,e,r){return t===oe&&he(ne,e,r),p(t),e=g(e,!0),p(r),j(re,e)?(r.enumerable?(j(t,Qt)&&t[Qt][e]&&(t[Qt][e]=!1),r=Rt(r,{enumerable:S(0,!1)})):(j(t,Qt)||Kt(t,Qt,S(1,{})),t[Qt][e]=!0),ue(t,e,r)):Kt(t,e,r)},le=function(t,e){p(t);for(var r,n=function(t){var e=dt(t),r=yt.f;if(r)for(var n,o=r(t),i=vt.f,s=0;o.length>s;)i.call(t,n=o[s++])&&e.push(n);return e}(e=it(e)),o=0,i=n.length;i>o;)he(t,r=n[o++],e[r]);return t},pe=function(t){var e=te.call(this,t=g(t,!0));return!(this===oe&&j(re,t)&&!j(ne,t)||(e||!j(this,t)||!j(re,t)||j(this,Qt)&&this[Qt][t])&&!e)},de=function(t,e){if(t=it(t),e=g(e,!0),t!==oe||!j(re,e)||j(ne,e)){var r=qt(t,e);return!r||!j(re,e)||j(t,Qt)&&t[Qt][e]||(r.enumerable=!0),r}},ye=function(t){for(var e,r=$t(it(t)),n=[],o=0;r.length>o;)j(re,e=r[o++])||e==Qt||e==Vt||n.push(e);return n},ve=function(t){for(var e,r=t===oe,n=$t(r?ne:it(t)),o=[],i=0;n.length>i;)!j(re,e=n[i++])||r&&!j(oe,e)||o.push(re[e]);return o};ie||(x((Jt=function(){if(this instanceof Jt)throw TypeError("Symbol is not a constructor!");var t=k(arguments.length>0?arguments[0]:void 0),e=function(r){this===oe&&e.call(ne,r),j(this,Qt)&&j(this[Qt],t)&&(this[Qt][t]=!1),ue(this,t,S(1,r))};return y&&ae&&ue(oe,t,{configurable:!0,set:e}),ce(t)}).prototype,"toString",function(){return this._k}),Ht.f=de,O.f=he,Ct.f=Gt.f=ye,vt.f=pe,yt.f=ve,y&&x(oe,"propertyIsEnumerable",pe,!0),Pt.f=function(t){return ce(K(t))}),N(N.G+N.W+N.F*!ie,{Symbol:Jt});for(var be="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),me=0;be.length>me;)K(be[me++]);for(var _e=dt(K.store),ge=0;_e.length>ge;)kt(_e[ge++]);N(N.S+N.F*!ie,"Symbol",{"for":function(t){return j(ee,t+="")?ee[t]:ee[t]=Jt(t)},keyFor:function(t){if(!fe(t))throw TypeError(t+" is not a symbol!");for(var e in ee)if(ee[e]===t)return e},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),N(N.S+N.F*!ie,"Object",{create:function(t,e){return void 0===e?Rt(t):le(Rt(t),e)},defineProperty:he,defineProperties:le,getOwnPropertyDescriptor:de,getOwnPropertyNames:ye,getOwnPropertySymbols:ve}),Yt&&N(N.S+N.F*(!ie||d(function(){var t=Jt();return"[null]"!=Xt([t])||"{}"!=Xt({a:t})||"{}"!=Xt(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);return r=e=n[1],!l(e)&&void 0===t||fe(t)?void 0:(H(e)||(e=function(t,e){return"function"==typeof r&&(e=r.call(this,t,e)),fe(e)?void 0:e}),n[1]=e,Xt.apply(Yt,n))}}),Jt.prototype[Zt]||E(Jt.prototype,Zt,Jt.prototype.valueOf),jt(Jt,"Symbol"),jt(Math,"Math",!0),jt(f.JSON,"JSON",!0);var we=K("toStringTag"),Oe="Arguments"==I(function(){return arguments}()),Se={};Se[K("toStringTag")]="z",Se+""!="[object z]"&&x(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),we))?r:Oe?I(e):"Object"==(n=I(e))&&"function"==typeof e.callee?"Arguments":n)+"]";var t,e,r,n},!0),kt("asyncIterator"),kt("observable"),h.Symbol;var Ee={},Ae={};E(Ae,K("iterator"),function(){return this});var je,Pe=function(t,e,r){t.prototype=Rt(Ae,{next:S(1,r)}),jt(t,e+" Iterator")},Te=ct("IE_PROTO"),ke=Object.prototype,xe=Object.getPrototypeOf||function(t){return t=C(t),j(t,Te)?t[Te]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ke:null},Fe=K("iterator"),Le=!([].keys&&"next"in[].keys()),Ne=function(){return this},De=function(t,e,r,n,o,i,s){Pe(r,e,n);var a,u,c,f=function(t){if(!Le&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},h=e+" Iterator",l="values"==o,p=!1,d=t.prototype,y=d[Fe]||d["@@iterator"]||o&&d[o],v=y||f(o),b=o?l?f("entries"):v:void 0,m="Array"==e&&d.entries||y;if(m&&(c=xe(m.call(new t)))!==Object.prototype&&c.next&&(jt(c,h,!0),"function"!=typeof c[Fe]&&E(c,Fe,Ne)),l&&y&&"values"!==y.name&&(p=!0,v=function(){return y.call(this)}),(Le||p||!d[Fe])&&E(d,Fe,v),Ee[e]=v,Ee[h]=Ne,o)if(a={values:l?v:f("values"),keys:i?v:f("keys"),entries:b},s)for(u in a)u in d||x(d,u,a[u]);else N(N.P+N.F*(Le||p),e,a);return a},Ie=(je=!0,function(t,e){var r,n,o=String(B(t)),i=z(e),s=o.length;return 0>i||i>=s?je?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===s||(n=o.charCodeAt(i+1))<56320||n>57343?je?o.charAt(i):r:je?o.slice(i,i+2):n-56320+(r-55296<<10)+65536});De(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Ie(e,r),this._i+=t.length,{value:t,done:!1})});var Re=function(t,e){return{value:e,done:!!t}},Be=De(Array,"Array",function(t,e){this._t=it(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Re(1)):Re(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");Ee.Arguments=Ee.Array,Z("keys"),Z("values"),Z("entries");for(var Ce=K("iterator"),Ue=K("toStringTag"),Me=Ee.Array,ze={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ge=dt(ze),We=0;We<Ge.length;We++){var He,Ve=Ge[We],qe=ze[Ve],Ke=f[Ve],$e=Ke&&Ke.prototype;if($e&&($e[Ce]||E($e,Ce,Me),$e[Ue]||E($e,Ue,Ve),Ee[Ve]=Me,qe))for(He in Be)$e[He]||x($e,He,Be[He],!0)}Pt.f("iterator");var Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Qe="FirebaseError",Ze=Error.captureStackTrace,tr=function(){return function(t,e){if(this.code=t,this.message=e,Ze)Ze(this,er.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=Qe,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();tr.prototype=Object.create(Error.prototype),tr.prototype.constructor=tr,tr.prototype.name=Qe;var er=function(){function t(t,e,r){this.service=t,this.serviceName=e,this.errors=r,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var r,n=this.errors[t],o=this.service+"/"+t;r=void 0===n?"Error":n.replace(this.pattern,function(t,r){var n=e[r];return void 0!==n?n.toString():"<"+r+"?>"}),r=this.serviceName+": "+r+" ("+o+").";var i=new tr(o,r);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(i[s]=e[s]);return i},t}();!function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var r=1;r<e.blockSize;++r)e.pad_[r]=0;return e.reset(),e}!function(t,e){function r(){this.constructor=t}Je(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var r=this.W_;if("string"==typeof t)for(var n=0;16>n;n++)r[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;16>n;n++)r[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;80>n;n++){var o=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=4294967295&(o<<1|o>>>31)}var i,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4];for(n=0;80>n;n++)40>n?20>n?(i=f^u&(c^f),s=1518500249):(i=u^c^f,s=1859775393):60>n?(i=u&c|f&(u|c),s=2400959708):(i=u^c^f,s=3395469782),o=(a<<5|a>>>27)+i+h+s+r[n]&4294967295,h=f,f=c,c=4294967295&(u<<30|u>>>2),u=a,a=o;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var r=e-this.blockSize,n=0,o=this.buf_,i=this.inbuf_;e>n;){if(0==i)for(;r>=n;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;e>n;)if(o[i]=t.charCodeAt(n),++n,++i==this.blockSize){this.compress_(o),i=0;break}}else for(;e>n;)if(o[i]=t[n],++n,++i==this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(r=0;5>r;r++)for(var o=24;o>=0;o-=8)t[n]=this.chain_[r]>>o&255,++n;return t}}(function(){return function(){this.blockSize=-1}}());var nr=function(){function t(t,e){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(r)}).catch(function(t){r.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,r){var n,o=this;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(t,e){if("object"!=typeof t||null===t)return!1;for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(n.next=or),void 0===n.error&&(n.error=or),void 0===n.complete&&(n.complete=or);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?n.error(o.finalError):n.complete()}catch(t){}}),this.observers.push(n),i},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{e(r.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),ir=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},sr="[DEFAULT]",ar=[],ur=function(){function t(t,e,r){this.firebase_=r,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=Ye(void 0,t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){ar.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){ar=ar.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(r){Object.keys(t.services_[r]).forEach(function(n){e.push(t.services_[r][n])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=sr),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var r=e!==sr?e:void 0,n=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),r);this.services_[t][e]=n}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Ye(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(ar.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),ar=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&cr("app-deleted",{name:this.name_})},t}();ur.prototype.name&&ur.prototype.options||ur.prototype.delete||console.log("dc");var fr=new er("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});return function t(){function i(t){return ir(e,t=t||sr)||cr("no-app",{name:t}),e[t]}function s(){return Object.keys(e).map(function(t){return e[t]})}function a(t,e){Object.keys(r).forEach(function(r){var o=u(t,r);null!==o&&n[o]&&n[o](e,t)})}function u(t,e){if("serverAuth"===e)return null;var r=e;return t.options,r}var e={},r={},n={},o={__esModule:!0,initializeApp:function(t,r){if(void 0===r&&(r={}),"object"!=typeof r||null===r){var n=r;r={name:n}}var i=r;void 0===i.name&&(i.name=sr);var s=i.name;"string"==typeof s&&s||cr("bad-app-name",{name:s+""}),ir(e,s)&&cr("duplicate-app",{name:s});var u=new ur(t,i,o);return e[s]=u,a(u,"create"),u},app:i,apps:null,Promise:Promise,SDK_VERSION:"5.6.0",INTERNAL:{registerService:function(t,e,a,u,c){r[t]&&cr("duplicate-service",{name:t}),r[t]=e,u&&(n[t]=u,s().forEach(function(t){u("create",t)}));var f=function(e){return void 0===e&&(e=i()),"function"!=typeof e[t]&&cr("invalid-app-argument",{name:t}),e[t]()};return void 0!==a&&Ye(f,a),o[t]=f,ur.prototype[t]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._getService.bind(this,t).apply(this,c?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){Ye(o,t)},createSubscribe:rr,ErrorFactory:er,removeApp:function(t){a(e[t],"delete"),delete e[t]},factories:r,useAsService:u,Promise:Promise,deepExtend:Ye}};return Xe(o,"default",o),Object.defineProperty(o,"apps",{get:s}),Xe(i,"App",ur),o}()}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],t):t(e.firebase)}(this,function(e){"use strict";try{(function(){function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})}function o(e,t){function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function h(e,t){var n=new f(e,t);return n.subscribe.bind(n)}function d(){}function S(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function y(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(null,t))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function I(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}function m(){var e=indexedDB.open(D);e.onerror=function(){},e.onsuccess=function(){!function(e){if(e.objectStoreNames.contains(N)){var t=e.transaction(N).objectStore(N),n=new w,r=t.openCursor();r.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},r.onsuccess=function(){var t=r.result;if(t){var i=t.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(D)}}}(e.result)}}function A(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw v.create(E.BAD_TOKEN);if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw v.create(E.BAD_SCOPE);if(!(!e.vapidKey||e.vapidKey instanceof Uint8Array&&65===e.vapidKey.length))throw v.create(E.BAD_VAPID_KEY);if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw v.create(E.BAD_SUBSCRIPTION);if(e.auth&&!(e.auth instanceof ArrayBuffer))throw v.create(E.BAD_SUBSCRIPTION);if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw v.create(E.BAD_SUBSCRIPTION);if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw v.create(E.BAD_SENDER_ID);if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw v.create(E.BAD_PUSH_SET)}function U(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function L(e,t){return(n={})[l.TYPE_OF_MSG]=e,n[l.DATA]=t,n;var n}function F(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}e=e&&e.hasOwnProperty("default")?e.default:e;var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s="FirebaseError",a=Error.captureStackTrace,c=function(){return function(e,t){if(this.code=e,this.message=t,a)a(this,u.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=s,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}}}();c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name=s;var u=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new c(i,n);for(var s in t)t.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=t[s]);return o},e}();!function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}n(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0
},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;16>r;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;16>r;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;80>r;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;80>r;r++)40>r?20>r?(o=h^c&(u^h),s=1518500249):(o=c^u^h,s=1859775393):60>r?(o=c&u|h&(c|u),s=2400959708):(o=c^u^h,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=h,h=u,u=4294967295&(c<<30|c>>>2),c=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;t>r;){if(0==o)for(;n>=r;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;t>r;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;t>r;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;5>n;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}(function(){return function(){this.blockSize=-1}}());var p,l,_,f=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=d),void 0===r.error&&(r.error=d),void 0===r.complete&&(r.complete=d);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),E={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},b=((p={})[E.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",p[E.AVAILABLE_IN_SW]="This method is available in a service worker context.",p[E.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",p[E.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",p[E.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",p[E.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",p[E.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",p[E.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",p[E.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",p[E.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",p[E.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",p[E.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",p[E.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",p[E.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",p[E.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",p[E.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",p[E.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",p[E.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",p[E.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",p[E.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",p[E.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",p[E.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",p[E.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",p[E.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",p[E.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",p[E.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",p[E.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",p[E.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",p[E.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",p[E.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",p[E.BAD_SCOPE]="The service worker scope must be a string with at least one character.",p[E.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",p[E.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",p[E.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",p[E.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",p[E.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",p[E.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",p[E.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",p),v=new u("messaging","Messaging",b),g=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),T="https://fcm.googleapis.com";!function(e){e.TYPE_OF_MSG="firebase-messaging-msg-type",e.DATA="firebase-messaging-msg-data"}(l||(l={})),function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(_||(_={}));var K,w=function(){function e(){}return e.prototype.getToken=function(e,t,n){return i(this,void 0,void 0,function(){var r,i,s,a,c,u,h,f;return o(this,function(o){switch(o.label){case 0:r=y(t.getKey("p256dh")),i=y(t.getKey("auth")),s="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+i,S(n.buffer,g.buffer)||(a=y(n),s+="&application_pub_key="+a),(c=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:c,body:s},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(T+"/fcm/connect/subscribe",u)];case 2:return[4,o.sent().json()];case 3:return h=o.sent(),[3,5];case 4:throw o.sent(),v.create(E.TOKEN_SUBSCRIBE_FAILED);case 5:if(h.error)throw f=h.error.message,v.create(E.TOKEN_SUBSCRIBE_FAILED,{message:f});if(!h.token)throw v.create(E.TOKEN_SUBSCRIBE_NO_TOKEN);if(!h.pushSet)throw v.create(E.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:h.token,pushSet:h.pushSet}]}})})},e.prototype.updateToken=function(e,t,n,r,s){return i(this,void 0,void 0,function(){var i,a,c,u,h,f,d,p;return o(this,function(o){switch(o.label){case 0:i=y(r.getKey("p256dh")),a=y(r.getKey("auth")),c="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+r.endpoint+"&encryption_key="+i+"&encryption_auth="+a,S(s.buffer,g.buffer)||(u=y(s),c+="&application_pub_key="+u),(h=new Headers).append("Content-Type","application/x-www-form-urlencoded"),f={method:"POST",headers:h,body:c},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(T+"/fcm/connect/subscribe",f)];case 2:return[4,o.sent().json()];case 3:return d=o.sent(),[3,5];case 4:throw o.sent(),v.create(E.TOKEN_UPDATE_FAILED);case 5:if(d.error)throw p=d.error.message,v.create(E.TOKEN_UPDATE_FAILED,{message:p});if(!d.token)throw v.create(E.TOKEN_UPDATE_NO_TOKEN);return[2,d.token]}})})},e.prototype.deleteToken=function(e,t,n){return i(this,void 0,void 0,function(){var r,i,s,a,c;return o(this,function(o){switch(o.label){case 0:r="authorized_entity="+e+"&token="+t+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),s={method:"POST",headers:i,body:r},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch(T+"/fcm/connect/unsubscribe",s)];case 2:return[4,o.sent().json()];case 3:if((a=o.sent()).error)throw c=a.error.message,v.create(E.TOKEN_UNSUBSCRIBE_FAILED,{message:c});return[3,5];case 4:throw o.sent(),v.create(E.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},e}(),D="undefined",N="fcm_token_object_Store",O=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},e.prototype.getIndex=function(e,t){return this.createTransaction(function(n){return n.index(e).get(t)})},e.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},e.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},e.prototype.closeDatabase=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),i(this,void 0,void 0,function(){var n,r,i,s;return o(this,function(o){switch(o.label){case 0:return[4,this.getDb()];case 1:return n=o.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,function(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}(e(i))];case 2:return s=o.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(s)},r.onerror=function(){t(r.error)}})]}})})},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}})),this.dbPromise},e}(),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return n(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:m();case 2:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=r({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=I(t.vapidKey)),"string"==typeof t.auth&&(n.auth=I(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=I(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return i(this,void 0,void 0,function(){return o(this,function(){if(!e)throw v.create(E.BAD_TOKEN);return A({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return i(this,void 0,void 0,function(){return o(this,function(){if(!e)throw v.create(E.BAD_SCOPE);return A({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return i(this,void 0,void 0,function(){return o(this,function(){if(!e.swScope)throw v.create(E.BAD_SCOPE);if(!e.vapidKey)throw v.create(E.BAD_VAPID_KEY);if(!e.endpoint||!e.auth||!e.p256dh)throw v.create(E.BAD_SUBSCRIPTION);if(!e.fcmSenderId)throw v.create(E.BAD_SENDER_ID);if(!e.fcmToken)throw v.create(E.BAD_TOKEN);if(!e.fcmPushSet)throw v.create(E.BAD_PUSH_SET);return A(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(v.create(E.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw v.create(E.DELETE_TOKEN_NOT_FOUND);return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},t}(O),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return n(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw v.create(E.BAD_SCOPE);return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(e,t){return i(this,void 0,void 0,function(){var n;return o(this,function(){if("string"!=typeof e||0===e.length)throw v.create(E.BAD_SCOPE);if(null===t||65!==t.length)throw v.create(E.BAD_VAPID_KEY);return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},t.prototype.deleteVapidDetails=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw v.create(E.DELETE_SCOPE_NOT_FOUND);return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},t}(O),C="messagingSenderId",B=function(){function e(e){var t=this;if(!e.options[C]||"string"!=typeof e.options[C])throw v.create(E.BAD_SENDER_ID);this.messagingSenderId=e.options[C],this.tokenDetailsModel=new k,this.vapidDetailsModel=new P,this.iidModel=new w,this.app=e,this.INTERNAL={"delete":function(){return t.delete()}}}return e.prototype.getToken=function(){return i(this,void 0,void 0,function(){var e,t,n,r,i;return o(this,function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw v.create(E.NOTIFICATIONS_BLOCKED);return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,r){return i(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!S(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=S(e.getKey("auth"),n.auth),o=S(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(e,t,n)]}})})},e.prototype.updateToken=function(e,t,n,r){return i(this,void 0,void 0,function(){var i,s,a;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return i=o.sent(),s={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(s)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,i];case 4:return a=o.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw o.sent(),a;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return i(this,void 0,void 0,function(){var r,i;return o(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r.token]}})})},e.prototype.deleteToken=function(e){return i(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}})})},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},e.prototype.requestPermission=function(){throw v.create(E.AVAILABLE_IN_WINDOW)},e.prototype.useServiceWorker=function(){throw v.create(E.AVAILABLE_IN_WINDOW)},e.prototype.usePublicVapidKey=function(){throw v.create(E.AVAILABLE_IN_WINDOW)},e.prototype.onMessage=function(){throw v.create(E.AVAILABLE_IN_WINDOW)},e.prototype.onTokenRefresh=function(){throw v.create(E.AVAILABLE_IN_WINDOW)},e.prototype.setBackgroundMessageHandler=function(){throw v.create(E.AVAILABLE_IN_SW)},e.prototype.delete=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}(),R=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(e){n.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){n.onSubChange(e)}),self.addEventListener("notificationclick",function(e){n.onNotificationClick(e)}),n}return n(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(){return i(this,void 0,void 0,function(){var t,n,r,i,s,a;return o(this,function(o){switch(o.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return o.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=o.sent(),s=n.actions,a=Notification.maxActions,s&&a&&s.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return o.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(){return i(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),v.create(E.UNABLE_TO_RESUBSCRIBE,{message:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(e){return i(this,void 0,void 0,function(){var t,n,r,i;return o(this,function(o){switch(o.label){case 0:return e.notification&&e.notification.data&&e.notification.data.FCM_MSG?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data.FCM_MSG).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=L(_.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},t.prototype.getNotificationData_=function(e){if(e&&"object"==typeof e.notification){var t,n=r({},e.notification);return n.data=r({},e.notification.data,((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw v.create(E.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return i(this,void 0,void 0,function(){var t,n,r,i;return o(this,function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,U()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}})})},t.prototype.attemptToMessageClient_=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(){if(!e)throw v.create(E.NO_WINDOW_CLIENT_TO_MSG);return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,U()];case 1:return[2,e.sent().some(function(e){return"visible"===e.visibilityState})]}})})},t.prototype.sendMessageToWindowClients_=function(e){return i(this,void 0,void 0,function(){var t,n,r=this;return o(this,function(i){switch(i.label){case 0:return[4,U()];case 1:return t=i.sent(),n=L(_.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return i.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return i(this,void 0,void 0,function(){return o(this,function(){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return i(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw v.create(E.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,g]:[2,t]}})})},t}(B),M=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=h(function(e){n.messageObserver=e}),n.onTokenRefreshInternal=h(function(e){n.tokenRefreshObserver=e}),n.setupSWMessageListener_(),n}return n(t,e),t.prototype.getToken=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return i(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:if(!(e=document.querySelector('link[rel="manifest"]')))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e.href)];case 2:return[4,n.sent().json()];case 3:return t=n.sent(),[3,5];case 4:return n.sent(),[2];case 5:if(!t||!t.gcm_sender_id)return[2];if("103953800507"!==t.gcm_sender_id)throw v.create(E.INCORRECT_GCM_SENDER_ID);return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return t.sent(),[2,e.prototype.getToken.call(this)]}})})},t.prototype.requestPermission=function(){return i(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw v.create("denied"===e?E.PERMISSION_BLOCKED:E.PERMISSION_DEFAULT)}})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw v.create(E.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw v.create(E.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw v.create(E.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw v.create(E.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var t=I(e);if(65!==t.length)throw v.create(E.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(v.create(E.SW_REG_REDUNDANT))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(v.create(E.SW_REG_REDUNDANT));else n(e);else r(v.create(E.NO_SW_IN_REG))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw v.create(E.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse=t,t.update(),t})}))},t.prototype.getPublicVapidKey_=function(){return i(this,void 0,void 0,function(){return o(this,function(){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,g]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[l.TYPE_OF_MSG]){var n=t.data;switch(n[l.TYPE_OF_MSG]){case _.PUSH_MSG_RECEIVED:case _.NOTIFICATION_CLICKED:var r=n[l.DATA];e.messageObserver&&e.messageObserver.next(r)}}},!1)},t}(B);K={isSupported:F},e.INTERNAL.registerService("messaging",function(e){if(!F())throw v.create(E.UNSUPPORTED_BROWSER);return self&&"ServiceWorkerGlobalScope"in self?new R(e):new M(e)},K)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-messaging - be sure to load firebase-app.js first.")}}),_MOBILEPOPUP={link:"http://m.echo.msk.ru/",text:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438<br />\u043d\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0430\u0439\u0442\u0430",yes:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",no:"\u041e\u0442\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f",id:"goToMobilePopUp",returntimeout:18e5},function(){var main=/\d+/.exec($("body").attr("data-main")),mlink="http://m.echo.msk.ru";/^\/news/.test(location.pathname)&&(mlink+=main?"/news/detail.php?ID="+main:"/news/"),/^\/blog/.test(location.pathname)&&(mlink+=main?"/blogs/detail.php?ID="+main:"/blogs/"),/^\/schedule/.test(location.pathname)&&(mlink+="/schedule/"),/^\/polls/.test(location.pathname)&&(mlink+="/polls/"),/^\/(contributors|guests)/.test(location.pathname)&&(mlink+=main?"/peoples/detail.php?ID="+main:"/peoples/"),/^\/(programs|interview)/.test(location.pathname)&&(mlink+=main?/^P/.test($("body").attr("data-main"))?"/programs/detail.php?ID="+main:"/interview/detail.php?ID="+main:/^\/programs/.test(location.pathname)?"/programs/":"/interview/"),_MOBILEPOPUP.link=mlink}(),$(document).ready(function(){void 0!=window.echoInit&&window.echoInit(),$(".cont_tab[data-selected]").each(function(){var me=$(this),sel=me.attr("data-selected");me.find("a[data-key='"+sel+"']").each(function(){$(this).addClass("current")})}),$("a.print").click(function(e){e.preventDefault(),link=$("link#css-print"),"all"==link.attr("media")?link.attr("media","print"):link.attr("media","all")}),$("div.typical a[href]:not([target])").each(function(){linkedHost=this.hostname.toLowerCase(),linkedHost!=window.location.hostname.toLowerCase()&&"echo.msk.ru"!=linkedHost&&$(this).attr("target","_blank")}),function(){var comments_path="/elements/"+$("body").attr("data-main")+"/comments_page/",cp=$(".commentPage .pager a");if(cp.size()>0){var cid=window.location.hash;cp.find('a[href="'+cid+'"]').each(function(){$(this).trigger("click")}),cid.match(/^#cmnt-/)&&$.get(comments_path+cid.substr(1)+".html",function(data){$(".commentPage").html(data),window.location.hash=cid})}$(document).on("click",".commentList .pager a.ajax",function(e){var me=$(this);$.get(comments_path+me.attr("name")+".html",function(data){$(".commentPage").html(data),window.location.hash="#comments"}),e.preventDefault()}),$(".c_select").change(function(){var page=$(this).find("option:selected").val();switch(page){case"full":window.location.assign($(".com_titl h2 a").attr("href"));break;case"all":window.location.reload(),window.location.hash="#comments";break;case"answered":window.location.assign($("div.conthead a.right").attr("href"));break;case"queue":window.location.assign($("div.conthead a.right").attr("href")+"queue");
break;default:$("div.commentPage").load(comments_path+page+".html",function(){window.location.hash="#comments"})}})}(),function(){function like_caption(e){e.hasClass("flag")&&e.html(e.hasClass("on-state")?"(\u0412\u044b \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u043b\u0438\u0441\u044c)":"\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),e.hasClass("like")&&e.parent().find("div.likeList").load(e.attr("href"))}$("a.like, a.recom").on("switch",function(e,state){var self=$(this);1==state?self.addClass("on-state"):self.removeClass("on-state")}),$("a.like").on("switch",function(e,state,count){if(count){var self=$(this);self.html('<span class="wsico">&nbsp;</span>'+count),self.parent().find("div.likeList").load(self.attr("href"))}}),$("a.recom").on("switch",function(e,state){var self=$(this);self.html(1==state?'<span class="wsico">&nbsp;</span>\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c':'<span class="wsico">&nbsp;</span>\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c')}),$(document).on("click","a.like, a.recom, a.flag, a.foe, a.ignor",function(e){var self=$(this),data={state:0,_method:"put"};if(self.hasClass("on-state"))data.state=0;else{if(self.hasClass("flag")&&!confirm("\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f?"))return void e.preventDefault();if(self.hasClass("ignor")){if(!confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043d\u0435\u0441\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0447\u0451\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a?"))return void e.preventDefault();self.hide()}data.state=1}$.post(self.attr("href"),data,function(d){d.error?alert(d.error):self.hasClass("like")||self.hasClass("recom")?$('[href="'+self.attr("href")+'"]').trigger("switch",[d.state,d.count]):(1==d.state?self.addClass("on-state"):self.removeClass("on-state"),like_caption(self))},"json"),e.preventDefault()}),$(document).on("click","a.hide",function(e){var self=$(this),opts={};self.hasClass("delete")&&(opts._method="delete"),$.post(self.attr("href"),opts,function(d){self.parents("div.onecomm").first().replaceWith($(d).find("div.onecomm"))},"html"),e.preventDefault()}),$(document).on("click","a.ban-request",function(e){var self=$(this);confirm("\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0437\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?")&&$.post(self.attr("href"),function(d){d.error?alert(d.error):(self.hide(),alert("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"))},"json"),e.preventDefault()});var udata=$.data(document.body,"user")||{},access_level=udata.access_level||0;6>access_level&&udata.own_id&&$("div.blog").attr("data-creator")==udata.own_id&&(access_level=6),udata.liked&&$.each(udata.liked,function(i,v){$('a[href="/likes/'+v+'/"]').trigger("switch",[1])}),udata.foes&&$.each(udata.foes,function(i,v){$("#foe"+v).addClass("on-state"),$('[data-author="'+v+'"]').each(function(){var self=$(this);self.html(self.hasClass("bcast-q")?"(\u0432\u043e\u043f\u0440\u043e\u0441 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d)":"(\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d)")})}),$(document).on("mouseover",".onecomm.to-load",function(){var self=$(this);self.removeClass("to-load");var author=self.attr("data-author"),mlevel=self.attr("data-mlevel"),btn_bar=self.find("div.morelink"),hidden=self.hasClass("cmnt-hidden"),autor_div=self.find(".author .about"),like_btn=btn_bar.find("a.like");if(udata.own_id!=author&&udata.liked&&udata.flagged&&(udata.liked.indexOf(btn_bar.attr("id"))>=0&&like_btn.addClass("on-state").attr("title","\u0412\u044b \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043b\u0438"),3==mlevel&&mlevel++,access_level>=2&&self.find(".author a.dark").after('<a href="/foes/'+author+'" class="ignor">\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a>'),access_level>=3&&6>access_level&&(btn_bar.append('<a ref="nofollow" href="/flags/'+btn_bar.attr("id")+'" class="red flag">\u041f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f</a>'),udata.flagged.indexOf(btn_bar.attr("id"))>=0))){var flag_btn=btn_bar.find("a.flag");flag_btn.addClass("on-state"),like_caption(flag_btn)}access_level>3&&access_level>mlevel&&(btn_bar.append(hidden?'<a rel="nofollow" href="/moderate/comments/'+btn_bar.attr("id")+'/unhide.html" class="red hide">(\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c)</a>':'<a rel="nofollow" href="/moderate/comments/'+btn_bar.attr("id")+'/hide.html" class="red hide">(\u0421\u043a\u0440\u044b\u0442\u044c)</a>'),6>access_level?autor_div.size()>0&&udata.own_id!=author&&btn_bar.append('<a rel="nofollow" href="/moderate/comments/'+btn_bar.attr("id")+'/ban_request.html" class="red ban-request">(\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0431\u0430\u043d)</a>'):(btn_bar.append('<a rel="nofollow" href="/moderate/comments/'+btn_bar.attr("id")+'.html" class="red hide delete">(\u0423\u0434\u0430\u043b\u0438\u0442\u044c)</a>'),autor_div.size()>0&&btn_bar.append('<a rel="nofollow" href="/moderate/comments/'+btn_bar.attr("id")+'/ban.html" class="red hide">(\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c)</a>'))),access_level>3&&0==autor_div.size()&&btn_bar.append("<strong>(\u0417\u0430\u0431\u0430\u043d\u0435\u043d)</strong>")}),$(document).on("mouseover",".likeBlock.to-load",function(){var self=$(this);self.removeClass("to-load"),like_caption(self.find("a.like"))})}(),$(document).on("click",".answ",function(e){var self=$(this),div=self.parents("div.onecomm").first();div.find(".error").remove(),div.find("div.answform").size()>0?$(".answform").remove().appendTo($(".commentPage")).hide():($(".answform").remove().appendTo(div).show(),$(".answform input#comment_parent_id").val(self.attr("data-parent-id")),$(".answform textarea#comment_body").val(div.find("strong.name").text()+": "+$(".answform textarea#comment_body").val())),e.preventDefault()}),$(document).on("ajax:success",".add-comm form",function(ev,data){var reply=$(data),self=$(this);self.parent().find(".error").remove(),reply.hasClass("error")?self.before(reply):(self.find("#qa_answer").size()>0?self.parents(".commBlock").first().replaceWith(reply):self.find("#comment_parent_id").size()>0?(reply.insertAfter(self.parents(".onecomm").first()),$(".answform").remove().appendTo($(".commentPage")).hide()):reply.prependTo($("div.commentPage")),self.find("textarea").val(""))}),$(document).on("click",".qa-reply",function(e){e.preventDefault(),$(this).closest(".commBlock").find(".answform").toggle()}),$(document).on("ajax:success","a.qa-moderate",function(e,data){e.preventDefault(),$(this).closest(".commBlock").parents(".commBlock").first().replaceWith(data)}),function(){var sav=$("div.avatar#setavatar");$(".fileupload input[type=file]").on("change",function(){var fd=new FormData;fd.append(this.name,this.files[0]),$.ajax({url:$(this).data("path"),method:"POST",data:fd,cache:!1,contentType:!1,processData:!1,error:function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430")},success:function(html){$(".pic",sav).html(html),$("a.delete",sav).show()}})}),$(document).on("ajax:success","div.avatar#setavatar a.delete",function(e,data){$(".pic",sav).html(data),$(this).hide()})}(),$(".filtrsearch input").click(function(){$("#search_cond_what").val($(this).val())}),$("select.c_select#search_cond_when").change(function(){$("form#search_when").submit()}),$("a.calend input.calendar").on("change",function(){var self=$(this),form=self.closest("form"),fmt=form.data("format");if(fmt){var d=self.val().split(".").reverse(),a=form.attr("action");switch(fmt){case"schedule":form.attr("action",a+d.join("-")+".html");break;case"news":form.attr("action",a+d.join("/")+".html")}}form.submit()}),$(".mainpreview").on("change",function(e){var self=$(this),d=$("span[data-more]",self);e.preventDefault(),d.length>0?($(".moregiant a[href]",self).attr("href",d.data("more")),d.remove()):$(".moregiant",self).remove()}),$(document).delegate("[data-remote].replace-me","ajax:success",function(e,html){$(this).replaceWith(html)}),$(function(){$(".js-tabs").tabs(),$(".js-top-7").masonry({itemSelector:".js-top-7-item",columnWidth:220,gutter:20})}),$(function(){function updClubReq(){$("#user_club_req").attr("checked")?$(".club_only").show():$(".club_only").hide()}updClubReq(),$("#user_club_req").on("change",function(){updClubReq()})}),function(){var main=$("body").data("main");if(""!=main){var udata=$.data(document.body,"user")||{},data={main:main};udata.own_id&&(data.user_id=udata.own_id),$.ajax({url:"/assets/counters.js",async:!0,cache:!1,data:data})}}(),$("form.voteform").submit(function(){var fa=$(this).find(".free_answer");return fa.size()>0&&""!=fa.val()?!0:0==$(this).find("span.checked").size()?(alert("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0448 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430"),!1):!0}),$("blockquote.tw").each(function(){var self=$(this),url=window.location.href,text=self.text();text.length>120||self.append('<span class="twitter-share-button"><span class="social_block"><span class="iblock tw_sharer"><a class="ico tw tw_btn" href="http://twitter.com/share?url='+url+"&text="+encodeURIComponent(text)+'" target="_blank" title="Retweet"><strong class="wsico">Q</strong><span>\u0422\u0432\u0438\u0442\u043d\u0443\u0442\u044c</span></a></span></span></span>')}),$(".notifications a.close").on("click",function(e){e.preventDefault(),$(this).closest(".notifications").fadeOut()}),function(){if("undefined"!=typeof sched_current&&sched_current&&sched_now){var i;for(i=0;i<sched_current.length;i+=1){var c=sched_current[i];if(sched_now>=c[0]){$(".liveprogtitle").html(c[1]);break}}}}(),$(document).on("update",".person_list",function(){$(this).find(".audionota").audionota()}),function(){if(fbLink="https://www.facebook.com/dialog/feed?app_id=229675500419533&link="+document.URL+"&redirect_uri="+document.URL+"&name="+document.title+"&caption=",twLink="http://twitter.com/intent/tweet?text="+document.URL+"%20",$("meta[name=author]").size()>0){var author=$("meta[name=author]").attr("content");author.length>0&&(twLink+=encodeURIComponent(author+": "))}vkLink="https://vk.com/share.php?url="+document.URL+"&title="+document.title+"&description=",$("div.typical").contentshare({shareIcons:["/i/contentshare/fb.png","/i/contentshare/tw.png","/i/contentshare/vk.png"],shareLinks:[fbLink,twLink,vkLink]}),$.fn.contentshare.defaults.shareable.on("mouseup",function(){$.fn.contentshare.showTooltip()})}(),window.localStorage&&function(){return}()});